var De=Object.defineProperty,Ce=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var ee=(n,a,e)=>a in n?De(n,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[a]=e,N=(n,a)=>{for(var e in a||(a={}))xe.call(a,e)&&ee(n,e,a[e]);if(he)for(var e of he(a))$e.call(a,e)&&ee(n,e,a[e]);return n},L=(n,a)=>Ce(n,Pe(a));var _=(n,a,e)=>(ee(n,typeof a!="symbol"?a+"":a,e),e);import{a as ge,m as q,o as S,c as te,b,f as M,g as A,d as y,r as p,u as j,j as t,B as T,e as m,h as Ie,S as je,i as E,A as ke,C as $,P as v,L as z,k as Q,T as J,l as _e,n as Ue,I as Fe,p as Oe,q as ve,s as Re,t as W,v as Y,F as V,w as Be,x as Se,y as qe,D as Ae,z as Me,E as ze,G as me,H as We,J as x,K as ye,M as Ne,_ as O,N as He,O as Je,Q as Ve,R as Le,U as Ke,V as ue,W as I,X as Qe,Y as Ye,Z as Ze,$ as fe,a0 as Xe,a1 as Ge,a2 as et,a3 as tt,a4 as at,a5 as rt,a6 as st,a7 as it,a8 as nt,a9 as ot,aa as lt,ab as ct,ac as dt,ad as ht}from"./vendor.42605bad.js";const mt=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}};mt();const ut="https://api.clockify.me/api/v1",ft="https://reports.api.clockify.me/",pt=ge.create({baseURL:ut,timeout:1e4}),be=ge.create({baseURL:ft,timeout:1e4}),B=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},i=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(i))}];class Z{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"defaultWorkspace",null);_(this,"profilePicture",null);_(this,"timeEntries",[]);_(this,"timeEntriesByDay",[]);_(this,"teams",[]);_(this,"hours",null);_(this,"warnings",{});if(q(this,{id:S,name:S,email:S,defaultWorkspace:S,profilePicture:S,timeEntries:S,timeEntriesByDay:S,teams:S,hours:S,warnings:S}),a==null||a.id==null)throw new Error("Invalid user constructor");const{id:e,name:i,email:s,defaultWorkspace:r,profilePicture:l,timeEntries:o,timeEntriesByDay:c,teams:f,hours:d,warnings:g}=a;this.id=e,this.name=i||"",this.email=s||"",this.defaultWorkspace=r||"",this.profilePicture=l||"",this.timeEntries=o||[],this.timeEntriesByDay=c||[],this.teams=f||[],this.hours=d||0,this.warnings=g||{}}static fromApi({id:a,name:e,email:i,defaultWorkspace:s,profilePicture:r,timeEntries:l,timeEntriesByDay:o,teams:c,hours:f,warnings:d}={}){return new Z({id:a,name:e,email:i,defaultWorkspace:s,profilePicture:r,timeEntries:l,timeEntriesByDay:o,teams:c,hours:f,warnings:d})}}class gt{constructor(){_(this,"user",null);_(this,"authStatus","unauthenticated");_(this,"autoLogin",!1);_(this,"fetchDataLog",[]);q(this,{user:S,authStatus:S,autoLogin:S,fetchDataLog:S,isAuthenticated:te,isConfirmingIdentity:te,isUnauthenticated:te,setUser:b.bound,confirmIdentity:b.bound,unauthenticate:b.bound,setAutoLogin:b.bound,feedFetchDataLog:b.bound,setStatusConfirmingIdentity:b.bound,clearDataLog:b.bound,authenticate:M})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(a){this.user=Z.fromApi(a)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(a){this.autoLogin=a}feedFetchDataLog(a,e){let i="";switch(e){case"success":{i="#27ae60";break}case"error":{i="#c0392b";break}default:{i="#ffffff";break}}typeof a=="string"&&a.length&&this.fetchDataLog.push({text:a,color:i})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,A().defaults.headers.common["X-Api-Key"]=null}*authenticate(a){try{const[,e]=B("clockify-api-key");A().defaults.headers.common["X-Api-Key"]=a,be.defaults.headers.common["X-Api-Key"]=a,e(a);const i=yield A().get("/user");return(i==null?void 0:i.status)!==200?(alert("Invalid Clockify API Key"),!1):(i==null?void 0:i.data)?(this.setUser(i.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(e){return console.log(e),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const C=n=>{try{const a=n==null?void 0:n.split("H");let e=0,i=0;return(a==null?void 0:a.length)?((a==null?void 0:a.length)===2?(e=Number(a[0].split("PT")[1])||0,i=Number(a[1].split("M")[0])||0):a[0]!=="PT0S"&&(i=Number(a[0].replace("PT","").replace("M",""))),Number(e+i/60)):null}catch(a){return console.log(a),null}},ae=n=>{try{const a=n==null?void 0:n.split("T");if(a==null?void 0:a.length){const e=a[0].split("-");return`${e[2]}/${e[1]}/${e[0]}`}return null}catch(a){return console.log(a),null}},pe=n=>{try{const a=new Date(n).toISOString().split("T");if(a==null?void 0:a.length){const e=a[0].split("-");return`${e[2]}-${e[1]}-${e[0]}`}return null}catch(a){return console.log(a),null}},K={NO_PROJECT:"Entrada sem projeto",NO_DESCRIPTION:"Entrada sem descri\xE7\xE3o",TIME_LIMIT:"Entrada maior que 6 horas"};class _t{constructor(){_(this,"userList",[]);_(this,"queryStartDate",null);_(this,"queryEndDate",null);q(this,{userList:S,queryStartDate:S,queryEndDate:S,setUserList:b.bound,formatUserData:b.bound,getUsersTeams:b.bound,fetchUserList:M,fetchUserTimeEntries:M,fetchUserSummaryReport:M})}setUserList(a=[]){this.userList=a.map(e=>Z.fromApi(e))}setQueryDate(a,e){this.queryStartDate=a,this.queryEndDate=e}*fetchUserTimeEntries(a={}){const{id:e,name:i,pageSize:s=5e3}=a,{NO_DESCRIPTION:r,NO_PROJECT:l,TIME_LIMIT:o}=K;try{y().authStore.feedFetchDataLog(`fetching user ${i} time entries...`);const{defaultWorkspace:c}=y().authStore.user,f=yield A().get(`/workspaces/${c}/user/${e}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":s}});if(f.status!==200)return y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1;if(f==null?void 0:f.data){let d=0;const g={};Object.keys(K).forEach(h=>{g[h]=0});const P=f.data.map(h=>{var k,U,F;const w=(k=h==null?void 0:h.timeInterval)==null?void 0:k.duration,u=L(N({},h),{warnings:[]});if(((U=h==null?void 0:h.projectId)==null?void 0:U.length)||(u.warnings.push(l),g.NO_PROJECT++),((F=h==null?void 0:h.description)==null?void 0:F.length)||(u.warnings.push(r),g.NO_DESCRIPTION++),w==null?void 0:w.length){const G=C(w);G&&(d+=G,G>=6&&(u.warnings.push(o),g.TIME_LIMIT++))}return u});return y().authStore.feedFetchDataLog(`fetch user ${i} time entries success`,"success"),{timeEntries:P,hours:d,warnings:g}}return y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1}catch(c){return console.log(c),y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1}}formatUserData(a){var e,i;try{let s=[];for(const r of a.timeEntries){const l=(e=r==null?void 0:r.timeInterval)==null?void 0:e.duration,o=(i=r==null?void 0:r.timeInterval)==null?void 0:i.start,c=y().projectStore.projectList.find(({id:d})=>d===(r==null?void 0:r.projectId)),f=s.find(d=>d.date===ae(o));(l==null?void 0:l.length)&&(o==null?void 0:o.length)&&(f?s=s.map(d=>d.date===ae(o)?{date:d.date,timeEntries:[...d.timeEntries,L(N({},r),{project:c||{name:"Sem projeto",color:"#ffffff"}})],hours:d.hours+C(l)}:d):s.push({date:ae(o),timeEntries:[L(N({},r),{project:c||{name:"Sem projeto",color:"#ffffff"}})],hours:C(l)}))}return L(N({},a),{timeEntriesByDay:s})}catch(s){return console.log(s),!1}}getUsersTeams(){const a=[];for(const e of this.userList){const i=[];for(const s of y().teamStore.teamList)for(const r of s.users)r.id===e.id&&i.push(s);a.push(L(N({},e),{teams:i}))}this.setUserList(a)}*fetchUserList(a={}){var e;try{y().authStore.feedFetchDataLog("fetching user list...");const{pageSize:i=5e3}=a,{defaultWorkspace:s}=y().authStore.user,r=yield A().get(`/workspaces/${s}/users`,{params:{"page-size":i,status:"ACTIVE"}});if(r.status!==200)return y().authStore.feedFetchDataLog("fetch user list error","error"),!1;if((e=r==null?void 0:r.data)==null?void 0:e.length){y().authStore.feedFetchDataLog("fetch user list success","success");const l=[];for(const o of r.data){const c=yield this.fetchUserTimeEntries(o);if(c){const f=this.formatUserData(N(N({},o),c));l.push(f)}}if(l.length)return this.setUserList(l),y().authStore.feedFetchDataLog("fetch all users time entries success","success"),!0}return y().authStore.feedFetchDataLog("fetch user list error","error"),!1}catch(i){return console.log(i),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*fetchUserSummaryReport(a){try{const{defaultWorkspace:e}=y().authStore.user,i=yield be.post(`/workspaces/${e}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[a.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"});console.log(a);const s=`${a.name.replace(" ","-")}__${pe(this.queryStartDate)}_${pe(this.queryEndDate)}`,r=new Blob([i.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(r,s);else{const l=document.createElement("a"),o=document.querySelector("body");l.href=window.URL.createObjectURL(r),l.download=s,l.style.display="none",o.appendChild(l),l.click(),o.removeChild(l),window.URL.revokeObjectURL(l.href)}return!1}catch(e){return console.log(e),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}}class re{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"workspaceId",null);_(this,"color",null);_(this,"duration",null);_(this,"estimate",null);_(this,"users",[]);_(this,"timeEntriesByUser",[]);if(q(this,{id:S,name:S,email:S,workspaceId:S,color:S,duration:S,estimate:S,users:S,timeEntriesByUser:S}),a==null||a.id==null)throw new Error("Invalid Project constructor");const{id:e,name:i,email:s,workspaceId:r,color:l,duration:o,estimate:c,users:f,timeEntriesByUser:d}=a;this.id=e,this.name=i||"",this.email=s||"",this.workspaceId=r||"",this.color=l||"",this.duration=o||"",this.estimate=c||"",this.users=f||[],this.timeEntriesByUser=d||[]}static fromApi({id:a,name:e,email:i,workspaceId:s,color:r,duration:l,estimate:o,users:c,timeEntriesByUser:f}={}){return new re({id:a,name:e,email:i,workspaceId:s,color:r,duration:l,estimate:o,users:c,timeEntriesByUser:f})}}class vt{constructor(){_(this,"projectList",[]);q(this,{projectList:S,setProjectList:b.bound,formatProjectData:b.bound,formatProjectList:b.bound,fetchProjectList:M})}setProjectList(a=[]){this.projectList=a.map(e=>re.fromApi(e))}formatProjectData(a={}){var e;try{const{id:i}=a;let s=[];for(const r of y().userStore.userList){const l=r.timeEntries.filter(o=>o.projectId===i);for(const o of l){const c=s.find(g=>g.id===o.userId);let f=0;const d=(e=o==null?void 0:o.timeInterval)==null?void 0:e.duration;(d==null?void 0:d.length)&&(f+=C(d)),c?s=s.map(g=>g.id===o.userId?L(N({},g),{timeEntries:[...g.timeEntries,o],hours:g.hours+f}):g):s.push(L(N({},r),{timeEntries:[o],hours:f}))}}return L(N({},a),{timeEntriesByUser:s})}catch(i){return console.log(i),!1}}formatProjectList(){const a=[];for(const e of this.projectList){const i=this.formatProjectData(e);a.push(i)}this.setProjectList(a)}*fetchProjectList(a={}){var e;try{y().authStore.feedFetchDataLog("fetching project list...");const{pageSize:i=5e3}=a,{defaultWorkspace:s}=y().authStore.user,r=yield A().get(`/workspaces/${s}/projects`,{params:{archived:!1,"page-size":i}});return r.status!==200?(y().authStore.feedFetchDataLog("fetch project list error","error"),!1):((e=r==null?void 0:r.data)==null?void 0:e.length)?(this.setProjectList(r.data),y().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(i){return console.log(i),y().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class se{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"image",null);_(this,"users",[]);_(this,"timeEntriesByProject",[]);if(q(this,{id:S,name:S,image:S,users:S,timeEntriesByProject:S}),a==null||a.id==null)throw new Error("Invalid Team constructor");const{id:e,name:i,image:s,users:r,timeEntriesByProject:l}=a;this.id=e,this.name=i||"",this.image=s||"",this.users=r||[],this.timeEntriesByProject=l||[]}static fromApi({id:a,name:e,image:i,users:s,timeEntriesByProject:r}={}){return new se({id:a,name:e,image:i,users:s,timeEntriesByProject:r})}}class St{constructor(){_(this,"teamList",[]);q(this,{teamList:S,setTeamList:b.bound,createTeam:b.bound,editTeam:b.bound,fetchTeamList:b.bound,formatTeamData:b.bound})}createTeam(a={}){try{const{users:e}=a,[i,s]=B("team-list"),r=i||[];let l=1;return r.length?(l=r.length+1,s([...r,L(N({},a),{id:l,users:e.map(o=>o.id)})])):s([L(N({},a),{id:1,users:e.map(o=>o.id)})]),l}catch(e){return console.log(e),!1}finally{this.fetchTeamList()}}editTeam(a,e={}){try{const[i,s]=B("team-list"),{users:r}=e;return s(i.map(l=>l.id===a?L(N(N({},l),l),{users:r.map(o=>o.id)}):l)),a}catch(i){return console.log(i),!1}finally{this.fetchTeamList()}}removeTeam(a={}){try{const[e,i]=B("team-list"),s=e.filter(r=>r.id!==a.id);i(s),this.setTeamList(s.map(r=>L(N({},r),{users:y().userStore.userList.filter(l=>r.users.includes(l.id))})))}catch(e){console.log(e)}}setTeamList(a=[]){this.teamList=a.map(e=>se.fromApi(e))}fetchTeamList(){try{y().authStore.feedFetchDataLog("fetching team list...");const[a]=B("team-list");if(a.length){const e=[];for(const i of a){const s=this.formatTeamData(i);e.push(L(N({},s),{users:y().userStore.userList.filter(r=>i.users.includes(r.id))}))}this.setTeamList(e),y().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(a){return console.log(a),y().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(a={}){var e;try{const i=[];let s=[];for(const l of a.users){const o=y().userStore.userList.find(c=>c.id===l);if(o){const{timeEntries:c,hours:f}=o;for(const g of c){const P=s.find(u=>u.id===g.projectId);let h=0;const w=(e=g==null?void 0:g.timeInterval)==null?void 0:e.duration;(w==null?void 0:w.length)&&(h+=C(w)),P?s=s.map(u=>u.id===g.projectId?L(N({},u),{id:g.projectId,timeEntries:[...u.timeEntries,g],hours:u.hours+h}):u):s.push({id:g.projectId,timeEntries:[g],hours:h})}const d=y().userStore.userList.find(g=>g.id===l.id);i.push(L(N({},d),{timeEntries:c,hours:f}))}}let r=0;for(const l of s){if(l.id){const o=y().projectStore.projectList.find(c=>c.id===l.id);o&&(s[r]=L(N({},s[r]),{name:o.name,color:o.color}))}else s[r]=L(N({},s[r]),{name:"Sem projeto",color:"#ffffff"});r++}return L(N({},a),{users:i,timeEntriesByProject:s})}catch(i){return console.log(i),!1}}}class yt{constructor(){_(this,"authStore",null);_(this,"userStore",null);_(this,"projectStore",null);_(this,"teamStore",null)}init(){this.authStore=new gt,this.userStore=new _t,this.projectStore=new vt,this.teamStore=new St}}const we=p.exports.createContext({}),Nt=we.Provider,D=()=>p.exports.useContext(we);const Lt=[{route:"/",label:"Colaboradores"},{route:"/teams",label:"Equipes"},{route:"/projects",label:"Projetos"}],Ee=({vertical:n,drawer:a})=>{const e=j(),i=s=>{e(s),a&&a.close()};return t("nav",{className:`menu ${n?"vertical":""}`,children:t("ul",{className:"menu__list",children:Lt.map(s=>t("li",{className:"menu__list__item",children:t(T,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>i(s.route),children:s.label})},s.route))})})};const bt=()=>{const[n,a]=p.exports.useState(!1),e=()=>{a(!0)},i=()=>{a(!1)};return m("div",{className:"drawer",children:[t(T,{onClick:e,children:t(Ie,{color:"primary"})}),t(je,{anchor:"left",open:n,onClose:i,onOpen:e,children:t("div",{className:"drawer__content",children:t(Ee,{vertical:!0,drawer:{close:i}})})})]})};const wt=()=>t("div",{className:"logo",children:"Clockify Teams"});const Et=()=>t(ke,{className:"header",children:t($,{maxWidth:"lg",children:m("div",{className:"header__content",children:[t(wt,{}),t("div",{className:"header__menu",children:t(Ee,{})}),t("div",{className:"header__drawer",children:t(bt,{})})]})})});var Tt=E(Et);const ie=n=>{var f;const a=D(),{hours:e,warnings:i,user:s,pdf:r}=n,[l,o]=p.exports.useState(!1),c=async()=>{o(!0),await W(a.userStore.fetchUserSummaryReport(s)),o(!1)};return m("div",{className:"user__meta",children:[t(J,{arrow:!0,placement:"left",title:"Horas trabalhadas no per\xEDodo selecionado",children:m("div",{className:"user__meta__item",style:{color:e>=200?"#f44336":"#ffffff"},children:[e.toFixed(2),t(_e,{color:e>=200?"error":""})]})}),r?t(J,{arrow:!0,placement:"left",title:"Visualizar relat\xF3rio",children:l?t(Ue,{style:{width:20,height:20,margin:14}}):t(Fe,{onClick:c,children:t(Oe,{})})}):null,((f=Object.entries(i).filter(([,d])=>d>0))==null?void 0:f.length)?t(J,{arrow:!0,placement:"left",title:t("ul",{className:"warning-list",children:Object.entries(i).filter(([,d])=>d>0).map(([d,g])=>t("li",{className:"warning-list__item",children:`${g}x ${K[d]}`},K[d]))}),children:t("div",{className:"user__meta__item warning",children:t(ve,{color:i.NO_PROJECT>0||i.NO_DESCRIPTION>0?"error":"inherit"})})}):t("div",{className:"user__meta__item",children:t(Re,{color:"secondary"})})]})};ie.propTypes={hours:v.number.isRequired,user:v.instanceOf(Object).isRequired,pdf:v.bool,warnings:v.instanceOf(Object).isRequired};ie.defaultProps={pdf:!1};const ne=n=>{const{id:a,name:e,lastName:i,profilePicture:s,email:r,showMeta:l,pdf:o,disabled:c,hours:f,warnings:d}=n,g=j();return m(z,{className:"user",children:[m("div",{className:"user__pressable",onClick:()=>c?null:g(`/users/${a}`),style:{pointerEvents:c?"none":"initial"},children:[t(Q,{alt:e,src:s,className:"user__avatar"}),m("div",{className:"user__profile",children:[t("div",{className:"user__name",children:e}),t("div",{className:"user__email",children:r})]})]}),l?t(ie,{pdf:o,hours:f,warnings:d,user:{id:a,name:e,lastName:i,email:r}}):null]})};ne.propTypes={id:v.oneOfType([v.number,v.string]),name:v.string,lastName:v.string,profilePicture:v.string,email:v.string,showMeta:v.bool,pdf:v.bool,disabled:v.bool,hours:v.number,warnings:v.instanceOf(Object)};ne.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null};var R=E(ne);const Dt=()=>{var f;const n=D(),a=Y(),e=j(),[i,s]=p.exports.useState(!1),r=n.teamStore.teamList.find(({id:d})=>d===Number(a.id)),l=()=>{s(!0)},o=()=>{s(!1)},c=()=>{n.teamStore.removeTeam(r),o(),e("/teams")};return p.exports.useEffect(()=>{window.scrollTo(0,0)},[]),r?m(V,{children:[m("div",{className:"screen team-detail",children:[m($,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[m("div",{className:"screen__header__left",children:[t(Q,{alt:r==null?void 0:r.name,src:r==null?void 0:r.image,className:"team-detail__avatar"}),t("h2",{children:r==null?void 0:r.name})]}),t("div",{className:"screen__header__right",children:t(T,{onClick:l,children:t(Be,{})})})]}),t("main",{children:m("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores na equipe"})}),((f=r==null?void 0:r.users)==null?void 0:f.length)?r.users.map(d=>t(R,{id:d.id,profilePicture:d==null?void 0:d.profilePicture,name:d==null?void 0:d.name,email:d==null?void 0:d.email,hours:d==null?void 0:d.hours,warnings:d==null?void 0:d.warnings,showMeta:!0},d.id)):null]})})]}),t(Se,{className:"team-detail__edit-team",color:"primary","aria-label":"Editar equipe",onClick:()=>{e(`/teams/edit/${r.id}`)},children:t(qe,{})})]}),m(Ae,{open:i,onClose:o,"aria-labelledby":"draggable-dialog-title",children:[t(Me,{style:{cursor:"move"},id:"draggable-dialog-title",children:`Excluir equipe ${r.name}`}),m(ze,{children:[t(me,{children:`Voc\xEA tem certeza que deseja excluir a equipe ${r.name}?`}),t(me,{children:"Esta a\xE7\xE3o \xE9 irrevers\xEDvel."})]}),m(We,{children:[t(T,{autoFocus:!0,onClick:o,color:"primary",children:"Cancelar"}),t(T,{onClick:c,color:"primary",children:"Confirmar"})]})]})]}):null};var Ct=E(Dt);const oe=n=>{const{id:a,name:e,image:i,avatarSize:s,fontSize:r,disabled:l,card:o}=n,c=j();return o?m(z,{className:"team card",button:!l,onClick:()=>l?null:c(`/teams/${a}`),children:[i.length?t("img",{className:"team__image",src:i,alt:e}):null,t("div",{className:"team__data",children:t("div",{className:"team__name",style:{fontSize:r},children:e})})]}):m(z,{className:"team",button:!l,onClick:()=>l?null:c(`/teams/${a}`),children:[t(Q,{alt:e,src:i,className:"team__avatar",style:{width:s,height:s}}),t("div",{className:"team__data",children:t("div",{className:"team__name",style:{fontSize:r},children:e})})]})};oe.propTypes={id:v.number.isRequired,name:v.string,image:v.string,avatarSize:v.number,fontSize:v.number,disabled:v.bool,card:v.bool};oe.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var X=E(oe);const Pt=()=>{const n=D(),a=Y(),e=j(),i=n.teamStore.teamList.find(u=>u.id===Number(a.id)),[s,r]=p.exports.useState(""),[l,o]=p.exports.useState(""),[c,f]=p.exports.useState([]),[d,g]=p.exports.useState([]),P=(u,k,U)=>{f(O.sortBy(k.filter(F=>F.id!==u.id),"name")),g(O.sortBy([...U,u],"name"))},h=(u,k,U)=>{g(O.sortBy(U.filter(F=>F.id!==u.id),"name")),f(O.sortBy([...k,u],"name"))},w=async()=>{const u=await n.teamStore.editTeam(i.id,{name:s,image:l,users:d});e(`/teams/${u}`),u&&alert("Suas altera\xE7\xF5es foram salvas.")};return p.exports.useEffect(()=>{r(i.name),o(i.image),g(i.users);const u=[...n.userStore.userList];i.users.forEach(k=>{u.forEach((U,F)=>{U.id===k.id&&u.splice(F,1)})}),f(u)},[i]),p.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t("div",{className:"screen create-team",children:m($,{maxWidth:"lg",children:[t("header",{className:"screen__header",children:t("h2",{children:`Editar equipe ${i.name}`})}),m("main",{children:[m("div",{className:"create-team__form",children:[m("div",{className:"create-team__form__content",children:[t(x,{id:"team-name",label:"Nome",variant:"filled",value:s,onChange:u=>{r(u.target.value)}}),t(x,{id:"team-image",label:"Imagem",variant:"filled",value:l,onChange:u=>{o(u.target.value)}}),(s==null?void 0:s.length)||(l==null?void 0:l.length)?t("div",{className:"screen__header__preview",children:t(X,{name:s,image:l,avatarSize:80,fontSize:22,disabled:!0})}):null]}),t(T,{variant:"outlined",onClick:w,children:"Salvar"})]}),m("div",{className:"create-team__user-lists",children:[m("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Todos os colaboradores"})}),c.map(u=>m("div",{className:"user-list__item",children:[t(R,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours},u.id),t(T,{className:"user-list__item__bt-add",onClick:()=>P(u,c,d),children:t(ye,{})})]},u.id))]}),m("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores na equipe"})}),d.map(u=>m("div",{className:"user-list__item",children:[t(T,{className:"user-list__item__bt-add",onClick:()=>h(u,c,d),children:t(Ne,{})}),t(R,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours})]},u.id))]})]})]})]})})};var xt=E(Pt);const $t=()=>{const n=D(),a=j(),[e,i]=p.exports.useState(""),[s,r]=p.exports.useState(""),[l,o]=p.exports.useState([]),[c,f]=p.exports.useState([]),d=h=>{o(O.sortBy(l.filter(w=>w.id!==h.id),"name")),f(O.sortBy([...c,h],"name"))},g=h=>{f(O.sortBy(c.filter(w=>w.id!==h.id),"name")),o(O.sortBy([...l,h],"name"))},P=async()=>{const h=n.teamStore.createTeam({name:e,image:s,users:c});n.teamStore.fetchTeamList(),a(`/teams/${h}`),h&&alert(`A equipe ${e} foi criada.`)};return p.exports.useEffect(()=>{o(n.userStore.userList),window.scrollTo(0,0)},[]),t("div",{className:"screen create-team",children:m($,{maxWidth:"lg",children:[t("header",{className:"screen__header",children:t("h2",{children:"Criar equipe"})}),m("main",{children:[m("div",{className:"create-team__form",children:[m("div",{className:"create-team__form__content",children:[t(x,{id:"team-name",label:"Nome",variant:"filled",value:e,onChange:h=>{i(h.target.value)}}),t(x,{id:"team-image",label:"Imagem",variant:"filled",value:s,onChange:h=>{r(h.target.value)}}),(e==null?void 0:e.length)||(s==null?void 0:s.length)?t("div",{className:"screen__header__preview",children:t(X,{name:e,image:s,avatarSize:80,fontSize:22,disabled:!0})}):null]}),t(T,{variant:"outlined",onClick:P,children:"Criar"})]}),m("div",{className:"create-team__user-lists",children:[m("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Todos os colaboradores"})}),l.map(h=>m("div",{className:"user-list__item",children:[t(R,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours},h.id),t(T,{className:"user-list__item__bt-add",onClick:()=>d(h),children:t(ye,{})})]},h.id))]}),m("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores na equipe"})}),c.map(h=>m("div",{className:"user-list__item",children:[t(T,{className:"user-list__item__bt-add",onClick:()=>g(h),children:t(Ne,{})}),t(R,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours})]},h.id))]})]})]})]})})};var It=E($t);const jt=()=>{var l,o;const n=D(),a=j(),[e,i]=p.exports.useState(""),[s,r]=p.exports.useState([]);return p.exports.useEffect(()=>{if(e.length){r(n.teamStore.teamList.filter(c=>c.name.toLowerCase().includes(e.toLowerCase())));return}r(n.teamStore.teamList)},[e]),p.exports.useEffect(()=>{r(n.teamStore.teamList),window.scrollTo(0,0)},[]),m("div",{className:"screen teams",children:[m($,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[t("h2",{children:"Equipes"}),t("div",{className:"screen__header__right",children:((o=(l=n==null?void 0:n.teamStore)==null?void 0:l.teamList)==null?void 0:o.length)?t(x,{id:"filter-term",label:"Filtro",size:"small",value:e,onChange:c=>{i(c.target.value)}}):null})]}),t("main",{children:(s==null?void 0:s.length)?s.map(c=>t(X,{id:c.id,name:c==null?void 0:c.name,image:c==null?void 0:c.image},c.id)):t("div",{children:"Nenhuma equipe encontrada."})})]}),t(Se,{className:"teams__create-team",color:"primary","aria-label":"Criar equipe",onClick:()=>{a("/teams/create")},children:t(He,{})})]})};var kt=E(jt);const le=n=>{const{project:a,time:e,description:i,disabled:s,showMeta:r,warnings:l}=n,o=j();return m(z,{button:!s,className:"time-entry",style:{borderColor:a.color},children:[m("div",{className:"time-entry__pressable",onClick:()=>a.id?o(`/projects/${a.id}`):null,children:[t("div",{className:"time-entry__top",children:t("div",{className:"time-entry__project-name",children:a.name})}),m("div",{className:"time-entry__bottom",children:[t("div",{className:"time-entry__time",style:{borderColor:a.color},children:e.replace("PT","").replace("H","hr ").replace("M","min")}),"-",t("div",{className:"time-entry__description",children:i})]})]}),r&&(l==null?void 0:l.length)?t("div",{className:"time-entry__meta",children:t(J,{arrow:!0,placement:"left",title:t("ul",{className:"warning-list",children:l.map(c=>t("li",{className:"warning-list__item",children:c}))}),children:t("div",{className:"time-entry__meta__item warning",children:t(ve,{color:l.length===1&&l[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};le.propTypes={project:v.instanceOf(Object),time:v.string,description:v.string,disabled:v.bool,showMeta:v.bool,warnings:v.arrayOf(v.instanceOf(Object))};le.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var Ut=E(le);const Ft=()=>{var o;const n=D(),a=Y(),e=n.userStore.userList.find(({id:c})=>c===a.id),[i,s]=p.exports.useState([]),[r,l]=p.exports.useState(!1);return p.exports.useEffect(()=>{if(r){s(e.timeEntriesByDay.filter(c=>c.timeEntries.find(f=>{var d;return(d=f==null?void 0:f.warnings)==null?void 0:d.length})).map(c=>L(N({},c),{timeEntries:c.timeEntries.filter(f=>{var d;return(d=f==null?void 0:f.warnings)==null?void 0:d.length})})));return}s(e.timeEntriesByDay)},[r]),p.exports.useEffect(()=>{s(e.timeEntriesByDay),window.scrollTo(0,0)},[]),e?t("div",{className:"screen user-detail",children:m($,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[m("div",{className:"screen__header__left",children:[t(Q,{alt:e==null?void 0:e.name,src:e==null?void 0:e.profilePicture,className:"user-detail__avatar"}),t("h2",{children:e==null?void 0:e.name})]}),m("div",{className:"screen__header__right",style:{color:e.hours>=200?"#f44336":"#ffffff"},children:[e.hours.toFixed(2),t(_e,{color:e.hours>=200?"error":""})]})]}),m("main",{children:[(e==null?void 0:e.teams.length)?m("div",{className:"user-detail__teams",children:[t("header",{className:"section-header",children:t("h3",{children:"Equipes do colaborador"})}),e.teams.map(c=>t(X,{id:c.id,name:c==null?void 0:c.name,image:c==null?void 0:c.image},c.id))]}):null,((o=e==null?void 0:e.timeEntries)==null?void 0:o.length)?m("div",{className:"time-entries",children:[m("header",{className:"section-header",children:[t("h3",{children:"Entradas de tempo"}),t("div",{className:"time-entries__filter",children:t(Je,{control:t(Ve,{checked:r,onChange:()=>l(!r),name:"filterWarnings",color:"primary"}),label:"Filtrar warnings"})})]}),(i==null?void 0:i.length)?i.map(c=>m("div",{className:"time-entries__day",children:[t("header",{className:"section-header",children:t("h3",{children:c.date})}),t("div",{className:"description",children:c.timeEntries.map(f=>{var d;return t(Ut,{disabled:!((d=f==null?void 0:f.project)==null?void 0:d.id),project:f.project,time:f.timeInterval.duration,description:f.description,warnings:f.warnings,showMeta:!0},f.id)})})]},c.date)):"Nenhuma entrada de tempo."]}):null,(e==null?void 0:e.timeEntries.length)?null:t("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var Ot=E(Ft);const Rt=()=>{var r,l;const n=D(),[a,e]=p.exports.useState(""),[i,s]=p.exports.useState([]);return p.exports.useEffect(()=>{if(a.length){s(n.userStore.userList.filter(o=>o.name.toLowerCase().includes(a.toLowerCase())));return}s(n.userStore.userList)},[a]),p.exports.useEffect(()=>{s(n.userStore.userList),window.scrollTo(0,0)},[]),t("div",{className:"screen users",children:m($,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[t("h2",{children:"Colaboradores"}),((l=(r=n==null?void 0:n.userStore)==null?void 0:r.userList)==null?void 0:l.length)?t(x,{id:"filter-term",label:"Filtro",size:"small",value:a,onChange:o=>{e(o.target.value)}}):null]}),t("main",{children:(i==null?void 0:i.length)?i.map(o=>t(R,{id:o.id,profilePicture:o==null?void 0:o.profilePicture,name:o==null?void 0:o.name,lastName:o==null?void 0:o.lastName,email:o==null?void 0:o.email,hours:o==null?void 0:o.hours,payment:o==null?void 0:o.payment,warnings:o==null?void 0:o.warnings,showMeta:!0,pdf:!0},o.id)):t("div",{children:"Nenhum colaborador encontrado."})})]})})};var Bt=E(Rt);const ce=n=>{const{id:a,index:e,name:i,color:s,disabled:r=!1}=n,[l,o]=p.exports.useState(!1),c=j();return p.exports.useEffect(()=>{const f=setTimeout(()=>{o(!0)},e*50+100);return()=>{clearTimeout(f)}},[]),t(z,{button:!r,onClick:()=>r?null:c(`/projects/${a}`),className:"project",style:{borderColor:l?s:"transparent"},children:t("div",{className:"project__name",children:i})})};ce.propTypes={id:v.number.isRequired,index:v.number.isRequired,name:v.string,color:v.string,disabled:v.bool};ce.defaultProps={name:"",color:"",disabled:!1};var qt=E(ce);const At=()=>{var r,l;const n=D(),[a,e]=p.exports.useState(""),[i,s]=p.exports.useState([]);return p.exports.useEffect(()=>{if(a.length){s(n.projectStore.projectList.filter(o=>o.name.toLowerCase().includes(a.toLowerCase())));return}s(n.projectStore.projectList)},[a]),p.exports.useEffect(()=>{s(n.projectStore.projectList),window.scrollTo(0,0)},[]),t("div",{className:"screen projects",children:m($,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[t("h2",{children:"Projetos"}),((l=(r=n==null?void 0:n.projectStore)==null?void 0:r.projectList)==null?void 0:l.length)?t(x,{id:"filter-term",label:"Filtro",size:"small",value:a,onChange:o=>{e(o.target.value)}}):null]}),t("main",{children:(i==null?void 0:i.length)?i.map((o,c)=>t(qt,{id:o.id,color:o==null?void 0:o.color,name:o==null?void 0:o.name,index:c},o.id)):t("div",{children:"Nenhum projeto encontrado."})})]})})};var Mt=E(At);const zt=()=>{var i,s;const n=D(),a=Y(),e=n.projectStore.projectList.find(({id:r})=>r===a.id);return p.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e?t("div",{className:"screen project-detail",children:m($,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[t("div",{className:"screen__header__left",children:t("h2",{children:e==null?void 0:e.name})}),t("div",{className:"screen__header__right",children:m("div",{className:"project-detail__estimate",children:[t("div",{children:`Estimativa: ${C(e==null?void 0:e.estimate.estimate)} horas`}),t("div",{children:`Total: ${C(e==null?void 0:e.duration).toFixed(2)} horas`}),C(e==null?void 0:e.estimate.estimate)&&C(e==null?void 0:e.duration)?t("div",{children:`Esfor\xE7o: ${(C(e==null?void 0:e.duration)/C(e==null?void 0:e.estimate.estimate)*100).toFixed(2)}%`}):null]})})]}),m("main",{children:[((i=e==null?void 0:e.timeEntriesByUser)==null?void 0:i.length)?m("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores no projeto"})}),e.timeEntriesByUser.map(r=>t(R,{id:r.id,profilePicture:r==null?void 0:r.profilePicture,name:r==null?void 0:r.name,email:r==null?void 0:r.email,hours:r==null?void 0:r.hours},r.id))]}):null,((s=e==null?void 0:e.timeEntriesByUser)==null?void 0:s.length)?null:t("div",{children:"Nenhuma entrada encontrada para este projeto no per\xEDodo selecionado."})]})]})}):null};var Wt=E(zt);const Ht=()=>{var o,c,f,d,g,P;const n=D(),[a,e]=p.exports.useState(""),[i,s]=p.exports.useState(!1),[r]=B("clockify-api-key"),l=async()=>{s(!0),await W(n.authStore.authenticate(a)),s(!1)};return p.exports.useEffect(()=>{const h=document.querySelector(".login .fetch-data-log");h&&(h.scrollTop=h.scrollHeight)},[n.authStore.fetchDataLog.length]),p.exports.useEffect(()=>{(r==null?void 0:r.length)&&e(r)},[]),t("div",{className:"screen login",children:m($,{maxWidth:"lg",className:"login__container",children:[t("h1",{children:"Clockify Teams"}),t("div",{className:"login__box",children:n.authStore.isConfirmingIdentity?m(V,{children:[t(R,{disabled:!0,name:(c=(o=n==null?void 0:n.authStore)==null?void 0:o.user)==null?void 0:c.name,profilePicture:(d=(f=n==null?void 0:n.authStore)==null?void 0:f.user)==null?void 0:d.profilePicture,email:(P=(g=n==null?void 0:n.authStore)==null?void 0:g.user)==null?void 0:P.email}),t("div",{className:"fetch-data-log",children:n.authStore.fetchDataLog.map(({text:h,color:w})=>t("div",{style:{color:w},children:h},h))})]}):m(V,{children:[n.authStore.autoLogin?null:t(x,{id:"api-key",label:"Clockify API Key",variant:"filled",value:a,onChange:h=>{e(h.target.value)}}),i||n.authStore.autoLogin?t(Le,{}):t(T,{variant:"outlined",onClick:l,children:"Entrar"})]})})]})})};var Jt=E(Ht);const Vt=()=>{var a;const n=D();return t(Ke,{children:((a=n==null?void 0:n.authStore)==null?void 0:a.isAuthenticated)?m(V,{children:[t(Tt,{}),m(ue,{children:[t(I,{path:"/users/:id",element:t(Ot,{})}),t(I,{path:"/projects/:id",element:t(Wt,{})}),t(I,{path:"/projects",element:t(Mt,{})}),t(I,{path:"/teams/edit/:id",element:t(xt,{})}),t(I,{path:"/teams/create",element:t(It,{})}),t(I,{path:"/teams/:id",element:t(Ct,{})}),t(I,{path:"/teams",element:t(kt,{})}),t(I,{path:"/",element:t(Bt,{})})]})]}):t(ue,{children:t(I,{path:"/",element:t(Jt,{})})})})};var Kt=E(Vt);const Qt=Qe({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),Te=({children:n})=>m(Ye,{theme:Qt,children:[t(Ze,{}),n]});Te.propTypes={children:v.node.isRequired};const de=n=>{const{active:a}=n;return a?t("div",{className:"loader",children:t(Le,{})}):null};de.propTypes={active:v.bool};de.defaultProps={active:!1};const H=new Date,Yt=()=>{const n=D(),[a,e]=p.exports.useState(!1),[i,s]=p.exports.useState(new Date(H.getFullYear(),H.getMonth(),1)),[r,l]=p.exports.useState(new Date(H.getFullYear(),H.getMonth()+1,0)),o=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(i,r),e(!0),await W(n.projectStore.fetchProjectList()),await W(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),e(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:m("div",{className:"query-date-selector",children:[t(de,{active:a}),m("div",{className:"query-date-selector__content",children:[t(fe,{views:["day"],label:"Data inicial",value:i,disabled:a,onChange:s,renderInput:c=>t(x,L(N({},c),{helperText:null,size:"small"}))}),t(fe,{views:["day"],label:"Data final",value:r,disabled:a,onChange:l,renderInput:c=>t(x,L(N({},c),{helperText:null,size:"small"}))}),t(T,{variant:"outlined",disabled:a,onClick:o,className:"query-date-selector__bt-search",children:t(Xe,{})})]})]})};var Zt=E(Yt);const Xt=()=>{const[n,a]=p.exports.useState(null),[e]=B("clockify-api-key"),i=async()=>{const s=at({RootStore:yt,env:pt});a(s),(e==null?void 0:e.length)&&(s.authStore.setAutoLogin(!0),await W(s.authStore.authenticate(e)),s.authStore.setAutoLogin(!1))};return p.exports.useEffect(()=>{i()},[]),n?t("div",{className:"app",children:t(Nt,{value:n,children:t(Ge,{dateAdapter:et,locale:tt,children:m(Te,{children:[t(Kt,{}),t(Zt,{})]})})})}):null};rt.register(st,it,nt,ot,lt,ct);dt.render(t(ht.StrictMode,{children:t(Xt,{})}),document.getElementById("root"));
