var De=Object.defineProperty,Ce=Object.defineProperties;var Pe=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable;var ee=(o,a,e)=>a in o?De(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,y=(o,a)=>{for(var e in a||(a={}))xe.call(a,e)&&ee(o,e,a[e]);if(me)for(var e of me(a))$e.call(a,e)&&ee(o,e,a[e]);return o},L=(o,a)=>Ce(o,Pe(a));var _=(o,a,e)=>(ee(o,typeof a!="symbol"?a+"":a,e),e);import{a as ge,m as q,o as S,c as te,b,f as M,g as A,d as N,r as p,u as j,j as t,B as T,e as h,h as Ie,S as je,i as E,A as Ue,C as $,P as v,L as z,k as Q,T as J,l as _e,n as ke,I as Fe,p as Oe,q as ve,s as Re,t as W,v as Y,F as V,w as Be,x as Se,y as qe,D as Ae,z as Me,E as ze,G as he,H as We,J as x,K as Ne,M as ye,_ as O,N as He,O as Je,Q as Ve,R as Le,U as Ke,V as ue,W as I,X as Qe,Y as Ye,Z as Ze,$ as fe,a0 as Xe,a1 as Ge,a2 as et,a3 as tt,a4 as at,a5 as rt,a6 as st,a7 as it,a8 as nt,a9 as ot,aa as lt,ab as ct,ac as dt,ad as mt}from"./vendor.42605bad.js";const ht=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}};ht();const ut="https://api.clockify.me/api/v1",ft="https://reports.api.clockify.me/",pt=ge.create({baseURL:ut,timeout:1e4}),be=ge.create({baseURL:ft,timeout:1e4}),B=(o="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${o}`))||{},s=>{localStorage.setItem(`clockify-teams@${o}`,JSON.stringify(s))}];class Z{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"defaultWorkspace",null);_(this,"profilePicture",null);_(this,"timeEntries",[]);_(this,"timeEntriesByDay",[]);_(this,"teams",[]);_(this,"hours",null);_(this,"warnings",{});if(q(this,{id:S,name:S,email:S,defaultWorkspace:S,profilePicture:S,timeEntries:S,timeEntriesByDay:S,teams:S,hours:S,warnings:S}),a==null||a.id==null)throw new Error("Invalid user constructor");const{id:e,name:s,email:i,defaultWorkspace:r,profilePicture:c,timeEntries:n,timeEntriesByDay:l,teams:f,hours:d,warnings:g}=a;this.id=e,this.name=s||"",this.email=i||"",this.defaultWorkspace=r||"",this.profilePicture=c||"",this.timeEntries=n||[],this.timeEntriesByDay=l||[],this.teams=f||[],this.hours=d||0,this.warnings=g||{}}static fromApi({id:a,name:e,email:s,defaultWorkspace:i,profilePicture:r,timeEntries:c,timeEntriesByDay:n,teams:l,hours:f,warnings:d}={}){return new Z({id:a,name:e,email:s,defaultWorkspace:i,profilePicture:r,timeEntries:c,timeEntriesByDay:n,teams:l,hours:f,warnings:d})}}class gt{constructor(){_(this,"user",null);_(this,"authStatus","unauthenticated");_(this,"autoLogin",!1);_(this,"fetchDataLog",[]);q(this,{user:S,authStatus:S,autoLogin:S,fetchDataLog:S,isAuthenticated:te,isConfirmingIdentity:te,isUnauthenticated:te,setUser:b.bound,confirmIdentity:b.bound,unauthenticate:b.bound,setAutoLogin:b.bound,feedFetchDataLog:b.bound,setStatusConfirmingIdentity:b.bound,clearDataLog:b.bound,authenticate:M})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(a){this.user=Z.fromApi(a)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(a){this.autoLogin=a}feedFetchDataLog(a,e){let s="";switch(e){case"success":{s="#27ae60";break}case"error":{s="#c0392b";break}default:{s="#ffffff";break}}typeof a=="string"&&a.length&&this.fetchDataLog.push({text:a,color:s})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,A().defaults.headers.common["X-Api-Key"]=null}*authenticate(a){try{const[,e]=B("clockify-api-key");A().defaults.headers.common["X-Api-Key"]=a,be.defaults.headers.common["X-Api-Key"]=a,e(a);const s=yield A().get("/user");return(s==null?void 0:s.status)!==200?(alert("Invalid Clockify API Key"),!1):(s==null?void 0:s.data)?(this.setUser(s.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(e){return console.log(e),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const pe=o=>{try{const a=new Date(o).toISOString().split("T");if(a==null?void 0:a.length){const e=a[0].split("-");return`${e[2]}-${e[1]}-${e[0]}`}return null}catch(a){return console.log(a),null}},ae=o=>{try{const a=o==null?void 0:o.split("T");if(a==null?void 0:a.length){const e=a[0].split("-");return`${e[2]}/${e[1]}/${e[0]}`}return null}catch(a){return console.log(a),null}},C=o=>{try{const a=o==null?void 0:o.split("H");let e=0,s=0;return(a==null?void 0:a.length)?((a==null?void 0:a.length)===2?(e=Number(a[0].split("PT")[1])||0,s=Number(a[1].split("M")[0])||0):a[0]!=="PT0S"&&(s=Number(a[0].replace("PT","").replace("M",""))),Number(e+s/60)):null}catch(a){return console.log(a),null}},_t=o=>o.replace(/[^\w\s]/gi,""),K={NO_PROJECT:"Entrada sem projeto",NO_DESCRIPTION:"Entrada sem descri\xE7\xE3o",TIME_LIMIT:"Entrada maior que 6 horas"};class vt{constructor(){_(this,"userList",[]);_(this,"queryStartDate",null);_(this,"queryEndDate",null);q(this,{userList:S,queryStartDate:S,queryEndDate:S,setUserList:b.bound,formatUserData:b.bound,getUsersTeams:b.bound,fetchUserList:M,fetchUserTimeEntries:M,fetchUserSummaryReport:M})}setUserList(a=[]){this.userList=a.map(e=>Z.fromApi(e))}setQueryDate(a,e){this.queryStartDate=a,this.queryEndDate=e}*fetchUserTimeEntries(a={}){const{id:e,name:s,pageSize:i=5e3}=a,{NO_DESCRIPTION:r,NO_PROJECT:c,TIME_LIMIT:n}=K;try{N().authStore.feedFetchDataLog(`fetching user ${s} time entries...`);const{defaultWorkspace:l}=N().authStore.user,f=yield A().get(`/workspaces/${l}/user/${e}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":i}});if(f.status!==200)return N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1;if(f==null?void 0:f.data){let d=0;const g={};Object.keys(K).forEach(m=>{g[m]=0});const P=f.data.map(m=>{var U,k,F;const w=(U=m==null?void 0:m.timeInterval)==null?void 0:U.duration,u=L(y({},m),{warnings:[]});if(((k=m==null?void 0:m.projectId)==null?void 0:k.length)||(u.warnings.push(c),g.NO_PROJECT++),((F=m==null?void 0:m.description)==null?void 0:F.length)||(u.warnings.push(r),g.NO_DESCRIPTION++),w==null?void 0:w.length){const G=C(w);G&&(d+=G,G>=6&&(u.warnings.push(n),g.TIME_LIMIT++))}return u});return N().authStore.feedFetchDataLog(`fetch user ${s} time entries success`,"success"),{timeEntries:P,hours:d,warnings:g}}return N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}catch(l){return console.log(l),N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}}formatUserData(a){var e,s;try{let i=[];for(const r of a.timeEntries){const c=(e=r==null?void 0:r.timeInterval)==null?void 0:e.duration,n=(s=r==null?void 0:r.timeInterval)==null?void 0:s.start,l=N().projectStore.projectList.find(({id:d})=>d===(r==null?void 0:r.projectId)),f=i.find(d=>d.date===ae(n));(c==null?void 0:c.length)&&(n==null?void 0:n.length)&&(f?i=i.map(d=>d.date===ae(n)?{date:d.date,timeEntries:[...d.timeEntries,L(y({},r),{project:l||{name:"Sem projeto",color:"#ffffff"}})],hours:d.hours+C(c)}:d):i.push({date:ae(n),timeEntries:[L(y({},r),{project:l||{name:"Sem projeto",color:"#ffffff"}})],hours:C(c)}))}return L(y({},a),{timeEntriesByDay:i})}catch(i){return console.log(i),!1}}getUsersTeams(){const a=[];for(const e of this.userList){const s=[];for(const i of N().teamStore.teamList)for(const r of i.users)r.id===e.id&&s.push(i);a.push(L(y({},e),{teams:s}))}this.setUserList(a)}*fetchUserList(a={}){var e;try{N().authStore.feedFetchDataLog("fetching user list...");const{pageSize:s=5e3}=a,{defaultWorkspace:i}=N().authStore.user,r=yield A().get(`/workspaces/${i}/users`,{params:{"page-size":s,status:"ACTIVE"}});if(r.status!==200)return N().authStore.feedFetchDataLog("fetch user list error","error"),!1;if((e=r==null?void 0:r.data)==null?void 0:e.length){N().authStore.feedFetchDataLog("fetch user list success","success");const c=[];for(const n of r.data){const l=yield this.fetchUserTimeEntries(n);if(l){const f=this.formatUserData(y(y({},n),l));c.push(f)}}if(c.length)return this.setUserList(c),N().authStore.feedFetchDataLog("fetch all users time entries success","success"),!0}return N().authStore.feedFetchDataLog("fetch user list error","error"),!1}catch(s){return console.log(s),N().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*fetchUserSummaryReport(a){try{const{defaultWorkspace:e}=N().authStore.user,s=yield be.post(`/workspaces/${e}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[a.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),r=`${a.name.toLowerCase().split(" ").map(n=>_t(n)).join("-")}__from_${pe(this.queryStartDate)}_to_${pe(this.queryEndDate)}`,c=new Blob([s.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(c,r);else{const n=document.createElement("a"),l=document.querySelector("body");n.href=window.URL.createObjectURL(c),n.download=r,n.style.display="none",l.appendChild(n),n.click(),l.removeChild(n),window.URL.revokeObjectURL(n.href)}return!1}catch(e){return console.log(e),N().authStore.feedFetchDataLog("fetch user list error","error"),!1}}}class re{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"workspaceId",null);_(this,"color",null);_(this,"duration",null);_(this,"estimate",null);_(this,"users",[]);_(this,"timeEntriesByUser",[]);if(q(this,{id:S,name:S,email:S,workspaceId:S,color:S,duration:S,estimate:S,users:S,timeEntriesByUser:S}),a==null||a.id==null)throw new Error("Invalid Project constructor");const{id:e,name:s,email:i,workspaceId:r,color:c,duration:n,estimate:l,users:f,timeEntriesByUser:d}=a;this.id=e,this.name=s||"",this.email=i||"",this.workspaceId=r||"",this.color=c||"",this.duration=n||"",this.estimate=l||"",this.users=f||[],this.timeEntriesByUser=d||[]}static fromApi({id:a,name:e,email:s,workspaceId:i,color:r,duration:c,estimate:n,users:l,timeEntriesByUser:f}={}){return new re({id:a,name:e,email:s,workspaceId:i,color:r,duration:c,estimate:n,users:l,timeEntriesByUser:f})}}class St{constructor(){_(this,"projectList",[]);q(this,{projectList:S,setProjectList:b.bound,formatProjectData:b.bound,formatProjectList:b.bound,fetchProjectList:M})}setProjectList(a=[]){this.projectList=a.map(e=>re.fromApi(e))}formatProjectData(a={}){var e;try{const{id:s}=a;let i=[];for(const r of N().userStore.userList){const c=r.timeEntries.filter(n=>n.projectId===s);for(const n of c){const l=i.find(g=>g.id===n.userId);let f=0;const d=(e=n==null?void 0:n.timeInterval)==null?void 0:e.duration;(d==null?void 0:d.length)&&(f+=C(d)),l?i=i.map(g=>g.id===n.userId?L(y({},g),{timeEntries:[...g.timeEntries,n],hours:g.hours+f}):g):i.push(L(y({},r),{timeEntries:[n],hours:f}))}}return L(y({},a),{timeEntriesByUser:i})}catch(s){return console.log(s),!1}}formatProjectList(){const a=[];for(const e of this.projectList){const s=this.formatProjectData(e);a.push(s)}this.setProjectList(a)}*fetchProjectList(a={}){var e;try{N().authStore.feedFetchDataLog("fetching project list...");const{pageSize:s=5e3}=a,{defaultWorkspace:i}=N().authStore.user,r=yield A().get(`/workspaces/${i}/projects`,{params:{archived:!1,"page-size":s}});return r.status!==200?(N().authStore.feedFetchDataLog("fetch project list error","error"),!1):((e=r==null?void 0:r.data)==null?void 0:e.length)?(this.setProjectList(r.data),N().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(s){return console.log(s),N().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class se{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"image",null);_(this,"users",[]);_(this,"timeEntriesByProject",[]);if(q(this,{id:S,name:S,image:S,users:S,timeEntriesByProject:S}),a==null||a.id==null)throw new Error("Invalid Team constructor");const{id:e,name:s,image:i,users:r,timeEntriesByProject:c}=a;this.id=e,this.name=s||"",this.image=i||"",this.users=r||[],this.timeEntriesByProject=c||[]}static fromApi({id:a,name:e,image:s,users:i,timeEntriesByProject:r}={}){return new se({id:a,name:e,image:s,users:i,timeEntriesByProject:r})}}class Nt{constructor(){_(this,"teamList",[]);q(this,{teamList:S,setTeamList:b.bound,createTeam:b.bound,editTeam:b.bound,fetchTeamList:b.bound,formatTeamData:b.bound})}createTeam(a={}){try{const{users:e}=a,[s,i]=B("team-list"),r=s||[];let c=1;return r.length?(c=r.length+1,i([...r,L(y({},a),{id:c,users:e.map(n=>n.id)})])):i([L(y({},a),{id:1,users:e.map(n=>n.id)})]),c}catch(e){return console.log(e),!1}finally{this.fetchTeamList()}}editTeam(a,e={}){try{const[s,i]=B("team-list"),{users:r}=e;return i(s.map(c=>c.id===a?L(y(y({},c),c),{users:r.map(n=>n.id)}):c)),a}catch(s){return console.log(s),!1}finally{this.fetchTeamList()}}removeTeam(a={}){try{const[e,s]=B("team-list"),i=e.filter(r=>r.id!==a.id);s(i),this.setTeamList(i.map(r=>L(y({},r),{users:N().userStore.userList.filter(c=>r.users.includes(c.id))})))}catch(e){console.log(e)}}setTeamList(a=[]){this.teamList=a.map(e=>se.fromApi(e))}fetchTeamList(){try{N().authStore.feedFetchDataLog("fetching team list...");const[a]=B("team-list");if(a.length){const e=[];for(const s of a){const i=this.formatTeamData(s);e.push(L(y({},i),{users:N().userStore.userList.filter(r=>s.users.includes(r.id))}))}this.setTeamList(e),N().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(a){return console.log(a),N().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(a={}){var e;try{const s=[];let i=[];for(const c of a.users){const n=N().userStore.userList.find(l=>l.id===c);if(n){const{timeEntries:l,hours:f}=n;for(const g of l){const P=i.find(u=>u.id===g.projectId);let m=0;const w=(e=g==null?void 0:g.timeInterval)==null?void 0:e.duration;(w==null?void 0:w.length)&&(m+=C(w)),P?i=i.map(u=>u.id===g.projectId?L(y({},u),{id:g.projectId,timeEntries:[...u.timeEntries,g],hours:u.hours+m}):u):i.push({id:g.projectId,timeEntries:[g],hours:m})}const d=N().userStore.userList.find(g=>g.id===c.id);s.push(L(y({},d),{timeEntries:l,hours:f}))}}let r=0;for(const c of i){if(c.id){const n=N().projectStore.projectList.find(l=>l.id===c.id);n&&(i[r]=L(y({},i[r]),{name:n.name,color:n.color}))}else i[r]=L(y({},i[r]),{name:"Sem projeto",color:"#ffffff"});r++}return L(y({},a),{users:s,timeEntriesByProject:i})}catch(s){return console.log(s),!1}}}class yt{constructor(){_(this,"authStore",null);_(this,"userStore",null);_(this,"projectStore",null);_(this,"teamStore",null)}init(){this.authStore=new gt,this.userStore=new vt,this.projectStore=new St,this.teamStore=new Nt}}const we=p.exports.createContext({}),Lt=we.Provider,D=()=>p.exports.useContext(we);const bt=[{route:"/",label:"Colaboradores"},{route:"/teams",label:"Equipes"},{route:"/projects",label:"Projetos"}],Ee=({vertical:o,drawer:a})=>{const e=j(),s=i=>{e(i),a&&a.close()};return t("nav",{className:`menu ${o?"vertical":""}`,children:t("ul",{className:"menu__list",children:bt.map(i=>t("li",{className:"menu__list__item",children:t(T,{className:"menu__list__item__button",fullWidth:o,color:"primary",onClick:()=>s(i.route),children:i.label})},i.route))})})};const wt=()=>{const[o,a]=p.exports.useState(!1),e=()=>{a(!0)},s=()=>{a(!1)};return h("div",{className:"drawer",children:[t(T,{onClick:e,children:t(Ie,{color:"primary"})}),t(je,{anchor:"right",open:o,onClose:s,onOpen:e,children:t("div",{className:"drawer__content",children:t(Ee,{vertical:!0,drawer:{close:s}})})})]})};const Et=()=>t("div",{className:"logo",children:"Clockify Teams"});const Tt=()=>t(Ue,{className:"header",children:t($,{maxWidth:"lg",children:h("div",{className:"header__content",children:[t(Et,{}),t("div",{className:"header__menu",children:t(Ee,{})}),t("div",{className:"header__drawer",children:t(wt,{})})]})})});var Dt=E(Tt);const ie=o=>{var f;const a=D(),{hours:e,warnings:s,user:i,pdf:r}=o,[c,n]=p.exports.useState(!1),l=async()=>{n(!0),await W(a.userStore.fetchUserSummaryReport(i)),n(!1)};return h("div",{className:"user__meta",children:[t(J,{arrow:!0,placement:"left",title:"Horas trabalhadas no per\xEDodo selecionado",children:h("div",{className:"user__meta__item",style:{color:e>=200?"#f44336":"#ffffff"},children:[e.toFixed(2),t(_e,{color:e>=200?"error":""})]})}),r?t(J,{arrow:!0,placement:"left",title:"Visualizar relat\xF3rio",children:c?t(ke,{style:{width:20,height:20,margin:14}}):t(Fe,{onClick:l,children:t(Oe,{})})}):null,((f=Object.entries(s).filter(([,d])=>d>0))==null?void 0:f.length)?t(J,{arrow:!0,placement:"left",title:t("ul",{className:"warning-list",children:Object.entries(s).filter(([,d])=>d>0).map(([d,g])=>t("li",{className:"warning-list__item",children:`${g}x ${K[d]}`},K[d]))}),children:t("div",{className:"user__meta__item warning",children:t(ve,{color:s.NO_PROJECT>0||s.NO_DESCRIPTION>0?"error":"inherit"})})}):t("div",{className:"user__meta__item",children:t(Re,{color:"secondary"})})]})};ie.propTypes={hours:v.number.isRequired,user:v.instanceOf(Object).isRequired,pdf:v.bool,warnings:v.instanceOf(Object).isRequired};ie.defaultProps={pdf:!1};const ne=o=>{const{id:a,name:e,lastName:s,profilePicture:i,email:r,showMeta:c,pdf:n,disabled:l,hours:f,warnings:d}=o,g=j();return h(z,{className:"user",children:[h("div",{className:"user__pressable",onClick:()=>l?null:g(`/users/${a}`),style:{pointerEvents:l?"none":"initial"},children:[t(Q,{alt:e,src:i,className:"user__avatar"}),h("div",{className:"user__profile",children:[t("div",{className:"user__name",children:e}),t("div",{className:"user__email",children:r})]})]}),c?t(ie,{pdf:n,hours:f,warnings:d,user:{id:a,name:e,lastName:s,email:r}}):null]})};ne.propTypes={id:v.oneOfType([v.number,v.string]),name:v.string,lastName:v.string,profilePicture:v.string,email:v.string,showMeta:v.bool,pdf:v.bool,disabled:v.bool,hours:v.number,warnings:v.instanceOf(Object)};ne.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null};var R=E(ne);const Ct=()=>{var f;const o=D(),a=Y(),e=j(),[s,i]=p.exports.useState(!1),r=o.teamStore.teamList.find(({id:d})=>d===Number(a.id)),c=()=>{i(!0)},n=()=>{i(!1)},l=()=>{o.teamStore.removeTeam(r),n(),e("/teams")};return p.exports.useEffect(()=>{window.scrollTo(0,0)},[]),r?h(V,{children:[h("div",{className:"screen team-detail",children:[h($,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[h("div",{className:"screen__header__left",children:[t(Q,{alt:r==null?void 0:r.name,src:r==null?void 0:r.image,className:"team-detail__avatar"}),t("h2",{children:r==null?void 0:r.name})]}),t("div",{className:"screen__header__right",children:t(T,{onClick:c,children:t(Be,{})})})]}),t("main",{children:h("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores na equipe"})}),((f=r==null?void 0:r.users)==null?void 0:f.length)?r.users.map(d=>t(R,{id:d.id,profilePicture:d==null?void 0:d.profilePicture,name:d==null?void 0:d.name,email:d==null?void 0:d.email,hours:d==null?void 0:d.hours,warnings:d==null?void 0:d.warnings,showMeta:!0},d.id)):null]})})]}),t(Se,{className:"team-detail__edit-team",color:"primary","aria-label":"Editar equipe",onClick:()=>{e(`/teams/edit/${r.id}`)},children:t(qe,{})})]}),h(Ae,{open:s,onClose:n,"aria-labelledby":"draggable-dialog-title",children:[t(Me,{style:{cursor:"move"},id:"draggable-dialog-title",children:`Excluir equipe ${r.name}`}),h(ze,{children:[t(he,{children:`Voc\xEA tem certeza que deseja excluir a equipe ${r.name}?`}),t(he,{children:"Esta a\xE7\xE3o \xE9 irrevers\xEDvel."})]}),h(We,{children:[t(T,{autoFocus:!0,onClick:n,color:"primary",children:"Cancelar"}),t(T,{onClick:l,color:"primary",children:"Confirmar"})]})]})]}):null};var Pt=E(Ct);const oe=o=>{const{id:a,name:e,image:s,avatarSize:i,fontSize:r,disabled:c,card:n}=o,l=j();return n?h(z,{className:"team card",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[s.length?t("img",{className:"team__image",src:s,alt:e}):null,t("div",{className:"team__data",children:t("div",{className:"team__name",style:{fontSize:r},children:e})})]}):h(z,{className:"team",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[t(Q,{alt:e,src:s,className:"team__avatar",style:{width:i,height:i}}),t("div",{className:"team__data",children:t("div",{className:"team__name",style:{fontSize:r},children:e})})]})};oe.propTypes={id:v.number.isRequired,name:v.string,image:v.string,avatarSize:v.number,fontSize:v.number,disabled:v.bool,card:v.bool};oe.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var X=E(oe);const xt=()=>{const o=D(),a=Y(),e=j(),s=o.teamStore.teamList.find(u=>u.id===Number(a.id)),[i,r]=p.exports.useState(""),[c,n]=p.exports.useState(""),[l,f]=p.exports.useState([]),[d,g]=p.exports.useState([]),P=(u,U,k)=>{f(O.sortBy(U.filter(F=>F.id!==u.id),"name")),g(O.sortBy([...k,u],"name"))},m=(u,U,k)=>{g(O.sortBy(k.filter(F=>F.id!==u.id),"name")),f(O.sortBy([...U,u],"name"))},w=async()=>{const u=await o.teamStore.editTeam(s.id,{name:i,image:c,users:d});e(`/teams/${u}`),u&&alert("Suas altera\xE7\xF5es foram salvas.")};return p.exports.useEffect(()=>{r(s.name),n(s.image),g(s.users);const u=[...o.userStore.userList];s.users.forEach(U=>{u.forEach((k,F)=>{k.id===U.id&&u.splice(F,1)})}),f(u)},[s]),p.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t("div",{className:"screen create-team",children:h($,{maxWidth:"lg",children:[t("header",{className:"screen__header",children:t("h2",{children:`Editar equipe ${s.name}`})}),h("main",{children:[h("div",{className:"create-team__form",children:[h("div",{className:"create-team__form__content",children:[t(x,{id:"team-name",label:"Nome",variant:"filled",value:i,onChange:u=>{r(u.target.value)}}),t(x,{id:"team-image",label:"Imagem",variant:"filled",value:c,onChange:u=>{n(u.target.value)}}),(i==null?void 0:i.length)||(c==null?void 0:c.length)?t("div",{className:"screen__header__preview",children:t(X,{name:i,image:c,avatarSize:80,fontSize:22,disabled:!0})}):null]}),t(T,{variant:"outlined",onClick:w,children:"Salvar"})]}),h("div",{className:"create-team__user-lists",children:[h("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Todos os colaboradores"})}),l.map(u=>h("div",{className:"user-list__item",children:[t(R,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours},u.id),t(T,{className:"user-list__item__bt-add",onClick:()=>P(u,l,d),children:t(Ne,{})})]},u.id))]}),h("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores na equipe"})}),d.map(u=>h("div",{className:"user-list__item",children:[t(T,{className:"user-list__item__bt-add",onClick:()=>m(u,l,d),children:t(ye,{})}),t(R,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours})]},u.id))]})]})]})]})})};var $t=E(xt);const It=()=>{const o=D(),a=j(),[e,s]=p.exports.useState(""),[i,r]=p.exports.useState(""),[c,n]=p.exports.useState([]),[l,f]=p.exports.useState([]),d=m=>{n(O.sortBy(c.filter(w=>w.id!==m.id),"name")),f(O.sortBy([...l,m],"name"))},g=m=>{f(O.sortBy(l.filter(w=>w.id!==m.id),"name")),n(O.sortBy([...c,m],"name"))},P=async()=>{const m=o.teamStore.createTeam({name:e,image:i,users:l});o.teamStore.fetchTeamList(),a(`/teams/${m}`),m&&alert(`A equipe ${e} foi criada.`)};return p.exports.useEffect(()=>{n(o.userStore.userList),window.scrollTo(0,0)},[]),t("div",{className:"screen create-team",children:h($,{maxWidth:"lg",children:[t("header",{className:"screen__header",children:t("h2",{children:"Criar equipe"})}),h("main",{children:[h("div",{className:"create-team__form",children:[h("div",{className:"create-team__form__content",children:[t(x,{id:"team-name",label:"Nome",variant:"filled",value:e,onChange:m=>{s(m.target.value)}}),t(x,{id:"team-image",label:"Imagem",variant:"filled",value:i,onChange:m=>{r(m.target.value)}}),(e==null?void 0:e.length)||(i==null?void 0:i.length)?t("div",{className:"screen__header__preview",children:t(X,{name:e,image:i,avatarSize:80,fontSize:22,disabled:!0})}):null]}),t(T,{variant:"outlined",onClick:P,children:"Criar"})]}),h("div",{className:"create-team__user-lists",children:[h("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Todos os colaboradores"})}),c.map(m=>h("div",{className:"user-list__item",children:[t(R,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours},m.id),t(T,{className:"user-list__item__bt-add",onClick:()=>d(m),children:t(Ne,{})})]},m.id))]}),h("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores na equipe"})}),l.map(m=>h("div",{className:"user-list__item",children:[t(T,{className:"user-list__item__bt-add",onClick:()=>g(m),children:t(ye,{})}),t(R,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours})]},m.id))]})]})]})]})})};var jt=E(It);const Ut=()=>{var c,n;const o=D(),a=j(),[e,s]=p.exports.useState(""),[i,r]=p.exports.useState([]);return p.exports.useEffect(()=>{if(e.length){r(o.teamStore.teamList.filter(l=>l.name.toLowerCase().includes(e.toLowerCase())));return}r(o.teamStore.teamList)},[e]),p.exports.useEffect(()=>{r(o.teamStore.teamList),window.scrollTo(0,0)},[]),h("div",{className:"screen teams",children:[h($,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[t("h2",{children:"Equipes"}),t("div",{className:"screen__header__right",children:((n=(c=o==null?void 0:o.teamStore)==null?void 0:c.teamList)==null?void 0:n.length)?t(x,{id:"filter-term",label:"Filtro",size:"small",value:e,onChange:l=>{s(l.target.value)}}):null})]}),t("main",{children:(i==null?void 0:i.length)?i.map(l=>t(X,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id)):t("div",{children:"Nenhuma equipe encontrada."})})]}),t(Se,{className:"teams__create-team",color:"primary","aria-label":"Criar equipe",onClick:()=>{a("/teams/create")},children:t(He,{})})]})};var kt=E(Ut);const le=o=>{const{project:a,time:e,description:s,disabled:i,showMeta:r,warnings:c}=o,n=j();return h(z,{button:!i,className:"time-entry",style:{borderColor:a.color},children:[h("div",{className:"time-entry__pressable",onClick:()=>a.id?n(`/projects/${a.id}`):null,children:[t("div",{className:"time-entry__top",children:t("div",{className:"time-entry__project-name",children:a.name})}),h("div",{className:"time-entry__bottom",children:[t("div",{className:"time-entry__time",style:{borderColor:a.color},children:e.replace("PT","").replace("H","hr ").replace("M","min")}),"-",t("div",{className:"time-entry__description",children:s})]})]}),r&&(c==null?void 0:c.length)?t("div",{className:"time-entry__meta",children:t(J,{arrow:!0,placement:"left",title:t("ul",{className:"warning-list",children:c.map(l=>t("li",{className:"warning-list__item",children:l}))}),children:t("div",{className:"time-entry__meta__item warning",children:t(ve,{color:c.length===1&&c[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};le.propTypes={project:v.instanceOf(Object),time:v.string,description:v.string,disabled:v.bool,showMeta:v.bool,warnings:v.arrayOf(v.instanceOf(Object))};le.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var Ft=E(le);const Ot=()=>{var n;const o=D(),a=Y(),e=o.userStore.userList.find(({id:l})=>l===a.id),[s,i]=p.exports.useState([]),[r,c]=p.exports.useState(!1);return p.exports.useEffect(()=>{if(r){i(e.timeEntriesByDay.filter(l=>l.timeEntries.find(f=>{var d;return(d=f==null?void 0:f.warnings)==null?void 0:d.length})).map(l=>L(y({},l),{timeEntries:l.timeEntries.filter(f=>{var d;return(d=f==null?void 0:f.warnings)==null?void 0:d.length})})));return}i(e.timeEntriesByDay)},[r]),p.exports.useEffect(()=>{i(e.timeEntriesByDay),window.scrollTo(0,0)},[]),e?t("div",{className:"screen user-detail",children:h($,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[h("div",{className:"screen__header__left",children:[t(Q,{alt:e==null?void 0:e.name,src:e==null?void 0:e.profilePicture,className:"user-detail__avatar"}),t("h2",{children:e==null?void 0:e.name})]}),h("div",{className:"screen__header__right",style:{color:e.hours>=200?"#f44336":"#ffffff"},children:[e.hours.toFixed(2),t(_e,{color:e.hours>=200?"error":""})]})]}),h("main",{children:[(e==null?void 0:e.teams.length)?h("div",{className:"user-detail__teams",children:[t("header",{className:"section-header",children:t("h3",{children:"Equipes do colaborador"})}),e.teams.map(l=>t(X,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id))]}):null,((n=e==null?void 0:e.timeEntries)==null?void 0:n.length)?h("div",{className:"time-entries",children:[h("header",{className:"section-header",children:[t("h3",{children:"Entradas de tempo"}),t("div",{className:"time-entries__filter",children:t(Je,{control:t(Ve,{checked:r,onChange:()=>c(!r),name:"filterWarnings",color:"primary"}),label:"Filtrar warnings"})})]}),(s==null?void 0:s.length)?s.map(l=>h("div",{className:"time-entries__day",children:[t("header",{className:"section-header",children:t("h3",{children:l.date})}),t("div",{className:"description",children:l.timeEntries.map(f=>{var d;return t(Ft,{disabled:!((d=f==null?void 0:f.project)==null?void 0:d.id),project:f.project,time:f.timeInterval.duration,description:f.description,warnings:f.warnings,showMeta:!0},f.id)})})]},l.date)):"Nenhuma entrada de tempo."]}):null,(e==null?void 0:e.timeEntries.length)?null:t("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var Rt=E(Ot);const Bt=()=>{var r,c;const o=D(),[a,e]=p.exports.useState(""),[s,i]=p.exports.useState([]);return p.exports.useEffect(()=>{if(a.length){i(o.userStore.userList.filter(n=>n.name.toLowerCase().includes(a.toLowerCase())));return}i(o.userStore.userList)},[a]),p.exports.useEffect(()=>{i(o.userStore.userList),window.scrollTo(0,0)},[]),t("div",{className:"screen users",children:h($,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[t("h2",{children:"Colaboradores"}),((c=(r=o==null?void 0:o.userStore)==null?void 0:r.userList)==null?void 0:c.length)?t(x,{id:"filter-term",label:"Filtro",size:"small",value:a,onChange:n=>{e(n.target.value)}}):null]}),t("main",{children:(s==null?void 0:s.length)?s.map(n=>t(R,{id:n.id,profilePicture:n==null?void 0:n.profilePicture,name:n==null?void 0:n.name,lastName:n==null?void 0:n.lastName,email:n==null?void 0:n.email,hours:n==null?void 0:n.hours,payment:n==null?void 0:n.payment,warnings:n==null?void 0:n.warnings,showMeta:!0,pdf:!0},n.id)):t("div",{children:"Nenhum colaborador encontrado."})})]})})};var qt=E(Bt);const ce=o=>{const{id:a,index:e,name:s,color:i,disabled:r=!1}=o,[c,n]=p.exports.useState(!1),l=j();return p.exports.useEffect(()=>{const f=setTimeout(()=>{n(!0)},e*50+100);return()=>{clearTimeout(f)}},[]),t(z,{button:!r,onClick:()=>r?null:l(`/projects/${a}`),className:"project",style:{borderColor:c?i:"transparent"},children:t("div",{className:"project__name",children:s})})};ce.propTypes={id:v.number.isRequired,index:v.number.isRequired,name:v.string,color:v.string,disabled:v.bool};ce.defaultProps={name:"",color:"",disabled:!1};var At=E(ce);const Mt=()=>{var r,c;const o=D(),[a,e]=p.exports.useState(""),[s,i]=p.exports.useState([]);return p.exports.useEffect(()=>{if(a.length){i(o.projectStore.projectList.filter(n=>n.name.toLowerCase().includes(a.toLowerCase())));return}i(o.projectStore.projectList)},[a]),p.exports.useEffect(()=>{i(o.projectStore.projectList),window.scrollTo(0,0)},[]),t("div",{className:"screen projects",children:h($,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[t("h2",{children:"Projetos"}),((c=(r=o==null?void 0:o.projectStore)==null?void 0:r.projectList)==null?void 0:c.length)?t(x,{id:"filter-term",label:"Filtro",size:"small",value:a,onChange:n=>{e(n.target.value)}}):null]}),t("main",{children:(s==null?void 0:s.length)?s.map((n,l)=>t(At,{id:n.id,color:n==null?void 0:n.color,name:n==null?void 0:n.name,index:l},n.id)):t("div",{children:"Nenhum projeto encontrado."})})]})})};var zt=E(Mt);const Wt=()=>{var s,i;const o=D(),a=Y(),e=o.projectStore.projectList.find(({id:r})=>r===a.id);return p.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e?t("div",{className:"screen project-detail",children:h($,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[t("div",{className:"screen__header__left",children:t("h2",{children:e==null?void 0:e.name})}),t("div",{className:"screen__header__right",children:h("div",{className:"project-detail__estimate",children:[t("div",{children:`Estimativa: ${C(e==null?void 0:e.estimate.estimate)} horas`}),t("div",{children:`Total: ${C(e==null?void 0:e.duration).toFixed(2)} horas`}),C(e==null?void 0:e.estimate.estimate)&&C(e==null?void 0:e.duration)?t("div",{children:`Esfor\xE7o: ${(C(e==null?void 0:e.duration)/C(e==null?void 0:e.estimate.estimate)*100).toFixed(2)}%`}):null]})})]}),h("main",{children:[((s=e==null?void 0:e.timeEntriesByUser)==null?void 0:s.length)?h("div",{className:"user-list",children:[t("header",{className:"section-header",children:t("h3",{children:"Colaboradores no projeto"})}),e.timeEntriesByUser.map(r=>t(R,{id:r.id,profilePicture:r==null?void 0:r.profilePicture,name:r==null?void 0:r.name,email:r==null?void 0:r.email,hours:r==null?void 0:r.hours},r.id))]}):null,((i=e==null?void 0:e.timeEntriesByUser)==null?void 0:i.length)?null:t("div",{children:"Nenhuma entrada encontrada para este projeto no per\xEDodo selecionado."})]})]})}):null};var Ht=E(Wt);const Jt=()=>{var n,l,f,d,g,P;const o=D(),[a,e]=p.exports.useState(""),[s,i]=p.exports.useState(!1),[r]=B("clockify-api-key"),c=async()=>{i(!0),await W(o.authStore.authenticate(a)),i(!1)};return p.exports.useEffect(()=>{const m=document.querySelector(".login .fetch-data-log");m&&(m.scrollTop=m.scrollHeight)},[o.authStore.fetchDataLog.length]),p.exports.useEffect(()=>{(r==null?void 0:r.length)&&e(r)},[]),t("div",{className:"screen login",children:h($,{maxWidth:"lg",className:"login__container",children:[t("h1",{children:"Clockify Teams"}),t("div",{className:"login__box",children:o.authStore.isConfirmingIdentity?h(V,{children:[t(R,{disabled:!0,name:(l=(n=o==null?void 0:o.authStore)==null?void 0:n.user)==null?void 0:l.name,profilePicture:(d=(f=o==null?void 0:o.authStore)==null?void 0:f.user)==null?void 0:d.profilePicture,email:(P=(g=o==null?void 0:o.authStore)==null?void 0:g.user)==null?void 0:P.email}),t("div",{className:"fetch-data-log",children:o.authStore.fetchDataLog.map(({text:m,color:w})=>t("div",{style:{color:w},children:m},m))})]}):h(V,{children:[o.authStore.autoLogin?null:t(x,{id:"api-key",label:"Clockify API Key",variant:"filled",value:a,onChange:m=>{e(m.target.value)}}),s||o.authStore.autoLogin?t(Le,{}):t(T,{variant:"outlined",onClick:c,children:"Entrar"})]})})]})})};var Vt=E(Jt);const Kt=()=>{var a;const o=D();return t(Ke,{children:((a=o==null?void 0:o.authStore)==null?void 0:a.isAuthenticated)?h(V,{children:[t(Dt,{}),h(ue,{children:[t(I,{path:"/users/:id",element:t(Rt,{})}),t(I,{path:"/projects/:id",element:t(Ht,{})}),t(I,{path:"/projects",element:t(zt,{})}),t(I,{path:"/teams/edit/:id",element:t($t,{})}),t(I,{path:"/teams/create",element:t(jt,{})}),t(I,{path:"/teams/:id",element:t(Pt,{})}),t(I,{path:"/teams",element:t(kt,{})}),t(I,{path:"/",element:t(qt,{})})]})]}):t(ue,{children:t(I,{path:"/",element:t(Vt,{})})})})};var Qt=E(Kt);const Yt=Qe({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),Te=({children:o})=>h(Ye,{theme:Yt,children:[t(Ze,{}),o]});Te.propTypes={children:v.node.isRequired};const de=o=>{const{active:a}=o;return a?t("div",{className:"loader",children:t(Le,{})}):null};de.propTypes={active:v.bool};de.defaultProps={active:!1};const H=new Date,Zt=()=>{const o=D(),[a,e]=p.exports.useState(!1),[s,i]=p.exports.useState(new Date(H.getFullYear(),H.getMonth(),1)),[r,c]=p.exports.useState(new Date(H.getFullYear(),H.getMonth()+1,0)),n=async()=>{o.authStore.clearDataLog(),o.authStore.setStatusConfirmingIdentity(),o.userStore.setQueryDate(s,r),e(!0),await W(o.projectStore.fetchProjectList()),await W(o.userStore.fetchUserList()),o.projectStore.formatProjectList(),o.teamStore.fetchTeamList(),o.userStore.getUsersTeams(),e(!1),o.authStore.confirmIdentity()};return o.authStore.isUnauthenticated?null:h("div",{className:"query-date-selector",children:[t(de,{active:a}),h("div",{className:"query-date-selector__content",children:[t(fe,{views:["day"],label:"Data inicial",value:s,disabled:a,onChange:i,renderInput:l=>t(x,L(y({},l),{helperText:null,size:"small"}))}),t(fe,{views:["day"],label:"Data final",value:r,disabled:a,onChange:c,renderInput:l=>t(x,L(y({},l),{helperText:null,size:"small"}))}),t(T,{variant:"outlined",disabled:a,onClick:n,className:"query-date-selector__bt-search",children:t(Xe,{})})]})]})};var Xt=E(Zt);const Gt=()=>{const[o,a]=p.exports.useState(null),[e]=B("clockify-api-key"),s=async()=>{const i=at({RootStore:yt,env:pt});a(i),(e==null?void 0:e.length)&&(i.authStore.setAutoLogin(!0),await W(i.authStore.authenticate(e)),i.authStore.setAutoLogin(!1))};return p.exports.useEffect(()=>{s()},[]),o?t("div",{className:"app",children:t(Lt,{value:o,children:t(Ge,{dateAdapter:et,locale:tt,children:h(Te,{children:[t(Qt,{}),t(Xt,{})]})})})}):null};rt.register(st,it,nt,ot,lt,ct);dt.render(t(mt.StrictMode,{children:t(Gt,{})}),document.getElementById("root"));
