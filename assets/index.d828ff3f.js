var dt=Object.defineProperty,ht=Object.defineProperties;var mt=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Me=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var Ne=(n,a,t)=>a in n?dt(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,b=(n,a)=>{for(var t in a||(a={}))Me.call(a,t)&&Ne(n,t,a[t]);if(he)for(var t of he(a))We.call(a,t)&&Ne(n,t,a[t]);return n},C=(n,a)=>ht(n,mt(a));var qe=(n,a)=>{var t={};for(var r in n)Me.call(n,r)&&a.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&he)for(var r of he(n))a.indexOf(r)<0&&We.call(n,r)&&(t[r]=n[r]);return t};var _=(n,a,t)=>(Ne(n,typeof a!="symbol"?a+"":a,t),t);import{a as De,m as Q,o as w,c as be,b as U,f as Z,g as G,R as Ye,j as e,N as re,d as L,r as g,u as V,B as R,e as d,h as ut,S as ft,i as F,A as Ke,C as H,k as x,I as se,l as xe,n as pt,p as Te,q as gt,T as Qe,s as Ze,t as St,D as Ee,v as ke,w as Pe,x as Ce,y as W,z as ze,E as $e,F as Ge,G as et,H as Ie,J as te,P as v,L as ie,K as tt,M as ne,O as ge,Q as ue,U as at,V as _t,W as rt,X as st,_ as M,Y as vt,Z as yt,$ as Nt,a0 as bt,a1 as wt,a2 as Lt,a3 as we,a4 as He,a5 as it,a6 as xt,a7 as Tt,a8 as Je,a9 as J,aa as Ct,ab as Dt,ac as Et,ad as kt,ae as Pt,af as $t,ag as It,ah as jt,ai as Ut,aj as Rt,ak as Ft,al as Bt,am as Ot,an as At,ao as Mt,ap as Wt,aq as qt}from"./vendor.352c7246.js";const zt=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}};zt();const Ht="https://api.clockify.me/api/v1",Jt="https://reports.api.clockify.me/",Vt=De.create({baseURL:Ht,timeout:1e4}),nt=De.create({baseURL:Jt,timeout:1e4}),q=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},r=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(r))}];class Se{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"defaultWorkspace",null);_(this,"profilePicture",null);_(this,"timeEntries",[]);_(this,"timeEntriesByDay",[]);_(this,"teams",[]);_(this,"hours",null);_(this,"warnings",{});_(this,"meta",{valuePerHour:0,attachments:[]});if(Q(this,{id:w,name:w,email:w,defaultWorkspace:w,profilePicture:w,timeEntries:w,timeEntriesByDay:w,teams:w,hours:w,warnings:w,meta:w}),a==null||a.id==null)throw new Error("Invalid user constructor");const{id:t,name:r,email:i,defaultWorkspace:s,profilePicture:c,timeEntries:o,timeEntriesByDay:l,teams:p,hours:m,warnings:S,meta:T}=a;this.id=t,this.name=r||"",this.email=i||"",this.defaultWorkspace=s||"",this.profilePicture=c||"",this.timeEntries=o||[],this.timeEntriesByDay=l||[],this.teams=p||[],this.hours=m||0,this.warnings=S||{},this.meta=T||{}}static fromApi({id:a,name:t,email:r,defaultWorkspace:i,profilePicture:s,timeEntries:c,timeEntriesByDay:o,teams:l,hours:p,warnings:m,meta:S}={}){return new Se({id:a,name:t,email:r,defaultWorkspace:i,profilePicture:s,timeEntries:c,timeEntriesByDay:o,teams:l,hours:p,warnings:m,meta:S})}}class Xt{constructor(){_(this,"user",null);_(this,"authStatus","unauthenticated");_(this,"autoLogin",!1);_(this,"fetchDataLog",[]);Q(this,{user:w,authStatus:w,autoLogin:w,fetchDataLog:w,isAuthenticated:be,isConfirmingIdentity:be,isUnauthenticated:be,setUser:U.bound,confirmIdentity:U.bound,unauthenticate:U.bound,setAutoLogin:U.bound,feedFetchDataLog:U.bound,setStatusConfirmingIdentity:U.bound,clearDataLog:U.bound,authenticate:Z})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(a){this.user=Se.fromApi(a)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(a){this.autoLogin=a}feedFetchDataLog(a,t){let r="";switch(t){case"success":{r="#27ae60";break}case"error":{r="#c0392b";break}default:{r="#ffffff";break}}typeof a=="string"&&a.length&&this.fetchDataLog.push({text:a,color:r})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,G().defaults.headers.common["X-Api-Key"]=null}*authenticate(a){try{const[,t]=q("clockify-api-key");G().defaults.headers.common["X-Api-Key"]=a,nt.defaults.headers.common["X-Api-Key"]=a,t(a);const r=yield G().get("/user");return(r==null?void 0:r.status)!==200?(alert("Invalid Clockify API Key"),!1):(r==null?void 0:r.data)?(this.setUser(r.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const Ve=n=>{let a=n;a=a*60*60;let t=Math.floor(a/(60*60));a-=t*60*60;let r=Math.floor(a/60);return a-=r*60,t<10&&(t=`0${t}`),r<10&&(r=`0${r}`),`${t}:${r}`},fe=n=>{try{const a=new Date(n).toISOString().split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(a){return console.log(a),null}},Le=n=>{try{const a=n==null?void 0:n.split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(a){return console.log(a),null}},ee=n=>{try{const a=n==null?void 0:n.split("H");let t=0,r=0;return(a==null?void 0:a.length)?((a==null?void 0:a.length)===2?(t=Number(a[0].split("PT")[1])||0,r=Number(a[1].split("M")[0])||0):a[0]!=="PT0S"&&(r=Number(a[0].replace("PT","").replace("M",""))),Number(t+r/60)):null}catch(a){return console.log(a),null}},Yt=Ye.forwardRef(function(a,t){const s=a,{onChange:r}=s,i=qe(s,["onChange"]);return e(re,C(b({},i),{getInputRef:t,onValueChange:c=>{r({target:{name:a.name,value:c.value}})},thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0}))});var Kt={Currency:Yt};const Qt=n=>n.replace(/[^\w\s]/gi,""),pe={NO_DESCRIPTION:"Time entry without description",TIME_LIMIT:"Time entry longer than 6 hours"};class Zt{constructor(){_(this,"userList",[]);_(this,"queryStartDate",null);_(this,"queryEndDate",null);Q(this,{userList:w,queryStartDate:w,queryEndDate:w,setUserList:U.bound,formatUserData:U.bound,getUsersTeams:U.bound,storeUserMeta:U.bound,fetchUserList:Z,fetchUserTimeEntries:Z,fetchUserSummaryReport:Z,sendReport:Z})}setUserList(a=[]){this.userList=a.map(t=>Se.fromApi(t))}setQueryDate(a,t){this.queryStartDate=a,this.queryEndDate=t}*fetchUserTimeEntries(a={}){const{id:t,name:r,pageSize:i=5e3}=a,{NO_DESCRIPTION:s,TIME_LIMIT:c}=pe;try{L().authStore.feedFetchDataLog(`fetching user ${r} time entries...`);const{defaultWorkspace:o}=L().authStore.user,l=yield G().get(`/workspaces/${o}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":i}});if(l.status!==200)return L().authStore.feedFetchDataLog(`error fetching ${r} time entries`,"error"),!1;if(l==null?void 0:l.data){let p=0;const m={};Object.keys(pe).forEach(T=>{m[T]=0});const S=l.data.map(T=>{var h,$;const u=(h=T==null?void 0:T.timeInterval)==null?void 0:h.duration,D=C(b({},T),{warnings:[]});if((($=T==null?void 0:T.description)==null?void 0:$.length)||(D.warnings.push(s),m.NO_DESCRIPTION++),u==null?void 0:u.length){const I=ee(u);I&&(p+=I,I>=6&&(D.warnings.push(c),m.TIME_LIMIT++))}return D});return L().authStore.feedFetchDataLog(`fetched ${r} time entries`,"success"),{timeEntries:S,hours:p,warnings:m}}return L().authStore.feedFetchDataLog(`error fetching ${r} time entries`,"error"),!1}catch(o){return console.log(o),L().authStore.feedFetchDataLog(`error fetching ${r} time entries`,"error"),!1}}formatUserData(a){var t,r;try{let i=[];for(const s of a.timeEntries){const c=(t=s==null?void 0:s.timeInterval)==null?void 0:t.duration,o=(r=s==null?void 0:s.timeInterval)==null?void 0:r.start,l=L().projectStore.projectList.find(({id:m})=>m===(s==null?void 0:s.projectId)),p=i.find(m=>m.date===Le(o));(c==null?void 0:c.length)&&(o==null?void 0:o.length)&&(p?i=i.map(m=>m.date===Le(o)?{date:m.date,timeEntries:[...m.timeEntries,C(b({},s),{project:l||{name:"Without project",color:"#ffffff"}})],hours:m.hours+ee(c)}:m):i.push({date:Le(o),timeEntries:[C(b({},s),{project:l||{name:"Without project",color:"#ffffff"}})],hours:ee(c)}))}return C(b({},a),{timeEntriesByDay:i})}catch(i){return console.log(i),!1}}getUsersTeams(){const a=[];for(const t of this.userList){const r=[];for(const i of L().teamStore.teamList)for(const s of i.users)s.id===t.id&&r.push(i);a.push(C(b({},t),{teams:r}))}this.setUserList(a)}storeUserMeta(a={}){const{id:t,userMeta:r}=a,[i,s]=q("user-meta"),c=C(b({},i),{[t]:r});i[t]&&(c[t]=b(b({},i[t].meta),r)),s(c)}*fetchUserList(a={}){var t;try{L().authStore.feedFetchDataLog("fetching user list...");const[r]=q("user-meta"),{pageSize:i=5e3}=a,{defaultWorkspace:s}=L().authStore.user,c=yield G().get(`/workspaces/${s}/users`,{params:{"page-size":i,status:"ACTIVE"}});if(c.status!==200)return L().authStore.feedFetchDataLog("error fecthing user list","error"),!1;if((t=c==null?void 0:c.data)==null?void 0:t.length){L().authStore.feedFetchDataLog("fetched user list","success");const o=[];for(const l of c.data){const p=yield this.fetchUserTimeEntries(l);if(p){const m=b(b({},l),p);r&&r[l.id]&&(m.meta=r[l.id]);const S=this.formatUserData(m);o.push(S)}}if(o.length)return this.setUserList(o),L().authStore.feedFetchDataLog("fetched all users time entries","success"),!0}return L().authStore.feedFetchDataLog("error fetching user list","error"),!1}catch(r){return console.log(r),L().authStore.feedFetchDataLog("error fetching user list","error"),!1}}*fetchUserSummaryReport(a){try{const{defaultWorkspace:t}=L().authStore.user,r=yield nt.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[a.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),s=`${a.name.toLowerCase().split(" ").map(o=>Qt(o)).join("-")}__from_${fe(this.queryStartDate)}_to_${fe(this.queryEndDate)}`,c=new Blob([r.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(c,s);else{const o=document.createElement("a"),l=document.querySelector("body");o.href=window.URL.createObjectURL(c),o.download=s,o.style.display="none",l.appendChild(o),o.click(),l.removeChild(o),window.URL.revokeObjectURL(o.href)}return!1}catch(t){return console.log(t),L().authStore.feedFetchDataLog("error fetching user list","error"),!1}}*sendReport(a={}){try{const{toId:t,attachments:r,valuePerHour:i}=a,[s]=q("clockify-api-key"),c=yield De.post("http://localhost:3001/email",{toId:t,attachments:r,valuePerHour:i,dateRangeStart:this.queryStartDate,dateRangeEnd:this.queryEndDate},{headers:{secret:"clockifyteamssegredosegredososecreto",token:s}}),{status:o}=c;return c.status!==200?{error:{status:o}}:!0}catch(t){return console.log(t),{error:{status:400}}}}}class je{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"workspaceId",null);_(this,"color",null);_(this,"duration",null);_(this,"estimate",null);_(this,"users",[]);_(this,"timeEntriesByUser",[]);if(Q(this,{id:w,name:w,email:w,workspaceId:w,color:w,duration:w,estimate:w,users:w,timeEntriesByUser:w}),a==null||a.id==null)throw new Error("Invalid Project constructor");const{id:t,name:r,email:i,workspaceId:s,color:c,duration:o,estimate:l,users:p,timeEntriesByUser:m}=a;this.id=t,this.name=r||"",this.email=i||"",this.workspaceId=s||"",this.color=c||"",this.duration=o||"",this.estimate=l||"",this.users=p||[],this.timeEntriesByUser=m||[]}static fromApi({id:a,name:t,email:r,workspaceId:i,color:s,duration:c,estimate:o,users:l,timeEntriesByUser:p}={}){return new je({id:a,name:t,email:r,workspaceId:i,color:s,duration:c,estimate:o,users:l,timeEntriesByUser:p})}}class Gt{constructor(){_(this,"projectList",[]);Q(this,{projectList:w,setProjectList:U.bound,formatProjectData:U.bound,formatProjectList:U.bound,fetchProjectList:Z})}setProjectList(a=[]){this.projectList=a.map(t=>je.fromApi(t))}formatProjectData(a={}){var t;try{const{id:r}=a;let i=[];for(const s of L().userStore.userList){const c=s.timeEntries.filter(o=>o.projectId===r);for(const o of c){const l=i.find(S=>S.id===o.userId);let p=0;const m=(t=o==null?void 0:o.timeInterval)==null?void 0:t.duration;(m==null?void 0:m.length)&&(p+=ee(m)),l?i=i.map(S=>S.id===o.userId?C(b({},S),{timeEntries:[...S.timeEntries,o],hours:S.hours+p}):S):i.push(C(b({},s),{timeEntries:[o],hours:p}))}}return C(b({},a),{timeEntriesByUser:i})}catch(r){return console.log(r),!1}}formatProjectList(){const a=[];for(const t of this.projectList){const r=this.formatProjectData(t);a.push(r)}this.setProjectList(a)}*fetchProjectList(a={}){var t;try{L().authStore.feedFetchDataLog("fetching project list...");const{pageSize:r=5e3}=a,{defaultWorkspace:i}=L().authStore.user,s=yield G().get(`/workspaces/${i}/projects`,{params:{archived:!1,"page-size":r}});return s.status!==200?(L().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=s==null?void 0:s.data)==null?void 0:t.length)?(this.setProjectList(s.data),L().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(r){return console.log(r),L().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class Ue{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"image",null);_(this,"users",[]);_(this,"timeEntriesByProject",[]);if(Q(this,{id:w,name:w,image:w,users:w,timeEntriesByProject:w}),a==null||a.id==null)throw new Error("Invalid Team constructor");const{id:t,name:r,image:i,users:s,timeEntriesByProject:c}=a;this.id=t,this.name=r||"",this.image=i||"",this.users=s||[],this.timeEntriesByProject=c||[]}static fromApi({id:a,name:t,image:r,users:i,timeEntriesByProject:s}={}){return new Ue({id:a,name:t,image:r,users:i,timeEntriesByProject:s})}}class ea{constructor(){_(this,"teamList",[]);Q(this,{teamList:w,setTeamList:U.bound,createTeam:U.bound,editTeam:U.bound,fetchTeamList:U.bound,formatTeamData:U.bound})}createTeam(a={}){try{const{users:t}=a,[r,i]=q("team-list"),s=r||[];let c=1;return s.length?(c=s.length+1,i([...s,C(b({},a),{id:c,users:t.map(o=>o.id)})])):i([C(b({},a),{id:1,users:t.map(o=>o.id)})]),c}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(a,t={}){try{const[r,i]=q("team-list"),{users:s}=t;return i(r.map(c=>c.id===a?C(b(b({},c),c),{users:s.map(o=>o.id)}):c)),a}catch(r){return console.log(r),!1}finally{this.fetchTeamList()}}removeTeam(a={}){try{const[t,r]=q("team-list"),i=t.filter(s=>s.id!==a.id);r(i),this.setTeamList(i.map(s=>C(b({},s),{users:L().userStore.userList.filter(c=>s.users.includes(c.id))})))}catch(t){console.log(t)}}setTeamList(a=[]){this.teamList=a.map(t=>Ue.fromApi(t))}fetchTeamList(){try{L().authStore.feedFetchDataLog("fetching team list...");const[a]=q("team-list");if(a.length){const t=[];for(const r of a){const i=this.formatTeamData(r);t.push(C(b({},i),{users:L().userStore.userList.filter(s=>r.users.includes(s.id))}))}this.setTeamList(t),L().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(a){return console.log(a),L().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(a={}){var t;try{const r=[];let i=[];for(const c of a.users){const o=L().userStore.userList.find(l=>l.id===c);if(o){const{timeEntries:l,hours:p}=o;for(const S of l){const T=i.find(h=>h.id===S.projectId);let u=0;const D=(t=S==null?void 0:S.timeInterval)==null?void 0:t.duration;(D==null?void 0:D.length)&&(u+=ee(D)),T?i=i.map(h=>h.id===S.projectId?C(b({},h),{id:S.projectId,timeEntries:[...h.timeEntries,S],hours:h.hours+u}):h):i.push({id:S.projectId,timeEntries:[S],hours:u})}const m=L().userStore.userList.find(S=>S.id===c.id);r.push(C(b({},m),{timeEntries:l,hours:p}))}}let s=0;for(const c of i){if(c.id){const o=L().projectStore.projectList.find(l=>l.id===c.id);o&&(i[s]=C(b({},i[s]),{name:o.name,color:o.color}))}else i[s]=C(b({},i[s]),{name:"Without project",color:"#ffffff"});s++}return C(b({},a),{users:r,timeEntriesByProject:i})}catch(r){return console.log(r),!1}}}class ta{constructor(){_(this,"authStore",null);_(this,"userStore",null);_(this,"projectStore",null);_(this,"teamStore",null)}init(){this.authStore=new Xt,this.userStore=new Zt,this.projectStore=new Gt,this.teamStore=new ea}}const ot=g.exports.createContext({}),aa=ot.Provider;var z=()=>g.exports.useContext(ot);const ra=[{route:"/",label:"Collaborators"},{route:"/teams",label:"Teams"},{route:"/projects",label:"Projects"}],lt=({vertical:n,drawer:a})=>{const t=V(),r=i=>{t(i),a&&a.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:ra.map(i=>e("li",{className:"menu__list__item",children:e(R,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>r(i.route),children:i.label})},i.route))})})};const sa=()=>{const[n,a]=g.exports.useState(!1),t=()=>{a(!0)},r=()=>{a(!1)};return d("div",{className:"drawer",children:[e(R,{onClick:t,children:e(ut,{color:"primary"})}),e(ft,{anchor:"right",open:n,onClose:r,onOpen:t,children:e("div",{className:"drawer__content",children:e(lt,{vertical:!0,drawer:{close:r}})})})]})};const ia=()=>e("div",{className:"logo",children:"Clockify Teams"});const na=()=>{const[n,a]=g.exports.useState(!0);let t=0;const r=()=>{const i=window.pageYOffset||document.documentElement.scrollTop;i>t?a(!1):a(!0),t=i<=0?0:i};return g.exports.useEffect(()=>(window.addEventListener("scroll",r,!1),()=>{window.removeEventListener("scroll",r,!1)}),[]),e(Ke,{className:"header",position:"sticky",style:{transform:n?"none":"translate3d(0, calc(-100% - 2rem),0)",transition:"transform 0.25s cubic-bezier(0.645,0.045,0.355,1)"},children:e(H,{maxWidth:"lg",children:d("div",{className:"header__content",children:[e(ia,{}),e("div",{className:"header__menu",children:e(lt,{})}),e("div",{className:"header__drawer",children:e(sa,{})})]})})})};var oa=F(na);const{Currency:Xe}=Kt,la=n=>{var B;const a=z(),{hours:t,warnings:r,user:i,reportState:s,pdf:c,onSendReport:o}=n,[l,p]=g.exports.useState(!1),[m,S]=g.exports.useState(!1),[T,u]=g.exports.useState(!1),[D,h]=g.exports.useState(0),[$,I]=g.exports.useState([]),[O,ve]=g.exports.useState(0),[ae,oe]=g.exports.useState(0),le=async()=>{S(!0),await te(a.userStore.fetchUserSummaryReport(i)),S(!1)},ce=()=>{switch(s){case"success":return"#2ecc71";case"error":return"#f44336";default:return"#fff"}},f=async()=>{try{u(!1),await o(i.id)}catch(y){console.log(y)}},N=()=>{I(y=>[...y,{description:"",value:0}])},E=y=>{I(k=>k.filter((A,Y)=>y!==Y))},j=y=>{let k=0;return(y==null?void 0:y.length)>1?k+=y.reduce((A,Y)=>Number(A.value)+Number(Y.value)):y.length===1&&(k+=Number(y[0].value)),oe(k),k},P=y=>{const k=t*D,A=j(y);ve(k+A)},X=y=>y<0?"#f44336":y>0?"#2ecc71":"#fff";return g.exports.useEffect(()=>{!l||(a.userStore.storeUserMeta({id:i.id,userMeta:{valuePerHour:D,attachments:$}}),P($))},[D,$]),g.exports.useEffect(()=>{var y,k;((y=i==null?void 0:i.meta)==null?void 0:y.valuePerHour)&&h(i.meta.valuePerHour),((k=i==null?void 0:i.meta)==null?void 0:k.attachments)&&I(i.meta.attachments.map(A=>b({},A))),p(!0)},[]),d("div",{className:"user__meta",children:[d(x,{display:"flex",alignItems:"center",gap:2,padding:2,children:[e("div",{className:"user__meta__item",children:c?e(se,{onClick:le,disabled:m,children:m?e(xe,{style:{width:20,height:20}}):e(pt,{})}):null}),e("div",{className:"user__meta__item",children:e(se,{onClick:()=>u(!0),disabled:s==="requesting",children:s==="requesting"?e(xe,{style:{width:20,height:20}}):d("div",{className:"user__meta__payment-report-icon",style:{color:ce()},children:[e(Te,{}),e("div",{className:"user__meta__payment-report-icon__money-icon",children:e(gt,{})})]})})}),((B=Object.entries(r).filter(([,y])=>y>0))==null?void 0:B.length)?e(Qe,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(r).filter(([,y])=>y>0).map(([y,k])=>e("li",{className:"warning-list__item",children:`${k}x ${pe[y]}`},pe[y]))}),children:e("div",{className:"user__meta__item warning",children:e(Ze,{color:r.NO_PROJECT>0||r.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(St,{color:"secondary"})}),d(Ee,{open:T,onClose:()=>u(!1),children:[e(ke,{children:i.name}),e(Pe,{children:d(x,{display:"flex",flexDirection:"column",gap:4,paddingTop:2,children:[d(x,{display:"flex",justifyContent:"space-between",gap:2,sx:{alignItems:{xs:"center",sx:"initial"},flexDirection:{xs:"row",sm:"row"}},children:[d(x,{display:"flex",alignItems:"center",gap:1,flex:2,style:{color:t>=200?"#f44336":"#ffffff"},children:[e(Ce,{color:t>=200?"error":""}),Ve(t)," \u2022 ",t.toFixed(2)]}),e(x,{display:"flex",flexDirection:"column",alignItems:"center",flex:1,children:e(W,{id:"value-per-hour",label:"Per hour",size:"small",value:D,onChange:y=>{const{value:k}=y.target;k&&h(Number(k))},InputProps:{startAdornment:e(ze,{position:"start",children:"R$"}),inputComponent:Xe}})})]}),d(x,{display:"flex",flexDirection:"column",gap:2,paddingBottom:2,style:{borderBottom:"1px solid rgba(236, 240, 241, 0.5)"},children:[e($e,{display:"flex",alignItems:"center",gap:1,style:{color:t>=200?"#f44336":"#ffffff",borderBottom:"1px solid rgba(236, 240, 241, 0.5)"},children:"Attachments"}),$.map((y,k)=>d(x,{display:"flex",gap:2,children:[e(x,{display:"flex",flex:1,children:e(W,{label:"Description",size:"small",fullWidth:!0,value:y.description,onChange:A=>{I(Y=>{const de=[...Y];return de[k].description=A.target.value,de})}})}),e(x,{display:"flex",flex:1,children:e(W,{label:"Value",size:"small",fullWidth:!0,value:y.value,InputProps:{startAdornment:e(ze,{position:"start",children:"R$"}),inputComponent:Xe},onChange:A=>{var Y;!((Y=A==null?void 0:A.target)==null?void 0:Y.value)||I(de=>{const ye=[...de];return ye[k].value=Number(A.target.value),P(ye),ye})}})}),e(se,{onClick:()=>E(k),children:e(Ge,{})})]},`${k}`)),e(x,{alignSelf:"flex-end",children:e(se,{onClick:N,children:e(et,{})})})]}),d(x,{alignSelf:"flex-end",color:X(O),children:["Total: R$"," ",e(re,{value:O,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]})]})}),e(Ie,{children:d(x,{display:"flex",gap:2,children:[e(R,{autoFocus:!0,onClick:()=>u(!1),variant:"outlined",children:"Close"}),e(R,{onClick:f,startIcon:e(Te,{}),variant:"outlined",children:"Send Report"})]})})]})]}),d(x,{display:"flex",alignItems:"center",gap:2,padding:2,children:[d(x,{color:t>=200?"#f44336":"#ffffff",display:"flex",alignItems:"center",gap:1,children:[e(x,{children:Ve(t)}),e(Ce,{color:t>=200?"error":""}),"R$"," ",e(re,{value:D,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]}),"+",d(x,{color:X(ae),children:["R$"," ",e(re,{value:ae,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]}),"=",d(x,{color:X(O),children:["R$"," ",e(re,{value:O,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]})]})]})};var ca=F(la);const Re=n=>{const{id:a,name:t,lastName:r,profilePicture:i,email:s,showMeta:c,pdf:o,disabled:l,hours:p,warnings:m,meta:S,hasCheckBox:T,reportState:u,checked:D,onCheck:h,onSendReport:$}=n,I=V();return d(ie,{className:"user",children:[T?e("div",{className:"user__checkbox",children:e(tt,{checked:D,onChange:O=>h(O.target.checked),color:"primary"})}):null,d("div",{className:"user__pressable",onClick:()=>l?null:I(`/users/${a}`),style:{pointerEvents:l?"none":"initial"},children:[e(ne,{alt:t,src:i,className:"user__avatar"}),d("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:s})]})]}),c?e(ca,{pdf:o,hours:p,warnings:m,user:{id:a,name:t,lastName:r,email:s,meta:S},reportState:u,onSendReport:$}):null]})};Re.propTypes={id:v.oneOfType([v.number,v.string]),name:v.string,lastName:v.string,profilePicture:v.string,email:v.string,showMeta:v.bool,pdf:v.bool,disabled:v.bool,hours:v.number,warnings:v.instanceOf(Object),meta:v.instanceOf(Object),checked:v.bool,reportState:v.string,hasCheckBox:v.bool,onCheck:v.func,onSendReport:v.func};Re.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null,meta:{valuePerHour:0,attachments:[]},checked:!1,reportState:"idle",hasCheckBox:!1,onCheck:()=>"",onSendReport:()=>""};var K=F(Re);const da=()=>{var p;const n=z(),a=ge(),t=V(),[r,i]=g.exports.useState(!1),s=n.teamStore.teamList.find(({id:m})=>m===Number(a.id)),c=()=>{i(!0)},o=()=>{i(!1)},l=()=>{n.teamStore.removeTeam(s),o(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),s?d(ue,{children:[d("div",{className:"screen team-detail",children:[d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(ne,{alt:s==null?void 0:s.name,src:s==null?void 0:s.image,className:"team-detail__avatar"}),e("h2",{children:s==null?void 0:s.name})]}),e("div",{className:"screen__header__right",children:e(R,{onClick:c,children:e(Ge,{})})})]}),e("main",{children:d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Team collaborators"})}),((p=s==null?void 0:s.users)==null?void 0:p.length)?s.users.map(m=>e(K,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours,warnings:m==null?void 0:m.warnings},m.id)):null]})})]}),e(at,{className:"team-detail__edit-team",color:"primary","aria-label":"Edit team",onClick:()=>{t(`/teams/edit/${s.id}`)},children:e(_t,{})})]}),d(Ee,{open:r,onClose:o,children:[e(ke,{children:`Delete team ${s.name}`}),e(Pe,{children:e($e,{children:`Are you sure you want to delete "${s.name}" team?`})}),d(Ie,{children:[e(R,{autoFocus:!0,onClick:o,color:"primary",children:"Cancel"}),e(R,{onClick:l,color:"primary",children:"Confirm"})]})]})]}):null};var ha=F(da);const Fe=n=>{const{id:a,name:t,image:r,avatarSize:i,fontSize:s,disabled:c,card:o}=n,l=V();return o?d(ie,{className:"team card",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[r.length?e("img",{className:"team__image",src:r,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:s},children:t})})]}):d(ie,{className:"team",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[e(ne,{alt:t,src:r,className:"team__avatar",style:{width:i,height:i}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:s},children:t})})]})};Fe.propTypes={id:v.number.isRequired,name:v.string,image:v.string,avatarSize:v.number,fontSize:v.number,disabled:v.bool,card:v.bool};Fe.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var _e=F(Fe);const ma=()=>{const n=z(),a=ge(),t=V(),r=n.teamStore.teamList.find(h=>h.id===Number(a.id)),[i,s]=g.exports.useState(""),[c,o]=g.exports.useState(""),[l,p]=g.exports.useState([]),[m,S]=g.exports.useState([]),T=(h,$,I)=>{p(M.sortBy($.filter(O=>O.id!==h.id),"name")),S(M.sortBy([...I,h],"name"))},u=(h,$,I)=>{S(M.sortBy(I.filter(O=>O.id!==h.id),"name")),p(M.sortBy([...$,h],"name"))},D=async()=>{const h=await n.teamStore.editTeam(r.id,{name:i,image:c,users:m});t(`/teams/${h}`),h&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{s(r.name),o(r.image),S(r.users);const h=[...n.userStore.userList];r.users.forEach($=>{h.forEach((I,O)=>{I.id===$.id&&h.splice(O,1)})}),p(h)},[r]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(H,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Edit team ${r.name}`})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(W,{id:"team-name",label:"Name",value:i,onChange:h=>{s(h.target.value)}}),e(W,{id:"team-image",label:"Image",value:c,onChange:h=>{o(h.target.value)}}),(i==null?void 0:i.length)||(c==null?void 0:c.length)?e("div",{className:"screen__header__preview",children:e(_e,{name:i,image:c,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(R,{variant:"outlined",onClick:D,children:"Salvar"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),l.map(h=>d("div",{className:"user-list__item",children:[e(K,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours},h.id),e(R,{className:"user-list__item__bt-add",onClick:()=>T(h,l,m),children:e(rt,{})})]},h.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),m.map(h=>d("div",{className:"user-list__item",children:[e(R,{className:"user-list__item__bt-add",onClick:()=>u(h,l,m),children:e(st,{})}),e(K,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours})]},h.id))]})]})]})]})})};var ua=F(ma);const fa=()=>{const n=z(),a=V(),[t,r]=g.exports.useState(""),[i,s]=g.exports.useState(""),[c,o]=g.exports.useState([]),[l,p]=g.exports.useState([]),m=u=>{o(M.sortBy(c.filter(D=>D.id!==u.id),"name")),p(M.sortBy([...l,u],"name"))},S=u=>{p(M.sortBy(l.filter(D=>D.id!==u.id),"name")),o(M.sortBy([...c,u],"name"))},T=async()=>{const u=n.teamStore.createTeam({name:t,image:i,users:l});n.teamStore.fetchTeamList(),a(`/teams/${u}`),u&&alert(`Team ${t} created.`)};return g.exports.useEffect(()=>{o(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(H,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Create team"})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(W,{id:"team-name",label:"Name",value:t,onChange:u=>{r(u.target.value)}}),e(W,{id:"team-image",label:"Image",value:i,onChange:u=>{s(u.target.value)}}),(t==null?void 0:t.length)||(i==null?void 0:i.length)?e("div",{className:"screen__header__preview",children:e(_e,{name:t,image:i,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(R,{variant:"outlined",onClick:T,children:"Create"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),c.map(u=>d("div",{className:"user-list__item",children:[e(K,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours},u.id),e(R,{className:"user-list__item__bt-add",onClick:()=>m(u),children:e(rt,{})})]},u.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),l.map(u=>d("div",{className:"user-list__item",children:[e(R,{className:"user-list__item__bt-add",onClick:()=>S(u),children:e(st,{})}),e(K,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours})]},u.id))]})]})]})]})})};var pa=F(fa);const ga=()=>{var c,o;const n=z(),a=V(),[t,r]=g.exports.useState(""),[i,s]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){s(n.teamStore.teamList.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())));return}s(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{s(n.teamStore.teamList),window.scrollTo(0,0)},[]),d("div",{className:"screen teams",children:[d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Teams"}),e("div",{className:"screen__header__right",children:((o=(c=n==null?void 0:n.teamStore)==null?void 0:c.teamList)==null?void 0:o.length)?e(W,{id:"filter-term",label:"Filter",size:"small",value:t,onChange:l=>{r(l.target.value)}}):null})]}),e("main",{children:(i==null?void 0:i.length)?i.map(l=>e(_e,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id)):e("div",{children:"No team found."})})]}),e(at,{className:"teams__create-team",color:"primary","aria-label":"Create team",onClick:()=>{a("/teams/create")},children:e(et,{})})]})};var Sa=F(ga);const Be=n=>{const{project:a,time:t,description:r,disabled:i,showMeta:s,warnings:c}=n,o=V();return d(ie,{button:!i,className:"time-entry",style:{borderColor:a.color},children:[d("div",{className:"time-entry__pressable",onClick:()=>a.id?o(`/projects/${a.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:a.name})}),d("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:a.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:r})]})]}),s&&(c==null?void 0:c.length)?e("div",{className:"time-entry__meta",children:e(Qe,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:c.map(l=>e("li",{className:"warning-list__item",children:l}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(Ze,{color:c.length===1&&c[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};Be.propTypes={project:v.instanceOf(Object),time:v.string,description:v.string,disabled:v.bool,showMeta:v.bool,warnings:v.arrayOf(v.instanceOf(Object))};Be.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var _a=F(Be);const va=()=>{var o;const n=z(),a=ge(),t=n.userStore.userList.find(({id:l})=>l===a.id),[r,i]=g.exports.useState([]),[s,c]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(s){i(t.timeEntriesByDay.filter(l=>l.timeEntries.find(p=>{var m;return(m=p==null?void 0:p.warnings)==null?void 0:m.length})).map(l=>C(b({},l),{timeEntries:l.timeEntries.filter(p=>{var m;return(m=p==null?void 0:p.warnings)==null?void 0:m.length})})));return}i(t.timeEntriesByDay)},[s]),g.exports.useEffect(()=>{i(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(ne,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),d("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e(Ce,{color:t.hours>=200?"error":""})]})]}),d("main",{children:[(t==null?void 0:t.teams.length)?d("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Collaborator teams"})}),t.teams.map(l=>e(_e,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id))]}):null,((o=t==null?void 0:t.timeEntries)==null?void 0:o.length)?d("div",{className:"time-entries",children:[d("header",{className:"section-header",children:[e("h3",{children:"Time entries"}),e("div",{className:"time-entries__filter",children:e(vt,{control:e(yt,{checked:s,onChange:()=>c(!s),name:"filterWarnings",color:"primary"}),label:"Filter warnings"})})]}),(r==null?void 0:r.length)?r.map(l=>d("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:l.date})}),e("div",{className:"description",children:l.timeEntries.map(p=>{var m;return e(_a,{disabled:!((m=p==null?void 0:p.project)==null?void 0:m.id),project:p.project,time:p.timeInterval.duration,description:p.description,warnings:p.warnings,showMeta:!0},p.id)})})]},l.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var ya=F(va);const Na=()=>{var ae,oe,le,ce;const n=z(),[a,t]=g.exports.useState(""),[r,i]=g.exports.useState([]),[s,c]=g.exports.useState("name"),[o,l]=g.exports.useState([]),[p,m]=g.exports.useState(!1),[S,T]=g.exports.useState(!1),u=s==="hours"?"desc":"asc",D=async f=>{try{const[N]=q("user-meta");l(j=>j.map(P=>f===P.id?C(b({},P),{state:"requesting"}):P));const E=await te(n.userStore.sendReport(b({toId:f},N[f])));return(E==null?void 0:E.error)?(l(j=>j.map(P=>f===P.id?C(b({},P),{state:"error"}):P)),{error:E.error}):(l(j=>j.map(P=>f===P.id?C(b({},P),{state:"success"}):P)),E)}catch(N){return console.log(N),null}},h=async()=>{try{m(!0),T(!1);const f=r.filter((N,E)=>o[E].checked&&!o[E].requesting);for(const N of f)await D(N.id)}catch(f){console.log(f)}finally{m(!1)}},$=(f,N={valuePerHour:0,attachments:[]})=>{var P,X,B;let E=0;const{valuePerHour:j}=N;return((P=N==null?void 0:N.attachments)==null?void 0:P.length)?(((X=N==null?void 0:N.attachments)==null?void 0:X.length)>1?E+=N.attachments.reduce((y,k)=>y.value+k.value):((B=N==null?void 0:N.attachments)==null?void 0:B.length)===1&&(E+=Number(N==null?void 0:N.attachments[0].value)),f*j+E):f*j},I=async()=>{const[f]=q("user-meta");try{He({data:r.map(({id:N,name:E,email:j,hours:P,warnings:X})=>{var y;const B=f[N];return console.log(B),{name:E,email:j,hours:P.toFixed(2),valuePerHour:(B==null?void 0:B.valuePerHour)||0,attachments:((y=B==null?void 0:B.attachments)==null?void 0:y.length)?JSON.stringify(B.attachments):"",total:String($(P,B).toFixed(2)),warnings:JSON.stringify(X)}}),fileName:`Clockify_Teams_REPORT___from_${fe(n.userStore.queryStartDate)}_to_${fe(n.userStore.queryEndDate)}`,exportType:He.types.xls})}catch(N){console.log(N)}},O=(f,N)=>{l(E=>E.map(j=>j.id===f?C(b({},j),{checked:N}):j))},ve=f=>{l(N=>N.map(E=>C(b({},E),{checked:f})))};return g.exports.useEffect(()=>{if(a.length){i(M.orderBy(n.userStore.userList.filter(f=>f.name.toLowerCase().includes(a.toLowerCase())),s,u));return}i(M.orderBy(n.userStore.userList,s,u))},[a]),g.exports.useEffect(()=>{const f=s==="hours"?"desc":"asc";i(N=>M.orderBy(N,s,f))},[s]),g.exports.useEffect(()=>{i(M.orderBy(n.userStore.userList,s)),l(M.orderBy(n.userStore.userList,s).map(({id:f})=>({id:f,checked:!1,state:"Idle"}))),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:d(H,{maxWidth:"lg",children:[d(x,{component:"header",className:"screen__header",sx:{flexDirection:{sm:"column"},alignItems:{sm:"flex-start"}},children:[d(x,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2,children:[e("h2",{children:"Collaborators"}),e(R,{onClick:I,variant:"outlined",startIcon:e(Nt,{}),size:"large",children:"XLS"})]}),d(x,{className:"screen__header__content",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[d(x,{sx:{display:"flex",alignItems:"center",gap:2,marginLeft:1},children:[e(tt,{checked:!o.find(f=>f.checked===!1),onChange:f=>ve(f.target.checked),color:"primary",disabled:p}),o.filter(f=>f.checked).length?e("div",{className:"screen__header__content__item",children:e(R,{onClick:()=>T(!0),disabled:p,variant:"outlined",size:"large",sx:{paddingLeft:0,paddingRight:0,minWidth:40},children:p?e(xe,{style:{width:20,height:20}}):e(Te,{})})}):null]}),d(x,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((oe=(ae=n==null?void 0:n.userStore)==null?void 0:ae.userList)==null?void 0:oe.length)?e(x,{flex:{xs:2},children:d(bt,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(wt,{id:"order-by-label",children:"Order by"}),d(Lt,{labelId:"order-by-label",id:"order-by",value:s,label:"Order by",onChange:f=>c(f.target.value),size:"small",children:[e(we,{value:"name",children:"Name"}),e(we,{value:"email",children:"E-mail"}),e(we,{value:"hours",children:"Workload"})]})]})}):null,((ce=(le=n==null?void 0:n.userStore)==null?void 0:le.userList)==null?void 0:ce.length)?e(x,{flex:"3",children:e(W,{fullWidth:!0,id:"filter-term",label:"Filter",size:"small",value:a,onChange:f=>{t(f.target.value)}})}):null]})]})]}),e("main",{children:(r==null?void 0:r.length)?r.map((f,N)=>{var E,j;return e(K,{id:f.id,profilePicture:f==null?void 0:f.profilePicture,name:f==null?void 0:f.name,lastName:f==null?void 0:f.lastName,email:f==null?void 0:f.email,hours:f==null?void 0:f.hours,payment:f==null?void 0:f.payment,warnings:f==null?void 0:f.warnings,meta:f==null?void 0:f.meta,checked:(E=o[N])==null?void 0:E.checked,reportState:(j=o[N])==null?void 0:j.state,onCheck:P=>O(f.id,P),onSendReport:D,showMeta:!0,pdf:!0,hasCheckBox:!0},f.id)}):e("div",{children:"No collaborator found."})}),d(Ee,{open:S,onClose:()=>T(!1),children:[e(ke,{children:"Report"}),e(Pe,{children:e($e,{children:` Send report to ${o.filter(f=>f.checked).length} collaborators?`})}),d(Ie,{children:[e(R,{autoFocus:!0,onClick:()=>T(!1),color:"primary",children:"Cancel"}),e(R,{onClick:h,color:"primary",children:"Confirm"})]})]})]})})};var ba=F(Na);const Oe=n=>{const{id:a,index:t,name:r,color:i,disabled:s=!1}=n,[c,o]=g.exports.useState(!1),l=V();return g.exports.useEffect(()=>{const p=setTimeout(()=>{o(!0)},t*50+100);return()=>{clearTimeout(p)}},[]),e(ie,{button:!s,onClick:()=>s?null:l(`/projects/${a}`),className:"project",style:{borderColor:c?i:"transparent"},children:e("div",{className:"project__name",children:r})})};Oe.propTypes={id:v.string.isRequired,index:v.number.isRequired,name:v.string,color:v.string,disabled:v.bool};Oe.defaultProps={name:"",color:"",disabled:!1};var wa=F(Oe);const La=()=>{var s,c;const n=z(),[a,t]=g.exports.useState(""),[r,i]=g.exports.useState([]);return g.exports.useEffect(()=>{if(a.length){i(n.projectStore.projectList.filter(o=>o.name.toLowerCase().includes(a.toLowerCase())));return}i(n.projectStore.projectList)},[a]),g.exports.useEffect(()=>{i(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Projects"}),((c=(s=n==null?void 0:n.projectStore)==null?void 0:s.projectList)==null?void 0:c.length)?e(W,{id:"filter-term",label:"Filter",size:"small",value:a,onChange:o=>{t(o.target.value)}}):null]}),e("main",{children:(r==null?void 0:r.length)?r.map((o,l)=>e(wa,{id:o.id,color:o==null?void 0:o.color,name:o==null?void 0:o.name,index:l},o.id)):e("div",{children:"No project found."})})]})})};var xa=F(La);const Ta=()=>{var r,i;const n=z(),a=ge(),t=n.projectStore.projectList.find(({id:s})=>s===a.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:e("div",{className:"project-detail__estimate",children:e("div",{children:`Total: ${ee(t==null?void 0:t.duration).toFixed(2)} hours`})})})]}),d("main",{children:[((r=t==null?void 0:t.timeEntriesByUser)==null?void 0:r.length)?d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Project collaborators"})}),t.timeEntriesByUser.map(s=>e(K,{id:s.id,profilePicture:s==null?void 0:s.profilePicture,name:s==null?void 0:s.name,email:s==null?void 0:s.email,hours:s==null?void 0:s.hours},s.id))]}):null,((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?null:e("div",{children:"No time entries found."})]})]})}):null};var Ca=F(Ta);const Da=()=>{var o,l,p,m,S,T,u,D;const n=z(),[a,t]=g.exports.useState(""),[r,i]=g.exports.useState(!1),[s]=q("clockify-api-key"),c=async()=>{i(!0),await te(n.authStore.authenticate(a)),i(!1)};return g.exports.useEffect(()=>{const h=document.querySelector(".login .fetch-data-log");h&&(h.scrollTop=h.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(s==null?void 0:s.length)&&t(s)},[]),e("div",{className:"screen login",children:e(H,{maxWidth:"lg",className:"login__container",children:d(x,{position:"relative",display:"flex",alignItems:"center",flexDirection:"column",width:"100%",maxWidth:"400px",children:[e("h1",{children:"Clockify Teams"}),e(x,{className:"login__box",width:"100%",children:n.authStore.isConfirmingIdentity?d(ue,{children:[d("div",{className:"login__user",children:[e(ne,{alt:(l=(o=n==null?void 0:n.authStore)==null?void 0:o.user)==null?void 0:l.name,src:(m=(p=n==null?void 0:n.authStore)==null?void 0:p.user)==null?void 0:m.profilePicture,className:"login__user__avatar"}),d("div",{className:"login__user__profile",children:[e("div",{className:"login__user__name",children:(T=(S=n==null?void 0:n.authStore)==null?void 0:S.user)==null?void 0:T.name}),e("div",{className:"login__user__email",children:(D=(u=n==null?void 0:n.authStore)==null?void 0:u.user)==null?void 0:D.email})]}),e("div",{className:"login__user__logout",children:e(se,{onClick:n.authStore.unauthenticate,children:e(xt,{})})})]}),e(x,{className:"fetch-data-log",width:"100%",children:n.authStore.fetchDataLog.map(({text:h,color:$})=>e("div",{style:{color:$},children:h},h))})]}):d(ue,{children:[n.authStore.autoLogin?null:e(W,{id:"api-key",label:"Clockify API Key",value:a,onChange:h=>{t(h.target.value)}}),r||n.authStore.autoLogin?e(it,{}):e(R,{variant:"outlined",onClick:c,children:"Entrar"})]})})]})})})};var Ea=F(Da);const ka=()=>{var a;const n=z();return e(Tt,{children:((a=n==null?void 0:n.authStore)==null?void 0:a.isAuthenticated)?d(ue,{children:[e(oa,{}),d(Je,{children:[e(J,{path:"/users/:id",element:e(ya,{})}),e(J,{path:"/projects/:id",element:e(Ca,{})}),e(J,{path:"/projects",element:e(xa,{})}),e(J,{path:"/teams/edit/:id",element:e(ua,{})}),e(J,{path:"/teams/create",element:e(pa,{})}),e(J,{path:"/teams/:id",element:e(ha,{})}),e(J,{path:"/teams",element:e(Sa,{})}),e(J,{path:"/",element:e(ba,{})})]})]}):e(Je,{children:e(J,{path:"/",element:e(Ea,{})})})})};var Pa=F(ka);const $a=Ct({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),ct=({children:n})=>d(Dt,{theme:$a,children:[e(Et,{}),n]});ct.propTypes={children:v.node.isRequired};const Ae=n=>{const{active:a}=n;return a?e("div",{className:"loader",children:e(it,{style:{height:1}})}):null};Ae.propTypes={active:v.bool};Ae.defaultProps={active:!1};const me=new Date,Ia=()=>{const n=z(),[a,t]=g.exports.useState(!1),[r,i]=g.exports.useState(new Date(me.getFullYear(),me.getMonth(),1)),[s,c]=g.exports.useState(new Date(me.getFullYear(),me.getMonth()+1,0)),o=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(r,s),t(!0),await te(n.projectStore.fetchProjectList()),await te(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:d(Ke,{className:"query-date-selector",component:"footer",children:[e("div",{className:"query-date-selector__loader",children:e(Ae,{active:a})}),d(x,{className:"query-date-selector__content",gap:2,children:[e(x,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:1,className:"query-date-selector__date-picker",children:e(kt,{startText:"Start date",endText:"End date",value:[r,s],disabled:a,onChange:([l,p])=>{i(l),c(p)},renderInput:(l,p)=>d(x,{display:"flex",gap:2,style:{width:"100%"},children:[e(W,C(b({},l),{helperText:null,size:"small",fullWidth:!0})),e(W,C(b({},p),{helperText:null,size:"small",fullWidth:!0}))]})})}),e(x,{width:{xs:"100%",sm:"initial"},children:e(R,{fullWidth:!0,variant:"outlined",disabled:a,onClick:o,className:"query-date-selector__bt-search",children:e(Pt,{})})})]})]})};var ja=F(Ia);window.cptable={};const Ua=()=>{const[n,a]=g.exports.useState(null),[t]=q("clockify-api-key"),r=async()=>{const i=Ut({RootStore:ta,env:Vt});a(i),(t==null?void 0:t.length)&&(i.authStore.setAutoLogin(!0),await te(i.authStore.authenticate(t)),i.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{r()},[]),n?e("div",{className:"app",children:e(aa,{value:n,children:e($t,{dateAdapter:It,locale:jt,children:d(ct,{children:[e(Pa,{}),e(ja,{})]})})})}):null};Rt.register(Ft,Bt,Ot,At,Mt,Wt);qt.render(e(Ye.StrictMode,{children:e(Ua,{})}),document.getElementById("root"));
