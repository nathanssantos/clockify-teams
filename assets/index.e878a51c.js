var He=Object.defineProperty,Je=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var Ce=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ye=Object.prototype.propertyIsEnumerable;var oe=(n,r,t)=>r in n?He(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,b=(n,r)=>{for(var t in r||(r={}))Qe.call(r,t)&&oe(n,t,r[t]);if(Ce)for(var t of Ce(r))Ye.call(r,t)&&oe(n,t,r[t]);return n},L=(n,r)=>Je(n,Ke(r));var v=(n,r,t)=>(oe(n,typeof r!="symbol"?r+"":r,t),t);import{a as xe,m as Y,o as y,c as le,b as E,f as H,g as z,d as N,r as g,u as W,j as e,B as x,e as h,h as Ze,S as Ve,i as P,A as ke,C as A,P as S,L as V,k as Pe,l as X,n as $e,I as te,p as he,q as Xe,s as Ie,T as je,t as Re,v as Ge,D as me,w as ue,x as fe,y as pe,z as ge,E as K,F as se,G as re,H as et,J as Ue,K as tt,M as B,N as Fe,O as Oe,_ as j,Q as rt,R as at,U as st,V as O,W as it,X as nt,Y as ot,Z as ce,$ as Be,a0 as lt,a1 as ct,a2 as Ee,a3 as q,a4 as dt,a5 as ht,a6 as mt,a7 as ut,a8 as ft,a9 as pt,aa as gt,ab as _t,ac as St,ad as vt,ae as yt,af as Nt,ag as bt,ah as Lt,ai as wt,aj as Tt,ak as Ct,al as Et}from"./vendor.a45dee37.js";const Dt=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}};Dt();const xt="https://api.clockify.me/api/v1",kt="https://reports.api.clockify.me/",Pt=xe.create({baseURL:xt,timeout:1e4}),Ae=xe.create({baseURL:kt,timeout:1e4}),J=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},s=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(s))}];class ie{constructor(r){v(this,"id",null);v(this,"name",null);v(this,"email",null);v(this,"defaultWorkspace",null);v(this,"profilePicture",null);v(this,"timeEntries",[]);v(this,"timeEntriesByDay",[]);v(this,"teams",[]);v(this,"hours",null);v(this,"warnings",{});if(Y(this,{id:y,name:y,email:y,defaultWorkspace:y,profilePicture:y,timeEntries:y,timeEntriesByDay:y,teams:y,hours:y,warnings:y}),r==null||r.id==null)throw new Error("Invalid user constructor");const{id:t,name:s,email:i,defaultWorkspace:a,profilePicture:c,timeEntries:o,timeEntriesByDay:l,teams:f,hours:u,warnings:_}=r;this.id=t,this.name=s||"",this.email=i||"",this.defaultWorkspace=a||"",this.profilePicture=c||"",this.timeEntries=o||[],this.timeEntriesByDay=l||[],this.teams=f||[],this.hours=u||0,this.warnings=_||{}}static fromApi({id:r,name:t,email:s,defaultWorkspace:i,profilePicture:a,timeEntries:c,timeEntriesByDay:o,teams:l,hours:f,warnings:u}={}){return new ie({id:r,name:t,email:s,defaultWorkspace:i,profilePicture:a,timeEntries:c,timeEntriesByDay:o,teams:l,hours:f,warnings:u})}}class $t{constructor(){v(this,"user",null);v(this,"authStatus","unauthenticated");v(this,"autoLogin",!1);v(this,"fetchDataLog",[]);Y(this,{user:y,authStatus:y,autoLogin:y,fetchDataLog:y,isAuthenticated:le,isConfirmingIdentity:le,isUnauthenticated:le,setUser:E.bound,confirmIdentity:E.bound,unauthenticate:E.bound,setAutoLogin:E.bound,feedFetchDataLog:E.bound,setStatusConfirmingIdentity:E.bound,clearDataLog:E.bound,authenticate:H})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(r){this.user=ie.fromApi(r)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(r){this.autoLogin=r}feedFetchDataLog(r,t){let s="";switch(t){case"success":{s="#27ae60";break}case"error":{s="#c0392b";break}default:{s="#ffffff";break}}typeof r=="string"&&r.length&&this.fetchDataLog.push({text:r,color:s})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,z().defaults.headers.common["X-Api-Key"]=null}*authenticate(r){try{const[,t]=J("clockify-api-key");z().defaults.headers.common["X-Api-Key"]=r,Ae.defaults.headers.common["X-Api-Key"]=r,t(r);const s=yield z().get("/user");return(s==null?void 0:s.status)!==200?(alert("Invalid Clockify API Key"),!1):(s==null?void 0:s.data)?(this.setUser(s.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const It=n=>{let r=n;r=r*60*60;let t=Math.floor(r/(60*60));r-=t*60*60;let s=Math.floor(r/60);return r-=s*60,t<10&&(t=`0${t}`),s<10&&(s=`0${s}`),`${t}:${s}`},De=n=>{try{const r=new Date(n).toISOString().split("T");if(r==null?void 0:r.length){const t=r[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(r){return console.log(r),null}},de=n=>{try{const r=n==null?void 0:n.split("T");if(r==null?void 0:r.length){const t=r[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(r){return console.log(r),null}},Z=n=>{try{const r=n==null?void 0:n.split("H");let t=0,s=0;return(r==null?void 0:r.length)?((r==null?void 0:r.length)===2?(t=Number(r[0].split("PT")[1])||0,s=Number(r[1].split("M")[0])||0):r[0]!=="PT0S"&&(s=Number(r[0].replace("PT","").replace("M",""))),Number(t+s/60)):null}catch(r){return console.log(r),null}},jt=n=>n.replace(/[^\w\s]/gi,""),ae={NO_PROJECT:"Time entry without project",NO_DESCRIPTION:"Time entry without description",TIME_LIMIT:"Time entry longer than 6 hours"};class Rt{constructor(){v(this,"userList",[]);v(this,"queryStartDate",null);v(this,"queryEndDate",null);Y(this,{userList:y,queryStartDate:y,queryEndDate:y,setUserList:E.bound,formatUserData:E.bound,getUsersTeams:E.bound,fetchUserList:H,fetchUserTimeEntries:H,fetchUserSummaryReport:H,sendReports:H,sendReport:H})}setUserList(r=[]){this.userList=r.map(t=>ie.fromApi(t))}setQueryDate(r,t){this.queryStartDate=r,this.queryEndDate=t}*fetchUserTimeEntries(r={}){const{id:t,name:s,pageSize:i=5e3}=r,{NO_DESCRIPTION:a,NO_PROJECT:c,TIME_LIMIT:o}=ae;try{N().authStore.feedFetchDataLog(`fetching user ${s} time entries...`);const{defaultWorkspace:l}=N().authStore.user,f=yield z().get(`/workspaces/${l}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":i}});if(f.status!==200)return N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1;if(f==null?void 0:f.data){let u=0;const _={};Object.keys(ae).forEach(m=>{_[m]=0});const T=f.data.map(m=>{var k,$,I;const w=(k=m==null?void 0:m.timeInterval)==null?void 0:k.duration,d=L(b({},m),{warnings:[]});if((($=m==null?void 0:m.projectId)==null?void 0:$.length)||(d.warnings.push(c),_.NO_PROJECT++),((I=m==null?void 0:m.description)==null?void 0:I.length)||(d.warnings.push(a),_.NO_DESCRIPTION++),w==null?void 0:w.length){const M=Z(w);M&&(u+=M,M>=6&&(d.warnings.push(o),_.TIME_LIMIT++))}return d});return N().authStore.feedFetchDataLog(`fetch user ${s} time entries success`,"success"),{timeEntries:T,hours:u,warnings:_}}return N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}catch(l){return console.log(l),N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}}formatUserData(r){var t,s;try{let i=[];for(const a of r.timeEntries){const c=(t=a==null?void 0:a.timeInterval)==null?void 0:t.duration,o=(s=a==null?void 0:a.timeInterval)==null?void 0:s.start,l=N().projectStore.projectList.find(({id:u})=>u===(a==null?void 0:a.projectId)),f=i.find(u=>u.date===de(o));(c==null?void 0:c.length)&&(o==null?void 0:o.length)&&(f?i=i.map(u=>u.date===de(o)?{date:u.date,timeEntries:[...u.timeEntries,L(b({},a),{project:l||{name:"Without project",color:"#ffffff"}})],hours:u.hours+Z(c)}:u):i.push({date:de(o),timeEntries:[L(b({},a),{project:l||{name:"Without project",color:"#ffffff"}})],hours:Z(c)}))}return L(b({},r),{timeEntriesByDay:i})}catch(i){return console.log(i),!1}}getUsersTeams(){const r=[];for(const t of this.userList){const s=[];for(const i of N().teamStore.teamList)for(const a of i.users)a.id===t.id&&s.push(i);r.push(L(b({},t),{teams:s}))}this.setUserList(r)}*fetchUserList(r={}){var t;try{N().authStore.feedFetchDataLog("fetching user list...");const{pageSize:s=5e3}=r,{defaultWorkspace:i}=N().authStore.user,a=yield z().get(`/workspaces/${i}/users`,{params:{"page-size":s,status:"ACTIVE"}});if(a.status!==200)return N().authStore.feedFetchDataLog("fetch user list error","error"),!1;if((t=a==null?void 0:a.data)==null?void 0:t.length){N().authStore.feedFetchDataLog("fetch user list success","success");const c=[];for(const o of a.data){const l=yield this.fetchUserTimeEntries(o);if(l){const f=this.formatUserData(b(b({},o),l));c.push(f)}}if(c.length)return this.setUserList(c),N().authStore.feedFetchDataLog("fetch all users time entries success","success"),!0}return N().authStore.feedFetchDataLog("fetch user list error","error"),!1}catch(s){return console.log(s),N().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*fetchUserSummaryReport(r){try{const{defaultWorkspace:t}=N().authStore.user,s=yield Ae.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[r.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),a=`${r.name.toLowerCase().split(" ").map(o=>jt(o)).join("-")}__from_${De(this.queryStartDate)}_to_${De(this.queryEndDate)}`,c=new Blob([s.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(c,a);else{const o=document.createElement("a"),l=document.querySelector("body");o.href=window.URL.createObjectURL(c),o.download=a,o.style.display="none",l.appendChild(o),o.click(),l.removeChild(o),window.URL.revokeObjectURL(o.href)}return!1}catch(t){return console.log(t),N().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*sendReports(r={}){try{const{collaborator_ids:t}=r;return(yield z().post("/send-reports",{collaborator_ids:t})).status===200}catch(t){return console.log(t),!1}}*sendReport(r={}){try{const{collaborator_id:t}=r;return(yield z().post("/send-reports",{collaborator_ids:[t]})).status===200}catch(t){return console.log(t),!1}}}class _e{constructor(r){v(this,"id",null);v(this,"name",null);v(this,"email",null);v(this,"workspaceId",null);v(this,"color",null);v(this,"duration",null);v(this,"estimate",null);v(this,"users",[]);v(this,"timeEntriesByUser",[]);if(Y(this,{id:y,name:y,email:y,workspaceId:y,color:y,duration:y,estimate:y,users:y,timeEntriesByUser:y}),r==null||r.id==null)throw new Error("Invalid Project constructor");const{id:t,name:s,email:i,workspaceId:a,color:c,duration:o,estimate:l,users:f,timeEntriesByUser:u}=r;this.id=t,this.name=s||"",this.email=i||"",this.workspaceId=a||"",this.color=c||"",this.duration=o||"",this.estimate=l||"",this.users=f||[],this.timeEntriesByUser=u||[]}static fromApi({id:r,name:t,email:s,workspaceId:i,color:a,duration:c,estimate:o,users:l,timeEntriesByUser:f}={}){return new _e({id:r,name:t,email:s,workspaceId:i,color:a,duration:c,estimate:o,users:l,timeEntriesByUser:f})}}class Ut{constructor(){v(this,"projectList",[]);Y(this,{projectList:y,setProjectList:E.bound,formatProjectData:E.bound,formatProjectList:E.bound,fetchProjectList:H})}setProjectList(r=[]){this.projectList=r.map(t=>_e.fromApi(t))}formatProjectData(r={}){var t;try{const{id:s}=r;let i=[];for(const a of N().userStore.userList){const c=a.timeEntries.filter(o=>o.projectId===s);for(const o of c){const l=i.find(_=>_.id===o.userId);let f=0;const u=(t=o==null?void 0:o.timeInterval)==null?void 0:t.duration;(u==null?void 0:u.length)&&(f+=Z(u)),l?i=i.map(_=>_.id===o.userId?L(b({},_),{timeEntries:[..._.timeEntries,o],hours:_.hours+f}):_):i.push(L(b({},a),{timeEntries:[o],hours:f}))}}return L(b({},r),{timeEntriesByUser:i})}catch(s){return console.log(s),!1}}formatProjectList(){const r=[];for(const t of this.projectList){const s=this.formatProjectData(t);r.push(s)}this.setProjectList(r)}*fetchProjectList(r={}){var t;try{N().authStore.feedFetchDataLog("fetching project list...");const{pageSize:s=5e3}=r,{defaultWorkspace:i}=N().authStore.user,a=yield z().get(`/workspaces/${i}/projects`,{params:{archived:!1,"page-size":s}});return a.status!==200?(N().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=a==null?void 0:a.data)==null?void 0:t.length)?(this.setProjectList(a.data),N().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(s){return console.log(s),N().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class Se{constructor(r){v(this,"id",null);v(this,"name",null);v(this,"image",null);v(this,"users",[]);v(this,"timeEntriesByProject",[]);if(Y(this,{id:y,name:y,image:y,users:y,timeEntriesByProject:y}),r==null||r.id==null)throw new Error("Invalid Team constructor");const{id:t,name:s,image:i,users:a,timeEntriesByProject:c}=r;this.id=t,this.name=s||"",this.image=i||"",this.users=a||[],this.timeEntriesByProject=c||[]}static fromApi({id:r,name:t,image:s,users:i,timeEntriesByProject:a}={}){return new Se({id:r,name:t,image:s,users:i,timeEntriesByProject:a})}}class Ft{constructor(){v(this,"teamList",[]);Y(this,{teamList:y,setTeamList:E.bound,createTeam:E.bound,editTeam:E.bound,fetchTeamList:E.bound,formatTeamData:E.bound})}createTeam(r={}){try{const{users:t}=r,[s,i]=J("team-list"),a=s||[];let c=1;return a.length?(c=a.length+1,i([...a,L(b({},r),{id:c,users:t.map(o=>o.id)})])):i([L(b({},r),{id:1,users:t.map(o=>o.id)})]),c}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(r,t={}){try{const[s,i]=J("team-list"),{users:a}=t;return i(s.map(c=>c.id===r?L(b(b({},c),c),{users:a.map(o=>o.id)}):c)),r}catch(s){return console.log(s),!1}finally{this.fetchTeamList()}}removeTeam(r={}){try{const[t,s]=J("team-list"),i=t.filter(a=>a.id!==r.id);s(i),this.setTeamList(i.map(a=>L(b({},a),{users:N().userStore.userList.filter(c=>a.users.includes(c.id))})))}catch(t){console.log(t)}}setTeamList(r=[]){this.teamList=r.map(t=>Se.fromApi(t))}fetchTeamList(){try{N().authStore.feedFetchDataLog("fetching team list...");const[r]=J("team-list");if(r.length){const t=[];for(const s of r){const i=this.formatTeamData(s);t.push(L(b({},i),{users:N().userStore.userList.filter(a=>s.users.includes(a.id))}))}this.setTeamList(t),N().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(r){return console.log(r),N().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(r={}){var t;try{const s=[];let i=[];for(const c of r.users){const o=N().userStore.userList.find(l=>l.id===c);if(o){const{timeEntries:l,hours:f}=o;for(const _ of l){const T=i.find(d=>d.id===_.projectId);let m=0;const w=(t=_==null?void 0:_.timeInterval)==null?void 0:t.duration;(w==null?void 0:w.length)&&(m+=Z(w)),T?i=i.map(d=>d.id===_.projectId?L(b({},d),{id:_.projectId,timeEntries:[...d.timeEntries,_],hours:d.hours+m}):d):i.push({id:_.projectId,timeEntries:[_],hours:m})}const u=N().userStore.userList.find(_=>_.id===c.id);s.push(L(b({},u),{timeEntries:l,hours:f}))}}let a=0;for(const c of i){if(c.id){const o=N().projectStore.projectList.find(l=>l.id===c.id);o&&(i[a]=L(b({},i[a]),{name:o.name,color:o.color}))}else i[a]=L(b({},i[a]),{name:"Without project",color:"#ffffff"});a++}return L(b({},r),{users:s,timeEntriesByProject:i})}catch(s){return console.log(s),!1}}}class Ot{constructor(){v(this,"authStore",null);v(this,"userStore",null);v(this,"projectStore",null);v(this,"teamStore",null)}init(){this.authStore=new $t,this.userStore=new Rt,this.projectStore=new Ut,this.teamStore=new Ft}}const Me=g.exports.createContext({}),Bt=Me.Provider,F=()=>g.exports.useContext(Me);const At=[{route:"/",label:"Collaborators"},{route:"/teams",label:"Teams"},{route:"/projects",label:"Projects"}],qe=({vertical:n,drawer:r})=>{const t=W(),s=i=>{t(i),r&&r.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:At.map(i=>e("li",{className:"menu__list__item",children:e(x,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>s(i.route),children:i.label})},i.route))})})};const Mt=()=>{const[n,r]=g.exports.useState(!1),t=()=>{r(!0)},s=()=>{r(!1)};return h("div",{className:"drawer",children:[e(x,{onClick:t,children:e(Ze,{color:"primary"})}),e(Ve,{anchor:"right",open:n,onClose:s,onOpen:t,children:e("div",{className:"drawer__content",children:e(qe,{vertical:!0,drawer:{close:s}})})})]})};const qt=()=>e("div",{className:"logo",children:"Clockify Teams"});const Wt=()=>e(ke,{className:"header",position:"sticky",children:e(A,{maxWidth:"lg",children:h("div",{className:"header__content",children:[e(qt,{}),e("div",{className:"header__menu",children:e(qe,{})}),e("div",{className:"header__drawer",children:e(Mt,{})})]})})});var zt=P(Wt);const ve=n=>{var M;const r=F(),{hours:t,warnings:s,error:i,success:a,user:c,pdf:o}=n,[l,f]=g.exports.useState(!1),[u,_]=g.exports.useState(!1),[T,m]=g.exports.useState(!1),[w,d]=g.exports.useState("idle"),k=async()=>{f(!0),await K(r.userStore.fetchUserSummaryReport(c)),f(!1)},$=()=>{if(a)return"#2ecc71";if(i)return"#f44336";switch(w){case"success":return"#2ecc71";case"error":return"#f44336";default:return"#fff"}},I=async()=>{try{if(m(!1),_(!0),(await K(r.userStore.sendReport({collaborator_id:c.id}))).error){d("error");return}d("success")}catch(R){console.log(R)}finally{_(!1)}};return h("div",{className:"user__meta",children:[h("div",{className:"user__meta__item",style:{color:t>=200?"#f44336":"#ffffff"},children:[It(t)," \u2022 ",t.toFixed(2),e($e,{color:t>=200?"error":""})]}),e("div",{className:"user__meta__item",style:{color:$()},children:o?e(te,{onClick:k,disabled:l,children:l?e(he,{style:{width:20,height:20}}):e(Xe,{})}):null}),e("div",{className:"user__meta__item",style:{color:$()},children:e(te,{onClick:m,disabled:u,children:u?e(he,{style:{width:20,height:20}}):e(Ie,{})})}),((M=Object.entries(s).filter(([,R])=>R>0))==null?void 0:M.length)?e(je,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(s).filter(([,R])=>R>0).map(([R,p])=>e("li",{className:"warning-list__item",children:`${p}x ${ae[R]}`},ae[R]))}),children:e("div",{className:"user__meta__item warning",children:e(Re,{color:s.NO_PROJECT>0||s.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(Ge,{color:"secondary"})}),h(me,{open:T,onClose:()=>m(!1),children:[e(ue,{children:"Report"}),e(fe,{children:e(pe,{children:`Send report to "${c.email}"?`})}),h(ge,{children:[e(x,{autoFocus:!0,onClick:()=>m(!1),color:"primary",children:"Cancel"}),e(x,{onClick:I,color:"primary",children:"Confirm"})]})]})]})};ve.propTypes={hours:S.number.isRequired,user:S.instanceOf(Object).isRequired,pdf:S.bool,warnings:S.instanceOf(Object).isRequired,error:S.bool,success:S.bool};ve.defaultProps={pdf:!1,error:!1,success:!1};const ye=n=>{const{id:r,name:t,lastName:s,profilePicture:i,email:a,showMeta:c,pdf:o,disabled:l,hours:f,warnings:u,error:_,success:T,checked:m,onCheck:w}=n,d=W();return h(V,{className:"user",children:[e("div",{className:"user__checkbox",children:e(Pe,{checked:m,onChange:k=>w(k.target.checked),color:"primary"})}),h("div",{className:"user__pressable",onClick:()=>l?null:d(`/users/${r}`),style:{pointerEvents:l?"none":"initial"},children:[e(X,{alt:t,src:i,className:"user__avatar"}),h("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:a})]})]}),c?e(ve,{pdf:o,hours:f,warnings:u,user:{id:r,name:t,lastName:s,email:a},error:_,success:T}):null]})};ye.propTypes={id:S.oneOfType([S.number,S.string]),name:S.string,lastName:S.string,profilePicture:S.string,email:S.string,showMeta:S.bool,pdf:S.bool,disabled:S.bool,hours:S.number,warnings:S.instanceOf(Object),checked:S.bool,error:S.bool,success:S.bool,onCheck:S.func};ye.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null,checked:!1,success:!1,error:!1,onCheck:()=>""};var Q=P(ye);const Ht=()=>{var f;const n=F(),r=se(),t=W(),[s,i]=g.exports.useState(!1),a=n.teamStore.teamList.find(({id:u})=>u===Number(r.id)),c=()=>{i(!0)},o=()=>{i(!1)},l=()=>{n.teamStore.removeTeam(a),o(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),a?h(re,{children:[h("div",{className:"screen team-detail",children:[h(A,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[h("div",{className:"screen__header__left",children:[e(X,{alt:a==null?void 0:a.name,src:a==null?void 0:a.image,className:"team-detail__avatar"}),e("h2",{children:a==null?void 0:a.name})]}),e("div",{className:"screen__header__right",children:e(x,{onClick:c,children:e(et,{})})})]}),e("main",{children:h("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Team collaborators"})}),((f=a==null?void 0:a.users)==null?void 0:f.length)?a.users.map(u=>e(Q,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours,warnings:u==null?void 0:u.warnings,showMeta:!0},u.id)):null]})})]}),e(Ue,{className:"team-detail__edit-team",color:"primary","aria-label":"Edit team",onClick:()=>{t(`/teams/edit/${a.id}`)},children:e(tt,{})})]}),h(me,{open:s,onClose:o,children:[e(ue,{children:`Delete team ${a.name}`}),e(fe,{children:e(pe,{children:`Are you sure you want to delete "${a.name}" team?`})}),h(ge,{children:[e(x,{autoFocus:!0,onClick:o,color:"primary",children:"Cancel"}),e(x,{onClick:l,color:"primary",children:"Confirm"})]})]})]}):null};var Jt=P(Ht);const Ne=n=>{const{id:r,name:t,image:s,avatarSize:i,fontSize:a,disabled:c,card:o}=n,l=W();return o?h(V,{className:"team card",button:!c,onClick:()=>c?null:l(`/teams/${r}`),children:[s.length?e("img",{className:"team__image",src:s,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:a},children:t})})]}):h(V,{className:"team",button:!c,onClick:()=>c?null:l(`/teams/${r}`),children:[e(X,{alt:t,src:s,className:"team__avatar",style:{width:i,height:i}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:a},children:t})})]})};Ne.propTypes={id:S.number.isRequired,name:S.string,image:S.string,avatarSize:S.number,fontSize:S.number,disabled:S.bool,card:S.bool};Ne.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var ne=P(Ne);const Kt=()=>{const n=F(),r=se(),t=W(),s=n.teamStore.teamList.find(d=>d.id===Number(r.id)),[i,a]=g.exports.useState(""),[c,o]=g.exports.useState(""),[l,f]=g.exports.useState([]),[u,_]=g.exports.useState([]),T=(d,k,$)=>{f(j.sortBy(k.filter(I=>I.id!==d.id),"name")),_(j.sortBy([...$,d],"name"))},m=(d,k,$)=>{_(j.sortBy($.filter(I=>I.id!==d.id),"name")),f(j.sortBy([...k,d],"name"))},w=async()=>{const d=await n.teamStore.editTeam(s.id,{name:i,image:c,users:u});t(`/teams/${d}`),d&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{a(s.name),o(s.image),_(s.users);const d=[...n.userStore.userList];s.users.forEach(k=>{d.forEach(($,I)=>{$.id===k.id&&d.splice(I,1)})}),f(d)},[s]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:h(A,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Edit team ${s.name}`})}),h("main",{children:[h("div",{className:"create-team__form",children:[h("div",{className:"create-team__form__content",children:[e(B,{id:"team-name",label:"Name",value:i,onChange:d=>{a(d.target.value)}}),e(B,{id:"team-image",label:"Image",value:c,onChange:d=>{o(d.target.value)}}),(i==null?void 0:i.length)||(c==null?void 0:c.length)?e("div",{className:"screen__header__preview",children:e(ne,{name:i,image:c,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(x,{variant:"outlined",onClick:w,children:"Salvar"})]}),h("div",{className:"create-team__user-lists",children:[h("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),l.map(d=>h("div",{className:"user-list__item",children:[e(Q,{id:d.id,profilePicture:d==null?void 0:d.profilePicture,name:d==null?void 0:d.name,email:d==null?void 0:d.email,hours:d==null?void 0:d.hours},d.id),e(x,{className:"user-list__item__bt-add",onClick:()=>T(d,l,u),children:e(Fe,{})})]},d.id))]}),h("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),u.map(d=>h("div",{className:"user-list__item",children:[e(x,{className:"user-list__item__bt-add",onClick:()=>m(d,l,u),children:e(Oe,{})}),e(Q,{id:d.id,profilePicture:d==null?void 0:d.profilePicture,name:d==null?void 0:d.name,email:d==null?void 0:d.email,hours:d==null?void 0:d.hours})]},d.id))]})]})]})]})})};var Qt=P(Kt);const Yt=()=>{const n=F(),r=W(),[t,s]=g.exports.useState(""),[i,a]=g.exports.useState(""),[c,o]=g.exports.useState([]),[l,f]=g.exports.useState([]),u=m=>{o(j.sortBy(c.filter(w=>w.id!==m.id),"name")),f(j.sortBy([...l,m],"name"))},_=m=>{f(j.sortBy(l.filter(w=>w.id!==m.id),"name")),o(j.sortBy([...c,m],"name"))},T=async()=>{const m=n.teamStore.createTeam({name:t,image:i,users:l});n.teamStore.fetchTeamList(),r(`/teams/${m}`),m&&alert(`Team ${t} created.`)};return g.exports.useEffect(()=>{o(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:h(A,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Create team"})}),h("main",{children:[h("div",{className:"create-team__form",children:[h("div",{className:"create-team__form__content",children:[e(B,{id:"team-name",label:"Name",value:t,onChange:m=>{s(m.target.value)}}),e(B,{id:"team-image",label:"Image",value:i,onChange:m=>{a(m.target.value)}}),(t==null?void 0:t.length)||(i==null?void 0:i.length)?e("div",{className:"screen__header__preview",children:e(ne,{name:t,image:i,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(x,{variant:"outlined",onClick:T,children:"Create"})]}),h("div",{className:"create-team__user-lists",children:[h("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),c.map(m=>h("div",{className:"user-list__item",children:[e(Q,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours},m.id),e(x,{className:"user-list__item__bt-add",onClick:()=>u(m),children:e(Fe,{})})]},m.id))]}),h("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),l.map(m=>h("div",{className:"user-list__item",children:[e(x,{className:"user-list__item__bt-add",onClick:()=>_(m),children:e(Oe,{})}),e(Q,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours})]},m.id))]})]})]})]})})};var Zt=P(Yt);const Vt=()=>{var c,o;const n=F(),r=W(),[t,s]=g.exports.useState(""),[i,a]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){a(n.teamStore.teamList.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())));return}a(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{a(n.teamStore.teamList),window.scrollTo(0,0)},[]),h("div",{className:"screen teams",children:[h(A,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[e("h2",{children:"Teams"}),e("div",{className:"screen__header__right",children:((o=(c=n==null?void 0:n.teamStore)==null?void 0:c.teamList)==null?void 0:o.length)?e(B,{id:"filter-term",label:"Filter",size:"small",value:t,onChange:l=>{s(l.target.value)}}):null})]}),e("main",{children:(i==null?void 0:i.length)?i.map(l=>e(ne,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id)):e("div",{children:"No teams found."})})]}),e(Ue,{className:"teams__create-team",color:"primary","aria-label":"Create team",onClick:()=>{r("/teams/create")},children:e(rt,{})})]})};var Xt=P(Vt);const be=n=>{const{project:r,time:t,description:s,disabled:i,showMeta:a,warnings:c}=n,o=W();return h(V,{button:!i,className:"time-entry",style:{borderColor:r.color},children:[h("div",{className:"time-entry__pressable",onClick:()=>r.id?o(`/projects/${r.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:r.name})}),h("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:r.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:s})]})]}),a&&(c==null?void 0:c.length)?e("div",{className:"time-entry__meta",children:e(je,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:c.map(l=>e("li",{className:"warning-list__item",children:l}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(Re,{color:c.length===1&&c[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};be.propTypes={project:S.instanceOf(Object),time:S.string,description:S.string,disabled:S.bool,showMeta:S.bool,warnings:S.arrayOf(S.instanceOf(Object))};be.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var Gt=P(be);const er=()=>{var o;const n=F(),r=se(),t=n.userStore.userList.find(({id:l})=>l===r.id),[s,i]=g.exports.useState([]),[a,c]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(a){i(t.timeEntriesByDay.filter(l=>l.timeEntries.find(f=>{var u;return(u=f==null?void 0:f.warnings)==null?void 0:u.length})).map(l=>L(b({},l),{timeEntries:l.timeEntries.filter(f=>{var u;return(u=f==null?void 0:f.warnings)==null?void 0:u.length})})));return}i(t.timeEntriesByDay)},[a]),g.exports.useEffect(()=>{i(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:h(A,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[h("div",{className:"screen__header__left",children:[e(X,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),h("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e($e,{color:t.hours>=200?"error":""})]})]}),h("main",{children:[(t==null?void 0:t.teams.length)?h("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Collaborator teams"})}),t.teams.map(l=>e(ne,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id))]}):null,((o=t==null?void 0:t.timeEntries)==null?void 0:o.length)?h("div",{className:"time-entries",children:[h("header",{className:"section-header",children:[e("h3",{children:"Time entries"}),e("div",{className:"time-entries__filter",children:e(at,{control:e(st,{checked:a,onChange:()=>c(!a),name:"filterWarnings",color:"primary"}),label:"Filter warnings"})})]}),(s==null?void 0:s.length)?s.map(l=>h("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:l.date})}),e("div",{className:"description",children:l.timeEntries.map(f=>{var u;return e(Gt,{disabled:!((u=f==null?void 0:f.project)==null?void 0:u.id),project:f.project,time:f.timeInterval.duration,description:f.description,warnings:f.warnings,showMeta:!0},f.id)})})]},l.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var tr=P(er);const rr=()=>{var $,I,M,R;const n=F(),[r,t]=g.exports.useState(""),[s,i]=g.exports.useState([]),[a,c]=g.exports.useState("name"),[o,l]=g.exports.useState([]),[f,u]=g.exports.useState(!1),[_,T]=g.exports.useState(!1),m=async p=>{try{if(u(!0),l(D=>D.map(U=>p.map(({id:G})=>G).includes(U.id)?L(b({},U),{requesting:!0}):U)),(await K(n.userStore.sendReports({collaborator_ids:p.map(({id:D})=>D)}))).error)return}catch(C){console.log(C)}finally{u(!1),l(C=>C.map(D=>p.map(({id:U})=>U).includes(D.id)?L(b({},D),{requesting:!1}):D))}},w=async()=>{try{u(!0),T(!1);const p=s.filter((C,D)=>o[D].checked&&!o[D].requesting);await m(p)}catch(p){console.log(p)}finally{u(!1)}},d=(p,C)=>{l(D=>D.map(U=>U.id===p?L(b({},U),{checked:C}):U))},k=p=>{l(C=>C.map(D=>L(b({},D),{checked:p})))};return g.exports.useEffect(()=>{const p=a==="hours"?"desc":"asc";if(r.length){i(j.orderBy(n.userStore.userList.filter(C=>C.name.toLowerCase().includes(r.toLowerCase())),a,p));return}i(j.orderBy(n.userStore.userList,a,p))},[r]),g.exports.useEffect(()=>{const p=a==="hours"?"desc":"asc";i(C=>j.orderBy(C,a,p))},[a]),g.exports.useEffect(()=>{i(j.orderBy(n.userStore.userList,a)),l(j.orderBy(n.userStore.userList,a).map(({id:p})=>({id:p,checked:!1,requesting:!1,error:!1,sent:!1}))),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:h(A,{maxWidth:"lg",children:[h(O,{component:"header",className:"screen__header",sx:{flexDirection:{sm:"column"},alignItems:{sm:"flex-start"}},children:[e("h2",{children:"Collaborators"}),h(O,{className:"screen__header__content",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:1},children:[h(O,{sx:{display:"flex",alignItems:"center",gap:1,marginLeft:1},children:[e(Pe,{checked:!o.find(p=>p.checked===!1),onChange:p=>k(p.target.checked),color:"primary",disabled:f}),o.filter(p=>p.checked).length?e("div",{className:"screen__header__content__item",children:e(te,{onClick:()=>T(!0),disabled:f,children:f?e(he,{style:{width:20,height:20}}):e(Ie,{})})}):null]}),h(O,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((I=($=n==null?void 0:n.userStore)==null?void 0:$.userList)==null?void 0:I.length)?e(O,{flex:{xs:2},children:h(it,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(nt,{id:"order-by-label",children:"Order by"}),h(ot,{labelId:"order-by-label",id:"order-by",value:a,label:"Order by",onChange:p=>c(p.target.value),size:"small",children:[e(ce,{value:"name",children:"Name"}),e(ce,{value:"email",children:"E-mail"}),e(ce,{value:"hours",children:"Workload"})]})]})}):null,((R=(M=n==null?void 0:n.userStore)==null?void 0:M.userList)==null?void 0:R.length)?e(O,{flex:"3",children:e(B,{fullWidth:!0,id:"filter-term",label:"Filter",size:"small",value:r,onChange:p=>{t(p.target.value)}})}):null]})]})]}),e("main",{children:(s==null?void 0:s.length)?s.map((p,C)=>{var D,U,G,Te;return e(Q,{id:p.id,profilePicture:p==null?void 0:p.profilePicture,name:p==null?void 0:p.name,lastName:p==null?void 0:p.lastName,email:p==null?void 0:p.email,hours:p==null?void 0:p.hours,payment:p==null?void 0:p.payment,warnings:p==null?void 0:p.warnings,checked:(D=o[C])==null?void 0:D.checked,requesting:(U=o[C])==null?void 0:U.requesting,error:(G=o[C])==null?void 0:G.error,success:(Te=o[C])==null?void 0:Te.success,onCheck:ze=>d(p.id,ze),showMeta:!0,pdf:!0},p.id)}):e("div",{children:"No collaborators found."})}),h(me,{open:_,onClose:()=>T(!1),children:[e(ue,{children:"Report"}),e(fe,{children:e(pe,{children:` Send report to ${o.filter(p=>p.checked).length} collaborators?`})}),h(ge,{children:[e(x,{autoFocus:!0,onClick:()=>T(!1),color:"primary",children:"Cancel"}),e(x,{onClick:w,color:"primary",children:"Confirm"})]})]})]})})};var ar=P(rr);const Le=n=>{const{id:r,index:t,name:s,color:i,disabled:a=!1}=n,[c,o]=g.exports.useState(!1),l=W();return g.exports.useEffect(()=>{const f=setTimeout(()=>{o(!0)},t*50+100);return()=>{clearTimeout(f)}},[]),e(V,{button:!a,onClick:()=>a?null:l(`/projects/${r}`),className:"project",style:{borderColor:c?i:"transparent"},children:e("div",{className:"project__name",children:s})})};Le.propTypes={id:S.string.isRequired,index:S.number.isRequired,name:S.string,color:S.string,disabled:S.bool};Le.defaultProps={name:"",color:"",disabled:!1};var sr=P(Le);const ir=()=>{var a,c;const n=F(),[r,t]=g.exports.useState(""),[s,i]=g.exports.useState([]);return g.exports.useEffect(()=>{if(r.length){i(n.projectStore.projectList.filter(o=>o.name.toLowerCase().includes(r.toLowerCase())));return}i(n.projectStore.projectList)},[r]),g.exports.useEffect(()=>{i(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:h(A,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[e("h2",{children:"Projects"}),((c=(a=n==null?void 0:n.projectStore)==null?void 0:a.projectList)==null?void 0:c.length)?e(B,{id:"filter-term",label:"Filter",size:"small",value:r,onChange:o=>{t(o.target.value)}}):null]}),e("main",{children:(s==null?void 0:s.length)?s.map((o,l)=>e(sr,{id:o.id,color:o==null?void 0:o.color,name:o==null?void 0:o.name,index:l},o.id)):e("div",{children:"No projects found."})})]})})};var nr=P(ir);const or=()=>{var s,i;const n=F(),r=se(),t=n.projectStore.projectList.find(({id:a})=>a===r.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:h(A,{maxWidth:"lg",children:[h("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:e("div",{className:"project-detail__estimate",children:e("div",{children:`Total: ${Z(t==null?void 0:t.duration).toFixed(2)} hours`})})})]}),h("main",{children:[((s=t==null?void 0:t.timeEntriesByUser)==null?void 0:s.length)?h("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Project collaborators"})}),t.timeEntriesByUser.map(a=>e(Q,{id:a.id,profilePicture:a==null?void 0:a.profilePicture,name:a==null?void 0:a.name,email:a==null?void 0:a.email,hours:a==null?void 0:a.hours},a.id))]}):null,((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?null:e("div",{children:"No time entries found."})]})]})}):null};var lr=P(or);const cr=()=>{var o,l,f,u,_,T,m,w;const n=F(),[r,t]=g.exports.useState(""),[s,i]=g.exports.useState(!1),[a]=J("clockify-api-key"),c=async()=>{i(!0),await K(n.authStore.authenticate(r)),i(!1)};return g.exports.useEffect(()=>{const d=document.querySelector(".login .fetch-data-log");d&&(d.scrollTop=d.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(a==null?void 0:a.length)&&t(a)},[]),e("div",{className:"screen login",children:e(A,{maxWidth:"lg",className:"login__container",children:h(O,{position:"relative",children:[e("h1",{children:"Clockify Teams"}),e("div",{className:"login__box",children:n.authStore.isConfirmingIdentity?h(re,{children:[h("div",{className:"login__user",children:[e(X,{alt:(l=(o=n==null?void 0:n.authStore)==null?void 0:o.user)==null?void 0:l.name,src:(u=(f=n==null?void 0:n.authStore)==null?void 0:f.user)==null?void 0:u.profilePicture,className:"login__user__avatar"}),h("div",{className:"login__user__profile",children:[e("div",{className:"login__user__name",children:(T=(_=n==null?void 0:n.authStore)==null?void 0:_.user)==null?void 0:T.name}),e("div",{className:"login__user__email",children:(w=(m=n==null?void 0:n.authStore)==null?void 0:m.user)==null?void 0:w.email})]}),e("div",{className:"login__user__logout",children:e(te,{onClick:n.authStore.unauthenticate,children:e(lt,{})})})]}),e("div",{className:"fetch-data-log",children:n.authStore.fetchDataLog.map(({text:d,color:k})=>e("div",{style:{color:k},children:d},d))})]}):h(re,{children:[n.authStore.autoLogin?null:e(B,{id:"api-key",label:"Clockify API Key",value:r,onChange:d=>{t(d.target.value)}}),s||n.authStore.autoLogin?e(Be,{}):e(x,{variant:"outlined",onClick:c,children:"Entrar"})]})})]})})})};var dr=P(cr);const hr=()=>{var r;const n=F();return e(ct,{children:((r=n==null?void 0:n.authStore)==null?void 0:r.isAuthenticated)?h(re,{children:[e(zt,{}),h(Ee,{children:[e(q,{path:"/users/:id",element:e(tr,{})}),e(q,{path:"/projects/:id",element:e(lr,{})}),e(q,{path:"/projects",element:e(nr,{})}),e(q,{path:"/teams/edit/:id",element:e(Qt,{})}),e(q,{path:"/teams/create",element:e(Zt,{})}),e(q,{path:"/teams/:id",element:e(Jt,{})}),e(q,{path:"/teams",element:e(Xt,{})}),e(q,{path:"/",element:e(ar,{})})]})]}):e(Ee,{children:e(q,{path:"/",element:e(dr,{})})})})};var mr=P(hr);const ur=dt({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),We=({children:n})=>h(ht,{theme:ur,children:[e(mt,{}),n]});We.propTypes={children:S.node.isRequired};const we=n=>{const{active:r}=n;return r?e("div",{className:"loader",children:e(Be,{style:{height:1}})}):null};we.propTypes={active:S.bool};we.defaultProps={active:!1};const ee=new Date,fr=()=>{const n=F(),[r,t]=g.exports.useState(!1),[s,i]=g.exports.useState(new Date(ee.getFullYear(),ee.getMonth(),1)),[a,c]=g.exports.useState(new Date(ee.getFullYear(),ee.getMonth()+1,0)),o=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(s,a),t(!0),await K(n.projectStore.fetchProjectList()),await K(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:h(ke,{className:"query-date-selector",component:"footer",children:[e("div",{className:"query-date-selector__loader",children:e(we,{active:r})}),h(O,{className:"query-date-selector__content",gap:2,children:[e(O,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:1,className:"query-date-selector__date-picker",children:e(ut,{startText:"Start date",endText:"End date",value:[s,a],disabled:r,onChange:([l,f])=>{i(l),c(f)},renderInput:(l,f)=>h(O,{display:"flex",gap:2,style:{width:"100%"},children:[e(B,L(b({},l),{helperText:null,size:"small",fullWidth:!0})),e(B,L(b({},f),{helperText:null,size:"small",fullWidth:!0}))]})})}),e(O,{width:{xs:"100%",sm:"initial"},children:e(x,{fullWidth:!0,variant:"outlined",disabled:r,onClick:o,className:"query-date-selector__bt-search",children:e(ft,{})})})]})]})};var pr=P(fr);const gr=()=>{const[n,r]=g.exports.useState(null),[t]=J("clockify-api-key"),s=async()=>{const i=St({RootStore:Ot,env:Pt});r(i),(t==null?void 0:t.length)&&(i.authStore.setAutoLogin(!0),await K(i.authStore.authenticate(t)),i.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{s()},[]),n?e("div",{className:"app",children:e(Bt,{value:n,children:e(pt,{dateAdapter:gt,locale:_t,children:h(We,{children:[e(mr,{}),e(pr,{})]})})})}):null};vt.register(yt,Nt,bt,Lt,wt,Tt);Ct.render(e(Et.StrictMode,{children:e(gr,{})}),document.getElementById("root"));
