var Pe=Object.defineProperty,$e=Object.defineProperties;var Ie=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var te=(n,a,t)=>a in n?Pe(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,N=(n,a)=>{for(var t in a||(a={}))je.call(a,t)&&te(n,t,a[t]);if(fe)for(var t of fe(a))ke.call(a,t)&&te(n,t,a[t]);return n},L=(n,a)=>$e(n,Ie(a));var v=(n,a,t)=>(te(n,typeof a!="symbol"?a+"":a,t),t);import{a as Se,m as q,o as S,c as ae,b,f as z,g as A,d as y,r as g,u as k,j as e,B as T,e as m,h as Ue,S as Fe,i as E,A as Oe,C as I,P as _,L as H,k as Y,T as ie,l as ye,n as Be,I as Re,p as qe,q as Ne,s as Ae,t as J,v as Z,F as Q,w as Me,x as Le,y as We,D as ze,z as He,E as Je,G as pe,H as Ke,J as $,K as be,M as we,_ as P,N as Qe,O as Ve,Q as Ye,R as W,U as Ze,V as Xe,W as Ge,X as re,Y as Ee,Z as et,$ as ge,a0 as j,a1 as tt,a2 as at,a3 as rt,a4 as M,a5 as ve,a6 as st,a7 as it,a8 as nt,a9 as ot,aa as lt,ab as ct,ac as dt,ad as ht,ae as mt,af as ut,ag as ft,ah as pt,ai as gt,aj as vt}from"./vendor.d3c910e3.js";const _t=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};_t();const St="https://api.clockify.me/api/v1",yt="https://reports.api.clockify.me/",Nt=Se.create({baseURL:St,timeout:1e4}),Te=Se.create({baseURL:yt,timeout:1e4}),R=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},i=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(i))}];class X{constructor(a){v(this,"id",null);v(this,"name",null);v(this,"email",null);v(this,"defaultWorkspace",null);v(this,"profilePicture",null);v(this,"timeEntries",[]);v(this,"timeEntriesByDay",[]);v(this,"teams",[]);v(this,"hours",null);v(this,"warnings",{});if(q(this,{id:S,name:S,email:S,defaultWorkspace:S,profilePicture:S,timeEntries:S,timeEntriesByDay:S,teams:S,hours:S,warnings:S}),a==null||a.id==null)throw new Error("Invalid user constructor");const{id:t,name:i,email:s,defaultWorkspace:r,profilePicture:c,timeEntries:o,timeEntriesByDay:l,teams:p,hours:d,warnings:u}=a;this.id=t,this.name=i||"",this.email=s||"",this.defaultWorkspace=r||"",this.profilePicture=c||"",this.timeEntries=o||[],this.timeEntriesByDay=l||[],this.teams=p||[],this.hours=d||0,this.warnings=u||{}}static fromApi({id:a,name:t,email:i,defaultWorkspace:s,profilePicture:r,timeEntries:c,timeEntriesByDay:o,teams:l,hours:p,warnings:d}={}){return new X({id:a,name:t,email:i,defaultWorkspace:s,profilePicture:r,timeEntries:c,timeEntriesByDay:o,teams:l,hours:p,warnings:d})}}class Lt{constructor(){v(this,"user",null);v(this,"authStatus","unauthenticated");v(this,"autoLogin",!1);v(this,"fetchDataLog",[]);q(this,{user:S,authStatus:S,autoLogin:S,fetchDataLog:S,isAuthenticated:ae,isConfirmingIdentity:ae,isUnauthenticated:ae,setUser:b.bound,confirmIdentity:b.bound,unauthenticate:b.bound,setAutoLogin:b.bound,feedFetchDataLog:b.bound,setStatusConfirmingIdentity:b.bound,clearDataLog:b.bound,authenticate:z})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(a){this.user=X.fromApi(a)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(a){this.autoLogin=a}feedFetchDataLog(a,t){let i="";switch(t){case"success":{i="#27ae60";break}case"error":{i="#c0392b";break}default:{i="#ffffff";break}}typeof a=="string"&&a.length&&this.fetchDataLog.push({text:a,color:i})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,A().defaults.headers.common["X-Api-Key"]=null}*authenticate(a){try{const[,t]=R("clockify-api-key");A().defaults.headers.common["X-Api-Key"]=a,Te.defaults.headers.common["X-Api-Key"]=a,t(a);const i=yield A().get("/user");return(i==null?void 0:i.status)!==200?(alert("Invalid Clockify API Key"),!1):(i==null?void 0:i.data)?(this.setUser(i.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const _e=n=>{try{const a=new Date(n).toISOString().split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(a){return console.log(a),null}},se=n=>{try{const a=n==null?void 0:n.split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(a){return console.log(a),null}},C=n=>{try{const a=n==null?void 0:n.split("H");let t=0,i=0;return(a==null?void 0:a.length)?((a==null?void 0:a.length)===2?(t=Number(a[0].split("PT")[1])||0,i=Number(a[1].split("M")[0])||0):a[0]!=="PT0S"&&(i=Number(a[0].replace("PT","").replace("M",""))),Number(t+i/60)):null}catch(a){return console.log(a),null}},bt=n=>n.replace(/[^\w\s]/gi,""),V={NO_PROJECT:"Entrada sem projeto",NO_DESCRIPTION:"Entrada sem descri\xE7\xE3o",TIME_LIMIT:"Entrada maior que 6 horas"};class wt{constructor(){v(this,"userList",[]);v(this,"queryStartDate",null);v(this,"queryEndDate",null);q(this,{userList:S,queryStartDate:S,queryEndDate:S,setUserList:b.bound,formatUserData:b.bound,getUsersTeams:b.bound,fetchUserList:z,fetchUserTimeEntries:z,fetchUserSummaryReport:z})}setUserList(a=[]){this.userList=a.map(t=>X.fromApi(t))}setQueryDate(a,t){this.queryStartDate=a,this.queryEndDate=t}*fetchUserTimeEntries(a={}){const{id:t,name:i,pageSize:s=5e3}=a,{NO_DESCRIPTION:r,NO_PROJECT:c,TIME_LIMIT:o}=V;try{y().authStore.feedFetchDataLog(`fetching user ${i} time entries...`);const{defaultWorkspace:l}=y().authStore.user,p=yield A().get(`/workspaces/${l}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":s}});if(p.status!==200)return y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1;if(p==null?void 0:p.data){let d=0;const u={};Object.keys(V).forEach(h=>{u[h]=0});const D=p.data.map(h=>{var U,F,O;const w=(U=h==null?void 0:h.timeInterval)==null?void 0:U.duration,f=L(N({},h),{warnings:[]});if(((F=h==null?void 0:h.projectId)==null?void 0:F.length)||(f.warnings.push(c),u.NO_PROJECT++),((O=h==null?void 0:h.description)==null?void 0:O.length)||(f.warnings.push(r),u.NO_DESCRIPTION++),w==null?void 0:w.length){const ee=C(w);ee&&(d+=ee,ee>=6&&(f.warnings.push(o),u.TIME_LIMIT++))}return f});return y().authStore.feedFetchDataLog(`fetch user ${i} time entries success`,"success"),{timeEntries:D,hours:d,warnings:u}}return y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1}catch(l){return console.log(l),y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1}}formatUserData(a){var t,i;try{let s=[];for(const r of a.timeEntries){const c=(t=r==null?void 0:r.timeInterval)==null?void 0:t.duration,o=(i=r==null?void 0:r.timeInterval)==null?void 0:i.start,l=y().projectStore.projectList.find(({id:d})=>d===(r==null?void 0:r.projectId)),p=s.find(d=>d.date===se(o));(c==null?void 0:c.length)&&(o==null?void 0:o.length)&&(p?s=s.map(d=>d.date===se(o)?{date:d.date,timeEntries:[...d.timeEntries,L(N({},r),{project:l||{name:"Sem projeto",color:"#ffffff"}})],hours:d.hours+C(c)}:d):s.push({date:se(o),timeEntries:[L(N({},r),{project:l||{name:"Sem projeto",color:"#ffffff"}})],hours:C(c)}))}return L(N({},a),{timeEntriesByDay:s})}catch(s){return console.log(s),!1}}getUsersTeams(){const a=[];for(const t of this.userList){const i=[];for(const s of y().teamStore.teamList)for(const r of s.users)r.id===t.id&&i.push(s);a.push(L(N({},t),{teams:i}))}this.setUserList(a)}*fetchUserList(a={}){var t;try{y().authStore.feedFetchDataLog("fetching user list...");const{pageSize:i=5e3}=a,{defaultWorkspace:s}=y().authStore.user,r=yield A().get(`/workspaces/${s}/users`,{params:{"page-size":i,status:"ACTIVE"}});if(r.status!==200)return y().authStore.feedFetchDataLog("fetch user list error","error"),!1;if((t=r==null?void 0:r.data)==null?void 0:t.length){y().authStore.feedFetchDataLog("fetch user list success","success");const c=[];for(const o of r.data){const l=yield this.fetchUserTimeEntries(o);if(l){const p=this.formatUserData(N(N({},o),l));c.push(p)}}if(c.length)return this.setUserList(c),y().authStore.feedFetchDataLog("fetch all users time entries success","success"),!0}return y().authStore.feedFetchDataLog("fetch user list error","error"),!1}catch(i){return console.log(i),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*fetchUserSummaryReport(a){try{const{defaultWorkspace:t}=y().authStore.user,i=yield Te.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[a.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),r=`${a.name.toLowerCase().split(" ").map(o=>bt(o)).join("-")}__from_${_e(this.queryStartDate)}_to_${_e(this.queryEndDate)}`,c=new Blob([i.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(c,r);else{const o=document.createElement("a"),l=document.querySelector("body");o.href=window.URL.createObjectURL(c),o.download=r,o.style.display="none",l.appendChild(o),o.click(),l.removeChild(o),window.URL.revokeObjectURL(o.href)}return!1}catch(t){return console.log(t),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}}class ne{constructor(a){v(this,"id",null);v(this,"name",null);v(this,"email",null);v(this,"workspaceId",null);v(this,"color",null);v(this,"duration",null);v(this,"estimate",null);v(this,"users",[]);v(this,"timeEntriesByUser",[]);if(q(this,{id:S,name:S,email:S,workspaceId:S,color:S,duration:S,estimate:S,users:S,timeEntriesByUser:S}),a==null||a.id==null)throw new Error("Invalid Project constructor");const{id:t,name:i,email:s,workspaceId:r,color:c,duration:o,estimate:l,users:p,timeEntriesByUser:d}=a;this.id=t,this.name=i||"",this.email=s||"",this.workspaceId=r||"",this.color=c||"",this.duration=o||"",this.estimate=l||"",this.users=p||[],this.timeEntriesByUser=d||[]}static fromApi({id:a,name:t,email:i,workspaceId:s,color:r,duration:c,estimate:o,users:l,timeEntriesByUser:p}={}){return new ne({id:a,name:t,email:i,workspaceId:s,color:r,duration:c,estimate:o,users:l,timeEntriesByUser:p})}}class Et{constructor(){v(this,"projectList",[]);q(this,{projectList:S,setProjectList:b.bound,formatProjectData:b.bound,formatProjectList:b.bound,fetchProjectList:z})}setProjectList(a=[]){this.projectList=a.map(t=>ne.fromApi(t))}formatProjectData(a={}){var t;try{const{id:i}=a;let s=[];for(const r of y().userStore.userList){const c=r.timeEntries.filter(o=>o.projectId===i);for(const o of c){const l=s.find(u=>u.id===o.userId);let p=0;const d=(t=o==null?void 0:o.timeInterval)==null?void 0:t.duration;(d==null?void 0:d.length)&&(p+=C(d)),l?s=s.map(u=>u.id===o.userId?L(N({},u),{timeEntries:[...u.timeEntries,o],hours:u.hours+p}):u):s.push(L(N({},r),{timeEntries:[o],hours:p}))}}return L(N({},a),{timeEntriesByUser:s})}catch(i){return console.log(i),!1}}formatProjectList(){const a=[];for(const t of this.projectList){const i=this.formatProjectData(t);a.push(i)}this.setProjectList(a)}*fetchProjectList(a={}){var t;try{y().authStore.feedFetchDataLog("fetching project list...");const{pageSize:i=5e3}=a,{defaultWorkspace:s}=y().authStore.user,r=yield A().get(`/workspaces/${s}/projects`,{params:{archived:!1,"page-size":i}});return r.status!==200?(y().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=r==null?void 0:r.data)==null?void 0:t.length)?(this.setProjectList(r.data),y().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(i){return console.log(i),y().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class oe{constructor(a){v(this,"id",null);v(this,"name",null);v(this,"image",null);v(this,"users",[]);v(this,"timeEntriesByProject",[]);if(q(this,{id:S,name:S,image:S,users:S,timeEntriesByProject:S}),a==null||a.id==null)throw new Error("Invalid Team constructor");const{id:t,name:i,image:s,users:r,timeEntriesByProject:c}=a;this.id=t,this.name=i||"",this.image=s||"",this.users=r||[],this.timeEntriesByProject=c||[]}static fromApi({id:a,name:t,image:i,users:s,timeEntriesByProject:r}={}){return new oe({id:a,name:t,image:i,users:s,timeEntriesByProject:r})}}class Tt{constructor(){v(this,"teamList",[]);q(this,{teamList:S,setTeamList:b.bound,createTeam:b.bound,editTeam:b.bound,fetchTeamList:b.bound,formatTeamData:b.bound})}createTeam(a={}){try{const{users:t}=a,[i,s]=R("team-list"),r=i||[];let c=1;return r.length?(c=r.length+1,s([...r,L(N({},a),{id:c,users:t.map(o=>o.id)})])):s([L(N({},a),{id:1,users:t.map(o=>o.id)})]),c}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(a,t={}){try{const[i,s]=R("team-list"),{users:r}=t;return s(i.map(c=>c.id===a?L(N(N({},c),c),{users:r.map(o=>o.id)}):c)),a}catch(i){return console.log(i),!1}finally{this.fetchTeamList()}}removeTeam(a={}){try{const[t,i]=R("team-list"),s=t.filter(r=>r.id!==a.id);i(s),this.setTeamList(s.map(r=>L(N({},r),{users:y().userStore.userList.filter(c=>r.users.includes(c.id))})))}catch(t){console.log(t)}}setTeamList(a=[]){this.teamList=a.map(t=>oe.fromApi(t))}fetchTeamList(){try{y().authStore.feedFetchDataLog("fetching team list...");const[a]=R("team-list");if(a.length){const t=[];for(const i of a){const s=this.formatTeamData(i);t.push(L(N({},s),{users:y().userStore.userList.filter(r=>i.users.includes(r.id))}))}this.setTeamList(t),y().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(a){return console.log(a),y().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(a={}){var t;try{const i=[];let s=[];for(const c of a.users){const o=y().userStore.userList.find(l=>l.id===c);if(o){const{timeEntries:l,hours:p}=o;for(const u of l){const D=s.find(f=>f.id===u.projectId);let h=0;const w=(t=u==null?void 0:u.timeInterval)==null?void 0:t.duration;(w==null?void 0:w.length)&&(h+=C(w)),D?s=s.map(f=>f.id===u.projectId?L(N({},f),{id:u.projectId,timeEntries:[...f.timeEntries,u],hours:f.hours+h}):f):s.push({id:u.projectId,timeEntries:[u],hours:h})}const d=y().userStore.userList.find(u=>u.id===c.id);i.push(L(N({},d),{timeEntries:l,hours:p}))}}let r=0;for(const c of s){if(c.id){const o=y().projectStore.projectList.find(l=>l.id===c.id);o&&(s[r]=L(N({},s[r]),{name:o.name,color:o.color}))}else s[r]=L(N({},s[r]),{name:"Sem projeto",color:"#ffffff"});r++}return L(N({},a),{users:i,timeEntriesByProject:s})}catch(i){return console.log(i),!1}}}class Dt{constructor(){v(this,"authStore",null);v(this,"userStore",null);v(this,"projectStore",null);v(this,"teamStore",null)}init(){this.authStore=new Lt,this.userStore=new wt,this.projectStore=new Et,this.teamStore=new Tt}}const De=g.exports.createContext({}),xt=De.Provider,x=()=>g.exports.useContext(De);const Ct=[{route:"/",label:"Colaboradores"},{route:"/teams",label:"Equipes"},{route:"/projects",label:"Projetos"}],xe=({vertical:n,drawer:a})=>{const t=k(),i=s=>{t(s),a&&a.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:Ct.map(s=>e("li",{className:"menu__list__item",children:e(T,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>i(s.route),children:s.label})},s.route))})})};const Pt=()=>{const[n,a]=g.exports.useState(!1),t=()=>{a(!0)},i=()=>{a(!1)};return m("div",{className:"drawer",children:[e(T,{onClick:t,children:e(Ue,{color:"primary"})}),e(Fe,{anchor:"right",open:n,onClose:i,onOpen:t,children:e("div",{className:"drawer__content",children:e(xe,{vertical:!0,drawer:{close:i}})})})]})};const $t=()=>e("div",{className:"logo",children:"Clockify Teams"});const It=()=>e(Oe,{className:"header",position:"sticky",children:e(I,{maxWidth:"lg",children:m("div",{className:"header__content",children:[e($t,{}),e("div",{className:"header__menu",children:e(xe,{})}),e("div",{className:"header__drawer",children:e(Pt,{})})]})})});var jt=E(It);const le=n=>{var p;const a=x(),{hours:t,warnings:i,user:s,pdf:r}=n,[c,o]=g.exports.useState(!1),l=async()=>{o(!0),await J(a.userStore.fetchUserSummaryReport(s)),o(!1)};return m("div",{className:"user__meta",children:[e(ie,{arrow:!0,placement:"left",title:"Horas trabalhadas no per\xEDodo selecionado",children:m("div",{className:"user__meta__item",style:{color:t>=200?"#f44336":"#ffffff"},children:[t.toFixed(2),e(ye,{color:t>=200?"error":""})]})}),r?c?e(Be,{style:{width:20,height:20,margin:14}}):e(Re,{onClick:l,children:e(qe,{})}):null,((p=Object.entries(i).filter(([,d])=>d>0))==null?void 0:p.length)?e(ie,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(i).filter(([,d])=>d>0).map(([d,u])=>e("li",{className:"warning-list__item",children:`${u}x ${V[d]}`},V[d]))}),children:e("div",{className:"user__meta__item warning",children:e(Ne,{color:i.NO_PROJECT>0||i.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(Ae,{color:"secondary"})})]})};le.propTypes={hours:_.number.isRequired,user:_.instanceOf(Object).isRequired,pdf:_.bool,warnings:_.instanceOf(Object).isRequired};le.defaultProps={pdf:!1};const ce=n=>{const{id:a,name:t,lastName:i,profilePicture:s,email:r,showMeta:c,pdf:o,disabled:l,hours:p,warnings:d}=n,u=k();return m(H,{className:"user",children:[m("div",{className:"user__pressable",onClick:()=>l?null:u(`/users/${a}`),style:{pointerEvents:l?"none":"initial"},children:[e(Y,{alt:t,src:s,className:"user__avatar"}),m("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:r})]})]}),c?e(le,{pdf:o,hours:p,warnings:d,user:{id:a,name:t,lastName:i,email:r}}):null]})};ce.propTypes={id:_.oneOfType([_.number,_.string]),name:_.string,lastName:_.string,profilePicture:_.string,email:_.string,showMeta:_.bool,pdf:_.bool,disabled:_.bool,hours:_.number,warnings:_.instanceOf(Object)};ce.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null};var B=E(ce);const kt=()=>{var p;const n=x(),a=Z(),t=k(),[i,s]=g.exports.useState(!1),r=n.teamStore.teamList.find(({id:d})=>d===Number(a.id)),c=()=>{s(!0)},o=()=>{s(!1)},l=()=>{n.teamStore.removeTeam(r),o(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),r?m(Q,{children:[m("div",{className:"screen team-detail",children:[m(I,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[m("div",{className:"screen__header__left",children:[e(Y,{alt:r==null?void 0:r.name,src:r==null?void 0:r.image,className:"team-detail__avatar"}),e("h2",{children:r==null?void 0:r.name})]}),e("div",{className:"screen__header__right",children:e(T,{onClick:c,children:e(Me,{})})})]}),e("main",{children:m("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Colaboradores na equipe"})}),((p=r==null?void 0:r.users)==null?void 0:p.length)?r.users.map(d=>e(B,{id:d.id,profilePicture:d==null?void 0:d.profilePicture,name:d==null?void 0:d.name,email:d==null?void 0:d.email,hours:d==null?void 0:d.hours,warnings:d==null?void 0:d.warnings,showMeta:!0},d.id)):null]})})]}),e(Le,{className:"team-detail__edit-team",color:"primary","aria-label":"Editar equipe",onClick:()=>{t(`/teams/edit/${r.id}`)},children:e(We,{})})]}),m(ze,{open:i,onClose:o,"aria-labelledby":"draggable-dialog-title",children:[e(He,{style:{cursor:"move"},id:"draggable-dialog-title",children:`Excluir equipe ${r.name}`}),m(Je,{children:[e(pe,{children:`Voc\xEA tem certeza que deseja excluir a equipe ${r.name}?`}),e(pe,{children:"Esta a\xE7\xE3o \xE9 irrevers\xEDvel."})]}),m(Ke,{children:[e(T,{autoFocus:!0,onClick:o,color:"primary",children:"Cancelar"}),e(T,{onClick:l,color:"primary",children:"Confirmar"})]})]})]}):null};var Ut=E(kt);const de=n=>{const{id:a,name:t,image:i,avatarSize:s,fontSize:r,disabled:c,card:o}=n,l=k();return o?m(H,{className:"team card",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[i.length?e("img",{className:"team__image",src:i,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:r},children:t})})]}):m(H,{className:"team",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[e(Y,{alt:t,src:i,className:"team__avatar",style:{width:s,height:s}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:r},children:t})})]})};de.propTypes={id:_.number.isRequired,name:_.string,image:_.string,avatarSize:_.number,fontSize:_.number,disabled:_.bool,card:_.bool};de.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var G=E(de);const Ft=()=>{const n=x(),a=Z(),t=k(),i=n.teamStore.teamList.find(f=>f.id===Number(a.id)),[s,r]=g.exports.useState(""),[c,o]=g.exports.useState(""),[l,p]=g.exports.useState([]),[d,u]=g.exports.useState([]),D=(f,U,F)=>{p(P.sortBy(U.filter(O=>O.id!==f.id),"name")),u(P.sortBy([...F,f],"name"))},h=(f,U,F)=>{u(P.sortBy(F.filter(O=>O.id!==f.id),"name")),p(P.sortBy([...U,f],"name"))},w=async()=>{const f=await n.teamStore.editTeam(i.id,{name:s,image:c,users:d});t(`/teams/${f}`),f&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{r(i.name),o(i.image),u(i.users);const f=[...n.userStore.userList];i.users.forEach(U=>{f.forEach((F,O)=>{F.id===U.id&&f.splice(O,1)})}),p(f)},[i]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:m(I,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Editar equipe ${i.name}`})}),m("main",{children:[m("div",{className:"create-team__form",children:[m("div",{className:"create-team__form__content",children:[e($,{id:"team-name",label:"Nome",variant:"filled",value:s,onChange:f=>{r(f.target.value)}}),e($,{id:"team-image",label:"Imagem",variant:"filled",value:c,onChange:f=>{o(f.target.value)}}),(s==null?void 0:s.length)||(c==null?void 0:c.length)?e("div",{className:"screen__header__preview",children:e(G,{name:s,image:c,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(T,{variant:"outlined",onClick:w,children:"Salvar"})]}),m("div",{className:"create-team__user-lists",children:[m("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Todos os colaboradores"})}),l.map(f=>m("div",{className:"user-list__item",children:[e(B,{id:f.id,profilePicture:f==null?void 0:f.profilePicture,name:f==null?void 0:f.name,email:f==null?void 0:f.email,hours:f==null?void 0:f.hours},f.id),e(T,{className:"user-list__item__bt-add",onClick:()=>D(f,l,d),children:e(be,{})})]},f.id))]}),m("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Colaboradores na equipe"})}),d.map(f=>m("div",{className:"user-list__item",children:[e(T,{className:"user-list__item__bt-add",onClick:()=>h(f,l,d),children:e(we,{})}),e(B,{id:f.id,profilePicture:f==null?void 0:f.profilePicture,name:f==null?void 0:f.name,email:f==null?void 0:f.email,hours:f==null?void 0:f.hours})]},f.id))]})]})]})]})})};var Ot=E(Ft);const Bt=()=>{const n=x(),a=k(),[t,i]=g.exports.useState(""),[s,r]=g.exports.useState(""),[c,o]=g.exports.useState([]),[l,p]=g.exports.useState([]),d=h=>{o(P.sortBy(c.filter(w=>w.id!==h.id),"name")),p(P.sortBy([...l,h],"name"))},u=h=>{p(P.sortBy(l.filter(w=>w.id!==h.id),"name")),o(P.sortBy([...c,h],"name"))},D=async()=>{const h=n.teamStore.createTeam({name:t,image:s,users:l});n.teamStore.fetchTeamList(),a(`/teams/${h}`),h&&alert(`A equipe ${t} foi criada.`)};return g.exports.useEffect(()=>{o(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:m(I,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Criar equipe"})}),m("main",{children:[m("div",{className:"create-team__form",children:[m("div",{className:"create-team__form__content",children:[e($,{id:"team-name",label:"Nome",variant:"filled",value:t,onChange:h=>{i(h.target.value)}}),e($,{id:"team-image",label:"Imagem",variant:"filled",value:s,onChange:h=>{r(h.target.value)}}),(t==null?void 0:t.length)||(s==null?void 0:s.length)?e("div",{className:"screen__header__preview",children:e(G,{name:t,image:s,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(T,{variant:"outlined",onClick:D,children:"Criar"})]}),m("div",{className:"create-team__user-lists",children:[m("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Todos os colaboradores"})}),c.map(h=>m("div",{className:"user-list__item",children:[e(B,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours},h.id),e(T,{className:"user-list__item__bt-add",onClick:()=>d(h),children:e(be,{})})]},h.id))]}),m("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Colaboradores na equipe"})}),l.map(h=>m("div",{className:"user-list__item",children:[e(T,{className:"user-list__item__bt-add",onClick:()=>u(h),children:e(we,{})}),e(B,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours})]},h.id))]})]})]})]})})};var Rt=E(Bt);const qt=()=>{var c,o;const n=x(),a=k(),[t,i]=g.exports.useState(""),[s,r]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){r(n.teamStore.teamList.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())));return}r(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{r(n.teamStore.teamList),window.scrollTo(0,0)},[]),m("div",{className:"screen teams",children:[m(I,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[e("h2",{children:"Equipes"}),e("div",{className:"screen__header__right",children:((o=(c=n==null?void 0:n.teamStore)==null?void 0:c.teamList)==null?void 0:o.length)?e($,{id:"filter-term",label:"Filtro",size:"small",value:t,onChange:l=>{i(l.target.value)}}):null})]}),e("main",{children:(s==null?void 0:s.length)?s.map(l=>e(G,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id)):e("div",{children:"Nenhuma equipe encontrada."})})]}),e(Le,{className:"teams__create-team",color:"primary","aria-label":"Criar equipe",onClick:()=>{a("/teams/create")},children:e(Qe,{})})]})};var At=E(qt);const he=n=>{const{project:a,time:t,description:i,disabled:s,showMeta:r,warnings:c}=n,o=k();return m(H,{button:!s,className:"time-entry",style:{borderColor:a.color},children:[m("div",{className:"time-entry__pressable",onClick:()=>a.id?o(`/projects/${a.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:a.name})}),m("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:a.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:i})]})]}),r&&(c==null?void 0:c.length)?e("div",{className:"time-entry__meta",children:e(ie,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:c.map(l=>e("li",{className:"warning-list__item",children:l}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(Ne,{color:c.length===1&&c[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};he.propTypes={project:_.instanceOf(Object),time:_.string,description:_.string,disabled:_.bool,showMeta:_.bool,warnings:_.arrayOf(_.instanceOf(Object))};he.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var Mt=E(he);const Wt=()=>{var o;const n=x(),a=Z(),t=n.userStore.userList.find(({id:l})=>l===a.id),[i,s]=g.exports.useState([]),[r,c]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(r){s(t.timeEntriesByDay.filter(l=>l.timeEntries.find(p=>{var d;return(d=p==null?void 0:p.warnings)==null?void 0:d.length})).map(l=>L(N({},l),{timeEntries:l.timeEntries.filter(p=>{var d;return(d=p==null?void 0:p.warnings)==null?void 0:d.length})})));return}s(t.timeEntriesByDay)},[r]),g.exports.useEffect(()=>{s(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:m(I,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[m("div",{className:"screen__header__left",children:[e(Y,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),m("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e(ye,{color:t.hours>=200?"error":""})]})]}),m("main",{children:[(t==null?void 0:t.teams.length)?m("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Equipes do colaborador"})}),t.teams.map(l=>e(G,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id))]}):null,((o=t==null?void 0:t.timeEntries)==null?void 0:o.length)?m("div",{className:"time-entries",children:[m("header",{className:"section-header",children:[e("h3",{children:"Entradas de tempo"}),e("div",{className:"time-entries__filter",children:e(Ve,{control:e(Ye,{checked:r,onChange:()=>c(!r),name:"filterWarnings",color:"primary"}),label:"Filtrar warnings"})})]}),(i==null?void 0:i.length)?i.map(l=>m("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:l.date})}),e("div",{className:"description",children:l.timeEntries.map(p=>{var d;return e(Mt,{disabled:!((d=p==null?void 0:p.project)==null?void 0:d.id),project:p.project,time:p.timeInterval.duration,description:p.description,warnings:p.warnings,showMeta:!0},p.id)})})]},l.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var zt=E(Wt);const Ht=()=>{var o,l,p,d;const n=x(),[a,t]=g.exports.useState(""),[i,s]=g.exports.useState([]),[r,c]=g.exports.useState("name");return g.exports.useEffect(()=>{if(a.length){s(n.userStore.userList.filter(u=>u.name.toLowerCase().includes(a.toLowerCase())));return}s(n.userStore.userList)},[a]),g.exports.useEffect(()=>{const u=r==="hours"?"desc":"asc";s(D=>P.orderBy(D,r,u))},[r]),g.exports.useEffect(()=>{s(P.orderBy(n.userStore.userList,r)),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:m(I,{maxWidth:"lg",children:[m(W,{component:"header",className:"screen__header",children:[e("h2",{children:"Colaboradores"}),m(W,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((l=(o=n==null?void 0:n.userStore)==null?void 0:o.userList)==null?void 0:l.length)?e(W,{flex:{xs:2},children:m(Ze,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(Xe,{id:"order-by-label",children:"Order by"}),m(Ge,{labelId:"order-by-label",id:"order-by",value:r,label:"Order by",onChange:u=>c(u.target.value),size:"small",children:[e(re,{value:"name",children:"Name"}),e(re,{value:"email",children:"E-mail"}),e(re,{value:"hours",children:"Workload"})]})]})}):null,((d=(p=n==null?void 0:n.userStore)==null?void 0:p.userList)==null?void 0:d.length)?e(W,{flex:"3",children:e($,{fullWidth:!0,id:"filter-term",label:"Filtro",size:"small",value:a,onChange:u=>{t(u.target.value)}})}):null]})]}),e("main",{children:(i==null?void 0:i.length)?i.map(u=>e(B,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,lastName:u==null?void 0:u.lastName,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours,payment:u==null?void 0:u.payment,warnings:u==null?void 0:u.warnings,showMeta:!0,pdf:!0},u.id)):e("div",{children:"Nenhum colaborador encontrado."})})]})})};var Jt=E(Ht);const me=n=>{const{id:a,index:t,name:i,color:s,disabled:r=!1}=n,[c,o]=g.exports.useState(!1),l=k();return g.exports.useEffect(()=>{const p=setTimeout(()=>{o(!0)},t*50+100);return()=>{clearTimeout(p)}},[]),e(H,{button:!r,onClick:()=>r?null:l(`/projects/${a}`),className:"project",style:{borderColor:c?s:"transparent"},children:e("div",{className:"project__name",children:i})})};me.propTypes={id:_.number.isRequired,index:_.number.isRequired,name:_.string,color:_.string,disabled:_.bool};me.defaultProps={name:"",color:"",disabled:!1};var Kt=E(me);const Qt=()=>{var r,c;const n=x(),[a,t]=g.exports.useState(""),[i,s]=g.exports.useState([]);return g.exports.useEffect(()=>{if(a.length){s(n.projectStore.projectList.filter(o=>o.name.toLowerCase().includes(a.toLowerCase())));return}s(n.projectStore.projectList)},[a]),g.exports.useEffect(()=>{s(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:m(I,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[e("h2",{children:"Projetos"}),((c=(r=n==null?void 0:n.projectStore)==null?void 0:r.projectList)==null?void 0:c.length)?e($,{id:"filter-term",label:"Filtro",size:"small",value:a,onChange:o=>{t(o.target.value)}}):null]}),e("main",{children:(i==null?void 0:i.length)?i.map((o,l)=>e(Kt,{id:o.id,color:o==null?void 0:o.color,name:o==null?void 0:o.name,index:l},o.id)):e("div",{children:"Nenhum projeto encontrado."})})]})})};var Vt=E(Qt);const Yt=()=>{var i,s;const n=x(),a=Z(),t=n.projectStore.projectList.find(({id:r})=>r===a.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:m(I,{maxWidth:"lg",children:[m("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:m("div",{className:"project-detail__estimate",children:[e("div",{children:`Estimativa: ${C(t==null?void 0:t.estimate.estimate)} horas`}),e("div",{children:`Total: ${C(t==null?void 0:t.duration).toFixed(2)} horas`}),C(t==null?void 0:t.estimate.estimate)&&C(t==null?void 0:t.duration)?e("div",{children:`Esfor\xE7o: ${(C(t==null?void 0:t.duration)/C(t==null?void 0:t.estimate.estimate)*100).toFixed(2)}%`}):null]})})]}),m("main",{children:[((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?m("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Colaboradores no projeto"})}),t.timeEntriesByUser.map(r=>e(B,{id:r.id,profilePicture:r==null?void 0:r.profilePicture,name:r==null?void 0:r.name,email:r==null?void 0:r.email,hours:r==null?void 0:r.hours},r.id))]}):null,((s=t==null?void 0:t.timeEntriesByUser)==null?void 0:s.length)?null:e("div",{children:"Nenhuma entrada encontrada para este projeto no per\xEDodo selecionado."})]})]})}):null};var Zt=E(Yt);const Xt=()=>{var o,l,p,d,u,D;const n=x(),[a,t]=g.exports.useState(""),[i,s]=g.exports.useState(!1),[r]=R("clockify-api-key"),c=async()=>{s(!0),await J(n.authStore.authenticate(a)),s(!1)};return g.exports.useEffect(()=>{const h=document.querySelector(".login .fetch-data-log");h&&(h.scrollTop=h.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(r==null?void 0:r.length)&&t(r)},[]),e("div",{className:"screen login",children:e(I,{maxWidth:"lg",className:"login__container",children:m(W,{position:"relative",children:[e("h1",{children:"Clockify Teams"}),e("div",{className:"login__box",children:n.authStore.isConfirmingIdentity?m(Q,{children:[e(B,{disabled:!0,name:(l=(o=n==null?void 0:n.authStore)==null?void 0:o.user)==null?void 0:l.name,profilePicture:(d=(p=n==null?void 0:n.authStore)==null?void 0:p.user)==null?void 0:d.profilePicture,email:(D=(u=n==null?void 0:n.authStore)==null?void 0:u.user)==null?void 0:D.email}),e("div",{className:"fetch-data-log",children:n.authStore.fetchDataLog.map(({text:h,color:w})=>e("div",{style:{color:w},children:h},h))})]}):m(Q,{children:[n.authStore.autoLogin?null:e($,{id:"api-key",label:"Clockify API Key",variant:"filled",value:a,onChange:h=>{t(h.target.value)}}),i||n.authStore.autoLogin?e(Ee,{}):e(T,{variant:"outlined",onClick:c,children:"Entrar"})]})})]})})})};var Gt=E(Xt);const ea=()=>{var a;const n=x();return e(et,{children:((a=n==null?void 0:n.authStore)==null?void 0:a.isAuthenticated)?m(Q,{children:[e(jt,{}),m(ge,{children:[e(j,{path:"/users/:id",element:e(zt,{})}),e(j,{path:"/projects/:id",element:e(Zt,{})}),e(j,{path:"/projects",element:e(Vt,{})}),e(j,{path:"/teams/edit/:id",element:e(Ot,{})}),e(j,{path:"/teams/create",element:e(Rt,{})}),e(j,{path:"/teams/:id",element:e(Ut,{})}),e(j,{path:"/teams",element:e(At,{})}),e(j,{path:"/",element:e(Jt,{})})]})]}):e(ge,{children:e(j,{path:"/",element:e(Gt,{})})})})};var ta=E(ea);const aa=tt({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),Ce=({children:n})=>m(at,{theme:aa,children:[e(rt,{}),n]});Ce.propTypes={children:_.node.isRequired};const ue=n=>{const{active:a}=n;return a?e("div",{className:"loader",children:e(Ee,{})}):null};ue.propTypes={active:_.bool};ue.defaultProps={active:!1};const K=new Date,ra=()=>{const n=x(),[a,t]=g.exports.useState(!1),[i,s]=g.exports.useState(new Date(K.getFullYear(),K.getMonth(),1)),[r,c]=g.exports.useState(new Date(K.getFullYear(),K.getMonth()+1,0)),o=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(i,r),t(!0),await J(n.projectStore.fetchProjectList()),await J(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:m("div",{className:"query-date-selector",children:[e("div",{className:"query-date-selector__loader",children:e(ue,{active:a})}),m(M,{className:"query-date-selector__content",gap:2,children:[m(M,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:{md:3},children:[e(M,{flex:{xs:1},children:e(ve,{views:["day"],label:"Data inicial",value:i,disabled:a,onChange:s,renderInput:l=>e($,L(N({},l),{helperText:null,size:"small",fullWidth:!0,sx:{width:"100%"}}))})}),e(M,{flex:{xs:1},children:e(ve,{views:["day"],label:"Data final",value:r,disabled:a,onChange:c,renderInput:l=>e($,L(N({},l),{helperText:null,size:"small",sx:{width:"100%"}}))})})]}),e(M,{width:{xs:"100%",sm:"initial"},children:e(T,{fullWidth:!0,variant:"outlined",disabled:a,onClick:o,className:"query-date-selector__bt-search",children:e(st,{})})})]})]})};var sa=E(ra);const ia=()=>{const[n,a]=g.exports.useState(null),[t]=R("clockify-api-key"),i=async()=>{const s=lt({RootStore:Dt,env:Nt});a(s),(t==null?void 0:t.length)&&(s.authStore.setAutoLogin(!0),await J(s.authStore.authenticate(t)),s.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{i()},[]),n?e("div",{className:"app",children:e(xt,{value:n,children:e(it,{dateAdapter:nt,locale:ot,children:m(Ce,{children:[e(ta,{}),e(sa,{})]})})})}):null};ct.register(dt,ht,mt,ut,ft,pt);gt.render(e(vt.StrictMode,{children:e(ia,{})}),document.getElementById("root"));
