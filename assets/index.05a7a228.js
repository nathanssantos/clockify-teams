var Pe=Object.defineProperty,xe=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var te=(n,a,t)=>a in n?Pe(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,N=(n,a)=>{for(var t in a||(a={}))$e.call(a,t)&&te(n,t,a[t]);if(ue)for(var t of ue(a))Ie.call(a,t)&&te(n,t,a[t]);return n},L=(n,a)=>xe(n,je(a));var _=(n,a,t)=>(te(n,typeof a!="symbol"?a+"":a,t),t);import{a as ge,m as R,o as S,c as ae,b,f as q,g as A,d as y,r as g,u as I,j as e,B as D,e as u,h as ke,S as Ue,i as T,A as _e,C as j,P as v,L as z,k as Z,l as ve,n as Fe,I as Oe,p as Be,T as Se,q as ye,s as Re,t as H,v as V,F as Q,w as Ae,x as Ne,y as Me,D as We,z as qe,E as ze,G as He,H as Je,J as x,K as Le,M as be,_ as C,N as Ke,O as Qe,Q as Ye,R as W,U as Ze,V as Ve,W as Xe,X as re,Y as we,Z as Ge,$ as fe,a0 as $,a1 as et,a2 as tt,a3 as at,a4 as J,a5 as rt,a6 as st,a7 as it,a8 as nt,a9 as ot,aa as lt,ab as ct,ac as dt,ad as ht,ae as mt,af as ut,ag as ft,ah as pt,ai as gt,aj as _t}from"./vendor.1ecd5d1d.js";const vt=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}};vt();const St="https://api.clockify.me/api/v1",yt="https://reports.api.clockify.me/",Nt=ge.create({baseURL:St,timeout:1e4}),Te=ge.create({baseURL:yt,timeout:1e4}),B=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},s=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(s))}];class X{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"defaultWorkspace",null);_(this,"profilePicture",null);_(this,"timeEntries",[]);_(this,"timeEntriesByDay",[]);_(this,"teams",[]);_(this,"hours",null);_(this,"warnings",{});if(R(this,{id:S,name:S,email:S,defaultWorkspace:S,profilePicture:S,timeEntries:S,timeEntriesByDay:S,teams:S,hours:S,warnings:S}),a==null||a.id==null)throw new Error("Invalid user constructor");const{id:t,name:s,email:i,defaultWorkspace:r,profilePicture:c,timeEntries:o,timeEntriesByDay:l,teams:f,hours:d,warnings:h}=a;this.id=t,this.name=s||"",this.email=i||"",this.defaultWorkspace=r||"",this.profilePicture=c||"",this.timeEntries=o||[],this.timeEntriesByDay=l||[],this.teams=f||[],this.hours=d||0,this.warnings=h||{}}static fromApi({id:a,name:t,email:s,defaultWorkspace:i,profilePicture:r,timeEntries:c,timeEntriesByDay:o,teams:l,hours:f,warnings:d}={}){return new X({id:a,name:t,email:s,defaultWorkspace:i,profilePicture:r,timeEntries:c,timeEntriesByDay:o,teams:l,hours:f,warnings:d})}}class Lt{constructor(){_(this,"user",null);_(this,"authStatus","unauthenticated");_(this,"autoLogin",!1);_(this,"fetchDataLog",[]);R(this,{user:S,authStatus:S,autoLogin:S,fetchDataLog:S,isAuthenticated:ae,isConfirmingIdentity:ae,isUnauthenticated:ae,setUser:b.bound,confirmIdentity:b.bound,unauthenticate:b.bound,setAutoLogin:b.bound,feedFetchDataLog:b.bound,setStatusConfirmingIdentity:b.bound,clearDataLog:b.bound,authenticate:q})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(a){this.user=X.fromApi(a)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(a){this.autoLogin=a}feedFetchDataLog(a,t){let s="";switch(t){case"success":{s="#27ae60";break}case"error":{s="#c0392b";break}default:{s="#ffffff";break}}typeof a=="string"&&a.length&&this.fetchDataLog.push({text:a,color:s})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,A().defaults.headers.common["X-Api-Key"]=null}*authenticate(a){try{const[,t]=B("clockify-api-key");A().defaults.headers.common["X-Api-Key"]=a,Te.defaults.headers.common["X-Api-Key"]=a,t(a);const s=yield A().get("/user");return(s==null?void 0:s.status)!==200?(alert("Invalid Clockify API Key"),!1):(s==null?void 0:s.data)?(this.setUser(s.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const bt=n=>{let a=n;a=a*60*60;let t=Math.floor(a/(60*60));a-=t*60*60;let s=Math.floor(a/60);return a-=s*60,t<10&&(t=`0${t}`),s<10&&(s=`0${s}`),`${t}:${s}`},pe=n=>{try{const a=new Date(n).toISOString().split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(a){return console.log(a),null}},se=n=>{try{const a=n==null?void 0:n.split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(a){return console.log(a),null}},M=n=>{try{const a=n==null?void 0:n.split("H");let t=0,s=0;return(a==null?void 0:a.length)?((a==null?void 0:a.length)===2?(t=Number(a[0].split("PT")[1])||0,s=Number(a[1].split("M")[0])||0):a[0]!=="PT0S"&&(s=Number(a[0].replace("PT","").replace("M",""))),Number(t+s/60)):null}catch(a){return console.log(a),null}},wt=n=>n.replace(/[^\w\s]/gi,""),Y={NO_PROJECT:"Time entry without project",NO_DESCRIPTION:"Time entry without description",TIME_LIMIT:"Time entry longer than 6 hours"};class Tt{constructor(){_(this,"userList",[]);_(this,"queryStartDate",null);_(this,"queryEndDate",null);R(this,{userList:S,queryStartDate:S,queryEndDate:S,setUserList:b.bound,formatUserData:b.bound,getUsersTeams:b.bound,fetchUserList:q,fetchUserTimeEntries:q,fetchUserSummaryReport:q})}setUserList(a=[]){this.userList=a.map(t=>X.fromApi(t))}setQueryDate(a,t){this.queryStartDate=a,this.queryEndDate=t}*fetchUserTimeEntries(a={}){const{id:t,name:s,pageSize:i=5e3}=a,{NO_DESCRIPTION:r,NO_PROJECT:c,TIME_LIMIT:o}=Y;try{y().authStore.feedFetchDataLog(`fetching user ${s} time entries...`);const{defaultWorkspace:l}=y().authStore.user,f=yield A().get(`/workspaces/${l}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":i}});if(f.status!==200)return y().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1;if(f==null?void 0:f.data){let d=0;const h={};Object.keys(Y).forEach(m=>{h[m]=0});const E=f.data.map(m=>{var k,U,F;const w=(k=m==null?void 0:m.timeInterval)==null?void 0:k.duration,p=L(N({},m),{warnings:[]});if(((U=m==null?void 0:m.projectId)==null?void 0:U.length)||(p.warnings.push(c),h.NO_PROJECT++),((F=m==null?void 0:m.description)==null?void 0:F.length)||(p.warnings.push(r),h.NO_DESCRIPTION++),w==null?void 0:w.length){const ee=M(w);ee&&(d+=ee,ee>=6&&(p.warnings.push(o),h.TIME_LIMIT++))}return p});return y().authStore.feedFetchDataLog(`fetch user ${s} time entries success`,"success"),{timeEntries:E,hours:d,warnings:h}}return y().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}catch(l){return console.log(l),y().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}}formatUserData(a){var t,s;try{let i=[];for(const r of a.timeEntries){const c=(t=r==null?void 0:r.timeInterval)==null?void 0:t.duration,o=(s=r==null?void 0:r.timeInterval)==null?void 0:s.start,l=y().projectStore.projectList.find(({id:d})=>d===(r==null?void 0:r.projectId)),f=i.find(d=>d.date===se(o));(c==null?void 0:c.length)&&(o==null?void 0:o.length)&&(f?i=i.map(d=>d.date===se(o)?{date:d.date,timeEntries:[...d.timeEntries,L(N({},r),{project:l||{name:"Without project",color:"#ffffff"}})],hours:d.hours+M(c)}:d):i.push({date:se(o),timeEntries:[L(N({},r),{project:l||{name:"Without project",color:"#ffffff"}})],hours:M(c)}))}return L(N({},a),{timeEntriesByDay:i})}catch(i){return console.log(i),!1}}getUsersTeams(){const a=[];for(const t of this.userList){const s=[];for(const i of y().teamStore.teamList)for(const r of i.users)r.id===t.id&&s.push(i);a.push(L(N({},t),{teams:s}))}this.setUserList(a)}*fetchUserList(a={}){var t;try{y().authStore.feedFetchDataLog("fetching user list...");const{pageSize:s=5e3}=a,{defaultWorkspace:i}=y().authStore.user,r=yield A().get(`/workspaces/${i}/users`,{params:{"page-size":s,status:"ACTIVE"}});if(r.status!==200)return y().authStore.feedFetchDataLog("fetch user list error","error"),!1;if((t=r==null?void 0:r.data)==null?void 0:t.length){y().authStore.feedFetchDataLog("fetch user list success","success");const c=[];for(const o of r.data){const l=yield this.fetchUserTimeEntries(o);if(l){const f=this.formatUserData(N(N({},o),l));c.push(f)}}if(c.length)return this.setUserList(c),y().authStore.feedFetchDataLog("fetch all users time entries success","success"),!0}return y().authStore.feedFetchDataLog("fetch user list error","error"),!1}catch(s){return console.log(s),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*fetchUserSummaryReport(a){try{const{defaultWorkspace:t}=y().authStore.user,s=yield Te.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[a.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),r=`${a.name.toLowerCase().split(" ").map(o=>wt(o)).join("-")}__from_${pe(this.queryStartDate)}_to_${pe(this.queryEndDate)}`,c=new Blob([s.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(c,r);else{const o=document.createElement("a"),l=document.querySelector("body");o.href=window.URL.createObjectURL(c),o.download=r,o.style.display="none",l.appendChild(o),o.click(),l.removeChild(o),window.URL.revokeObjectURL(o.href)}return!1}catch(t){return console.log(t),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}}class ie{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"workspaceId",null);_(this,"color",null);_(this,"duration",null);_(this,"estimate",null);_(this,"users",[]);_(this,"timeEntriesByUser",[]);if(R(this,{id:S,name:S,email:S,workspaceId:S,color:S,duration:S,estimate:S,users:S,timeEntriesByUser:S}),a==null||a.id==null)throw new Error("Invalid Project constructor");const{id:t,name:s,email:i,workspaceId:r,color:c,duration:o,estimate:l,users:f,timeEntriesByUser:d}=a;this.id=t,this.name=s||"",this.email=i||"",this.workspaceId=r||"",this.color=c||"",this.duration=o||"",this.estimate=l||"",this.users=f||[],this.timeEntriesByUser=d||[]}static fromApi({id:a,name:t,email:s,workspaceId:i,color:r,duration:c,estimate:o,users:l,timeEntriesByUser:f}={}){return new ie({id:a,name:t,email:s,workspaceId:i,color:r,duration:c,estimate:o,users:l,timeEntriesByUser:f})}}class Et{constructor(){_(this,"projectList",[]);R(this,{projectList:S,setProjectList:b.bound,formatProjectData:b.bound,formatProjectList:b.bound,fetchProjectList:q})}setProjectList(a=[]){this.projectList=a.map(t=>ie.fromApi(t))}formatProjectData(a={}){var t;try{const{id:s}=a;let i=[];for(const r of y().userStore.userList){const c=r.timeEntries.filter(o=>o.projectId===s);for(const o of c){const l=i.find(h=>h.id===o.userId);let f=0;const d=(t=o==null?void 0:o.timeInterval)==null?void 0:t.duration;(d==null?void 0:d.length)&&(f+=M(d)),l?i=i.map(h=>h.id===o.userId?L(N({},h),{timeEntries:[...h.timeEntries,o],hours:h.hours+f}):h):i.push(L(N({},r),{timeEntries:[o],hours:f}))}}return L(N({},a),{timeEntriesByUser:i})}catch(s){return console.log(s),!1}}formatProjectList(){const a=[];for(const t of this.projectList){const s=this.formatProjectData(t);a.push(s)}this.setProjectList(a)}*fetchProjectList(a={}){var t;try{y().authStore.feedFetchDataLog("fetching project list...");const{pageSize:s=5e3}=a,{defaultWorkspace:i}=y().authStore.user,r=yield A().get(`/workspaces/${i}/projects`,{params:{archived:!1,"page-size":s}});return r.status!==200?(y().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=r==null?void 0:r.data)==null?void 0:t.length)?(this.setProjectList(r.data),y().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(s){return console.log(s),y().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class ne{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"image",null);_(this,"users",[]);_(this,"timeEntriesByProject",[]);if(R(this,{id:S,name:S,image:S,users:S,timeEntriesByProject:S}),a==null||a.id==null)throw new Error("Invalid Team constructor");const{id:t,name:s,image:i,users:r,timeEntriesByProject:c}=a;this.id=t,this.name=s||"",this.image=i||"",this.users=r||[],this.timeEntriesByProject=c||[]}static fromApi({id:a,name:t,image:s,users:i,timeEntriesByProject:r}={}){return new ne({id:a,name:t,image:s,users:i,timeEntriesByProject:r})}}class Dt{constructor(){_(this,"teamList",[]);R(this,{teamList:S,setTeamList:b.bound,createTeam:b.bound,editTeam:b.bound,fetchTeamList:b.bound,formatTeamData:b.bound})}createTeam(a={}){try{const{users:t}=a,[s,i]=B("team-list"),r=s||[];let c=1;return r.length?(c=r.length+1,i([...r,L(N({},a),{id:c,users:t.map(o=>o.id)})])):i([L(N({},a),{id:1,users:t.map(o=>o.id)})]),c}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(a,t={}){try{const[s,i]=B("team-list"),{users:r}=t;return i(s.map(c=>c.id===a?L(N(N({},c),c),{users:r.map(o=>o.id)}):c)),a}catch(s){return console.log(s),!1}finally{this.fetchTeamList()}}removeTeam(a={}){try{const[t,s]=B("team-list"),i=t.filter(r=>r.id!==a.id);s(i),this.setTeamList(i.map(r=>L(N({},r),{users:y().userStore.userList.filter(c=>r.users.includes(c.id))})))}catch(t){console.log(t)}}setTeamList(a=[]){this.teamList=a.map(t=>ne.fromApi(t))}fetchTeamList(){try{y().authStore.feedFetchDataLog("fetching team list...");const[a]=B("team-list");if(a.length){const t=[];for(const s of a){const i=this.formatTeamData(s);t.push(L(N({},i),{users:y().userStore.userList.filter(r=>s.users.includes(r.id))}))}this.setTeamList(t),y().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(a){return console.log(a),y().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(a={}){var t;try{const s=[];let i=[];for(const c of a.users){const o=y().userStore.userList.find(l=>l.id===c);if(o){const{timeEntries:l,hours:f}=o;for(const h of l){const E=i.find(p=>p.id===h.projectId);let m=0;const w=(t=h==null?void 0:h.timeInterval)==null?void 0:t.duration;(w==null?void 0:w.length)&&(m+=M(w)),E?i=i.map(p=>p.id===h.projectId?L(N({},p),{id:h.projectId,timeEntries:[...p.timeEntries,h],hours:p.hours+m}):p):i.push({id:h.projectId,timeEntries:[h],hours:m})}const d=y().userStore.userList.find(h=>h.id===c.id);s.push(L(N({},d),{timeEntries:l,hours:f}))}}let r=0;for(const c of i){if(c.id){const o=y().projectStore.projectList.find(l=>l.id===c.id);o&&(i[r]=L(N({},i[r]),{name:o.name,color:o.color}))}else i[r]=L(N({},i[r]),{name:"Without project",color:"#ffffff"});r++}return L(N({},a),{users:s,timeEntriesByProject:i})}catch(s){return console.log(s),!1}}}class Ct{constructor(){_(this,"authStore",null);_(this,"userStore",null);_(this,"projectStore",null);_(this,"teamStore",null)}init(){this.authStore=new Lt,this.userStore=new Tt,this.projectStore=new Et,this.teamStore=new Dt}}const Ee=g.exports.createContext({}),Pt=Ee.Provider,P=()=>g.exports.useContext(Ee);const xt=[{route:"/",label:"Collaborators"},{route:"/teams",label:"Teams"},{route:"/projects",label:"Projects"}],De=({vertical:n,drawer:a})=>{const t=I(),s=i=>{t(i),a&&a.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:xt.map(i=>e("li",{className:"menu__list__item",children:e(D,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>s(i.route),children:i.label})},i.route))})})};const jt=()=>{const[n,a]=g.exports.useState(!1),t=()=>{a(!0)},s=()=>{a(!1)};return u("div",{className:"drawer",children:[e(D,{onClick:t,children:e(ke,{color:"primary"})}),e(Ue,{anchor:"right",open:n,onClose:s,onOpen:t,children:e("div",{className:"drawer__content",children:e(De,{vertical:!0,drawer:{close:s}})})})]})};const $t=()=>e("div",{className:"logo",children:"Clockify Teams"});const It=()=>e(_e,{className:"header",position:"sticky",children:e(j,{maxWidth:"lg",children:u("div",{className:"header__content",children:[e($t,{}),e("div",{className:"header__menu",children:e(De,{})}),e("div",{className:"header__drawer",children:e(jt,{})})]})})});var kt=T(It);const oe=n=>{var f;const a=P(),{hours:t,warnings:s,user:i,pdf:r}=n,[c,o]=g.exports.useState(!1),l=async()=>{o(!0),await H(a.userStore.fetchUserSummaryReport(i)),o(!1)};return u("div",{className:"user__meta",children:[u("div",{className:"user__meta__item",style:{color:t>=200?"#f44336":"#ffffff"},children:[bt(t)," \u2022 ",t.toFixed(2),e(ve,{color:t>=200?"error":""})]}),r?c?e(Fe,{style:{width:20,height:20,margin:14}}):e(Oe,{onClick:l,children:e(Be,{})}):null,((f=Object.entries(s).filter(([,d])=>d>0))==null?void 0:f.length)?e(Se,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(s).filter(([,d])=>d>0).map(([d,h])=>e("li",{className:"warning-list__item",children:`${h}x ${Y[d]}`},Y[d]))}),children:e("div",{className:"user__meta__item warning",children:e(ye,{color:s.NO_PROJECT>0||s.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(Re,{color:"secondary"})})]})};oe.propTypes={hours:v.number.isRequired,user:v.instanceOf(Object).isRequired,pdf:v.bool,warnings:v.instanceOf(Object).isRequired};oe.defaultProps={pdf:!1};const le=n=>{const{id:a,name:t,lastName:s,profilePicture:i,email:r,showMeta:c,pdf:o,disabled:l,hours:f,warnings:d}=n,h=I();return u(z,{className:"user",children:[u("div",{className:"user__pressable",onClick:()=>l?null:h(`/users/${a}`),style:{pointerEvents:l?"none":"initial"},children:[e(Z,{alt:t,src:i,className:"user__avatar"}),u("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:r})]})]}),c?e(oe,{pdf:o,hours:f,warnings:d,user:{id:a,name:t,lastName:s,email:r}}):null]})};le.propTypes={id:v.oneOfType([v.number,v.string]),name:v.string,lastName:v.string,profilePicture:v.string,email:v.string,showMeta:v.bool,pdf:v.bool,disabled:v.bool,hours:v.number,warnings:v.instanceOf(Object)};le.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null};var O=T(le);const Ut=()=>{var f;const n=P(),a=V(),t=I(),[s,i]=g.exports.useState(!1),r=n.teamStore.teamList.find(({id:d})=>d===Number(a.id)),c=()=>{i(!0)},o=()=>{i(!1)},l=()=>{n.teamStore.removeTeam(r),o(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),r?u(Q,{children:[u("div",{className:"screen team-detail",children:[u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[u("div",{className:"screen__header__left",children:[e(Z,{alt:r==null?void 0:r.name,src:r==null?void 0:r.image,className:"team-detail__avatar"}),e("h2",{children:r==null?void 0:r.name})]}),e("div",{className:"screen__header__right",children:e(D,{onClick:c,children:e(Ae,{})})})]}),e("main",{children:u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Team collaborators"})}),((f=r==null?void 0:r.users)==null?void 0:f.length)?r.users.map(d=>e(O,{id:d.id,profilePicture:d==null?void 0:d.profilePicture,name:d==null?void 0:d.name,email:d==null?void 0:d.email,hours:d==null?void 0:d.hours,warnings:d==null?void 0:d.warnings,showMeta:!0},d.id)):null]})})]}),e(Ne,{className:"team-detail__edit-team",color:"primary","aria-label":"Edit team",onClick:()=>{t(`/teams/edit/${r.id}`)},children:e(Me,{})})]}),u(We,{open:s,onClose:o,"aria-labelledby":"draggable-dialog-title",children:[e(qe,{style:{cursor:"move"},id:"draggable-dialog-title",children:`Delete team ${r.name}`}),e(ze,{children:e(He,{children:`Are you sure you want to delete "${r.name}" team?`})}),u(Je,{children:[e(D,{autoFocus:!0,onClick:o,color:"primary",children:"Cancelar"}),e(D,{onClick:l,color:"primary",children:"Confirmar"})]})]})]}):null};var Ft=T(Ut);const ce=n=>{const{id:a,name:t,image:s,avatarSize:i,fontSize:r,disabled:c,card:o}=n,l=I();return o?u(z,{className:"team card",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[s.length?e("img",{className:"team__image",src:s,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:r},children:t})})]}):u(z,{className:"team",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[e(Z,{alt:t,src:s,className:"team__avatar",style:{width:i,height:i}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:r},children:t})})]})};ce.propTypes={id:v.number.isRequired,name:v.string,image:v.string,avatarSize:v.number,fontSize:v.number,disabled:v.bool,card:v.bool};ce.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var G=T(ce);const Ot=()=>{const n=P(),a=V(),t=I(),s=n.teamStore.teamList.find(p=>p.id===Number(a.id)),[i,r]=g.exports.useState(""),[c,o]=g.exports.useState(""),[l,f]=g.exports.useState([]),[d,h]=g.exports.useState([]),E=(p,k,U)=>{f(C.sortBy(k.filter(F=>F.id!==p.id),"name")),h(C.sortBy([...U,p],"name"))},m=(p,k,U)=>{h(C.sortBy(U.filter(F=>F.id!==p.id),"name")),f(C.sortBy([...k,p],"name"))},w=async()=>{const p=await n.teamStore.editTeam(s.id,{name:i,image:c,users:d});t(`/teams/${p}`),p&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{r(s.name),o(s.image),h(s.users);const p=[...n.userStore.userList];s.users.forEach(k=>{p.forEach((U,F)=>{U.id===k.id&&p.splice(F,1)})}),f(p)},[s]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:u(j,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Edit team ${s.name}`})}),u("main",{children:[u("div",{className:"create-team__form",children:[u("div",{className:"create-team__form__content",children:[e(x,{id:"team-name",label:"Name",value:i,onChange:p=>{r(p.target.value)}}),e(x,{id:"team-image",label:"Image",value:c,onChange:p=>{o(p.target.value)}}),(i==null?void 0:i.length)||(c==null?void 0:c.length)?e("div",{className:"screen__header__preview",children:e(G,{name:i,image:c,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(D,{variant:"outlined",onClick:w,children:"Salvar"})]}),u("div",{className:"create-team__user-lists",children:[u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),l.map(p=>u("div",{className:"user-list__item",children:[e(O,{id:p.id,profilePicture:p==null?void 0:p.profilePicture,name:p==null?void 0:p.name,email:p==null?void 0:p.email,hours:p==null?void 0:p.hours},p.id),e(D,{className:"user-list__item__bt-add",onClick:()=>E(p,l,d),children:e(Le,{})})]},p.id))]}),u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),d.map(p=>u("div",{className:"user-list__item",children:[e(D,{className:"user-list__item__bt-add",onClick:()=>m(p,l,d),children:e(be,{})}),e(O,{id:p.id,profilePicture:p==null?void 0:p.profilePicture,name:p==null?void 0:p.name,email:p==null?void 0:p.email,hours:p==null?void 0:p.hours})]},p.id))]})]})]})]})})};var Bt=T(Ot);const Rt=()=>{const n=P(),a=I(),[t,s]=g.exports.useState(""),[i,r]=g.exports.useState(""),[c,o]=g.exports.useState([]),[l,f]=g.exports.useState([]),d=m=>{o(C.sortBy(c.filter(w=>w.id!==m.id),"name")),f(C.sortBy([...l,m],"name"))},h=m=>{f(C.sortBy(l.filter(w=>w.id!==m.id),"name")),o(C.sortBy([...c,m],"name"))},E=async()=>{const m=n.teamStore.createTeam({name:t,image:i,users:l});n.teamStore.fetchTeamList(),a(`/teams/${m}`),m&&alert(`Team ${t} created.`)};return g.exports.useEffect(()=>{o(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:u(j,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Create team"})}),u("main",{children:[u("div",{className:"create-team__form",children:[u("div",{className:"create-team__form__content",children:[e(x,{id:"team-name",label:"Name",value:t,onChange:m=>{s(m.target.value)}}),e(x,{id:"team-image",label:"Image",value:i,onChange:m=>{r(m.target.value)}}),(t==null?void 0:t.length)||(i==null?void 0:i.length)?e("div",{className:"screen__header__preview",children:e(G,{name:t,image:i,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(D,{variant:"outlined",onClick:E,children:"Create"})]}),u("div",{className:"create-team__user-lists",children:[u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),c.map(m=>u("div",{className:"user-list__item",children:[e(O,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours},m.id),e(D,{className:"user-list__item__bt-add",onClick:()=>d(m),children:e(Le,{})})]},m.id))]}),u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),l.map(m=>u("div",{className:"user-list__item",children:[e(D,{className:"user-list__item__bt-add",onClick:()=>h(m),children:e(be,{})}),e(O,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours})]},m.id))]})]})]})]})})};var At=T(Rt);const Mt=()=>{var c,o;const n=P(),a=I(),[t,s]=g.exports.useState(""),[i,r]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){r(n.teamStore.teamList.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())));return}r(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{r(n.teamStore.teamList),window.scrollTo(0,0)},[]),u("div",{className:"screen teams",children:[u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[e("h2",{children:"Teams"}),e("div",{className:"screen__header__right",children:((o=(c=n==null?void 0:n.teamStore)==null?void 0:c.teamList)==null?void 0:o.length)?e(x,{id:"filter-term",label:"Filter",size:"small",value:t,onChange:l=>{s(l.target.value)}}):null})]}),e("main",{children:(i==null?void 0:i.length)?i.map(l=>e(G,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id)):e("div",{children:"No teams found."})})]}),e(Ne,{className:"teams__create-team",color:"primary","aria-label":"Create team",onClick:()=>{a("/teams/create")},children:e(Ke,{})})]})};var Wt=T(Mt);const de=n=>{const{project:a,time:t,description:s,disabled:i,showMeta:r,warnings:c}=n,o=I();return u(z,{button:!i,className:"time-entry",style:{borderColor:a.color},children:[u("div",{className:"time-entry__pressable",onClick:()=>a.id?o(`/projects/${a.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:a.name})}),u("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:a.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:s})]})]}),r&&(c==null?void 0:c.length)?e("div",{className:"time-entry__meta",children:e(Se,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:c.map(l=>e("li",{className:"warning-list__item",children:l}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(ye,{color:c.length===1&&c[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};de.propTypes={project:v.instanceOf(Object),time:v.string,description:v.string,disabled:v.bool,showMeta:v.bool,warnings:v.arrayOf(v.instanceOf(Object))};de.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var qt=T(de);const zt=()=>{var o;const n=P(),a=V(),t=n.userStore.userList.find(({id:l})=>l===a.id),[s,i]=g.exports.useState([]),[r,c]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(r){i(t.timeEntriesByDay.filter(l=>l.timeEntries.find(f=>{var d;return(d=f==null?void 0:f.warnings)==null?void 0:d.length})).map(l=>L(N({},l),{timeEntries:l.timeEntries.filter(f=>{var d;return(d=f==null?void 0:f.warnings)==null?void 0:d.length})})));return}i(t.timeEntriesByDay)},[r]),g.exports.useEffect(()=>{i(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[u("div",{className:"screen__header__left",children:[e(Z,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),u("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e(ve,{color:t.hours>=200?"error":""})]})]}),u("main",{children:[(t==null?void 0:t.teams.length)?u("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Collaborator teams"})}),t.teams.map(l=>e(G,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id))]}):null,((o=t==null?void 0:t.timeEntries)==null?void 0:o.length)?u("div",{className:"time-entries",children:[u("header",{className:"section-header",children:[e("h3",{children:"Time entries"}),e("div",{className:"time-entries__filter",children:e(Qe,{control:e(Ye,{checked:r,onChange:()=>c(!r),name:"filterWarnings",color:"primary"}),label:"Filter warnings"})})]}),(s==null?void 0:s.length)?s.map(l=>u("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:l.date})}),e("div",{className:"description",children:l.timeEntries.map(f=>{var d;return e(qt,{disabled:!((d=f==null?void 0:f.project)==null?void 0:d.id),project:f.project,time:f.timeInterval.duration,description:f.description,warnings:f.warnings,showMeta:!0},f.id)})})]},l.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var Ht=T(zt);const Jt=()=>{var o,l,f,d;const n=P(),[a,t]=g.exports.useState(""),[s,i]=g.exports.useState([]),[r,c]=g.exports.useState("name");return g.exports.useEffect(()=>{const h=r==="hours"?"desc":"asc";if(a.length){i(C.orderBy(n.userStore.userList.filter(E=>E.name.toLowerCase().includes(a.toLowerCase())),r,h));return}i(C.orderBy(n.userStore.userList,r,h))},[a]),g.exports.useEffect(()=>{const h=r==="hours"?"desc":"asc";i(E=>C.orderBy(E,r,h))},[r]),g.exports.useEffect(()=>{i(C.orderBy(n.userStore.userList,r)),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:u(j,{maxWidth:"lg",children:[u(W,{component:"header",className:"screen__header",children:[e("h2",{children:"Collaborators"}),u(W,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((l=(o=n==null?void 0:n.userStore)==null?void 0:o.userList)==null?void 0:l.length)?e(W,{flex:{xs:2},children:u(Ze,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(Ve,{id:"order-by-label",children:"Order by"}),u(Xe,{labelId:"order-by-label",id:"order-by",value:r,label:"Order by",onChange:h=>c(h.target.value),size:"small",children:[e(re,{value:"name",children:"Name"}),e(re,{value:"email",children:"E-mail"}),e(re,{value:"hours",children:"Workload"})]})]})}):null,((d=(f=n==null?void 0:n.userStore)==null?void 0:f.userList)==null?void 0:d.length)?e(W,{flex:"3",children:e(x,{fullWidth:!0,id:"filter-term",label:"Filter",size:"small",value:a,onChange:h=>{t(h.target.value)}})}):null]})]}),e("main",{children:(s==null?void 0:s.length)?s.map(h=>e(O,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,lastName:h==null?void 0:h.lastName,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours,payment:h==null?void 0:h.payment,warnings:h==null?void 0:h.warnings,showMeta:!0,pdf:!0},h.id)):e("div",{children:"No collaborators found."})})]})})};var Kt=T(Jt);const he=n=>{const{id:a,index:t,name:s,color:i,disabled:r=!1}=n,[c,o]=g.exports.useState(!1),l=I();return g.exports.useEffect(()=>{const f=setTimeout(()=>{o(!0)},t*50+100);return()=>{clearTimeout(f)}},[]),e(z,{button:!r,onClick:()=>r?null:l(`/projects/${a}`),className:"project",style:{borderColor:c?i:"transparent"},children:e("div",{className:"project__name",children:s})})};he.propTypes={id:v.string.isRequired,index:v.number.isRequired,name:v.string,color:v.string,disabled:v.bool};he.defaultProps={name:"",color:"",disabled:!1};var Qt=T(he);const Yt=()=>{var r,c;const n=P(),[a,t]=g.exports.useState(""),[s,i]=g.exports.useState([]);return g.exports.useEffect(()=>{if(a.length){i(n.projectStore.projectList.filter(o=>o.name.toLowerCase().includes(a.toLowerCase())));return}i(n.projectStore.projectList)},[a]),g.exports.useEffect(()=>{i(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[e("h2",{children:"Projects"}),((c=(r=n==null?void 0:n.projectStore)==null?void 0:r.projectList)==null?void 0:c.length)?e(x,{id:"filter-term",label:"Filter",size:"small",value:a,onChange:o=>{t(o.target.value)}}):null]}),e("main",{children:(s==null?void 0:s.length)?s.map((o,l)=>e(Qt,{id:o.id,color:o==null?void 0:o.color,name:o==null?void 0:o.name,index:l},o.id)):e("div",{children:"No projects found."})})]})})};var Zt=T(Yt);const Vt=()=>{var s,i;const n=P(),a=V(),t=n.projectStore.projectList.find(({id:r})=>r===a.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:e("div",{className:"project-detail__estimate",children:e("div",{children:`Total: ${M(t==null?void 0:t.duration).toFixed(2)} hours`})})})]}),u("main",{children:[((s=t==null?void 0:t.timeEntriesByUser)==null?void 0:s.length)?u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Project collaborators"})}),t.timeEntriesByUser.map(r=>e(O,{id:r.id,profilePicture:r==null?void 0:r.profilePicture,name:r==null?void 0:r.name,email:r==null?void 0:r.email,hours:r==null?void 0:r.hours},r.id))]}):null,((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?null:e("div",{children:"No time entries found."})]})]})}):null};var Xt=T(Vt);const Gt=()=>{var o,l,f,d,h,E;const n=P(),[a,t]=g.exports.useState(""),[s,i]=g.exports.useState(!1),[r]=B("clockify-api-key"),c=async()=>{i(!0),await H(n.authStore.authenticate(a)),i(!1)};return g.exports.useEffect(()=>{const m=document.querySelector(".login .fetch-data-log");m&&(m.scrollTop=m.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(r==null?void 0:r.length)&&t(r)},[]),e("div",{className:"screen login",children:e(j,{maxWidth:"lg",className:"login__container",children:u(W,{position:"relative",children:[e("h1",{children:"Clockify Teams"}),e("div",{className:"login__box",children:n.authStore.isConfirmingIdentity?u(Q,{children:[e(O,{disabled:!0,name:(l=(o=n==null?void 0:n.authStore)==null?void 0:o.user)==null?void 0:l.name,profilePicture:(d=(f=n==null?void 0:n.authStore)==null?void 0:f.user)==null?void 0:d.profilePicture,email:(E=(h=n==null?void 0:n.authStore)==null?void 0:h.user)==null?void 0:E.email}),e("div",{className:"fetch-data-log",children:n.authStore.fetchDataLog.map(({text:m,color:w})=>e("div",{style:{color:w},children:m},m))})]}):u(Q,{children:[n.authStore.autoLogin?null:e(x,{id:"api-key",label:"Clockify API Key",value:a,onChange:m=>{t(m.target.value)}}),s||n.authStore.autoLogin?e(we,{}):e(D,{variant:"outlined",onClick:c,children:"Entrar"})]})})]})})})};var ea=T(Gt);const ta=()=>{var a;const n=P();return e(Ge,{children:((a=n==null?void 0:n.authStore)==null?void 0:a.isAuthenticated)?u(Q,{children:[e(kt,{}),u(fe,{children:[e($,{path:"/users/:id",element:e(Ht,{})}),e($,{path:"/projects/:id",element:e(Xt,{})}),e($,{path:"/projects",element:e(Zt,{})}),e($,{path:"/teams/edit/:id",element:e(Bt,{})}),e($,{path:"/teams/create",element:e(At,{})}),e($,{path:"/teams/:id",element:e(Ft,{})}),e($,{path:"/teams",element:e(Wt,{})}),e($,{path:"/",element:e(Kt,{})})]})]}):e(fe,{children:e($,{path:"/",element:e(ea,{})})})})};var aa=T(ta);const ra=et({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),Ce=({children:n})=>u(tt,{theme:ra,children:[e(at,{}),n]});Ce.propTypes={children:v.node.isRequired};const me=n=>{const{active:a}=n;return a?e("div",{className:"loader",children:e(we,{style:{height:1}})}):null};me.propTypes={active:v.bool};me.defaultProps={active:!1};const K=new Date,sa=()=>{const n=P(),[a,t]=g.exports.useState(!1),[s,i]=g.exports.useState(new Date(K.getFullYear(),K.getMonth(),1)),[r,c]=g.exports.useState(new Date(K.getFullYear(),K.getMonth()+1,0)),o=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(s,r),t(!0),await H(n.projectStore.fetchProjectList()),await H(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:u(_e,{className:"query-date-selector",component:"footer",children:[e("div",{className:"query-date-selector__loader",children:e(me,{active:a})}),u(J,{className:"query-date-selector__content",gap:2,children:[e(J,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:1,className:"query-date-selector__date-picker",children:e(rt,{startText:"Start date",endText:"End date",value:[s,r],disabled:a,onChange:([l,f])=>{i(l),c(f)},renderInput:(l,f)=>u(J,{display:"flex",gap:2,style:{width:"100%"},children:[e(x,L(N({},l),{helperText:null,size:"small",fullWidth:!0})),e(x,L(N({},f),{helperText:null,size:"small",fullWidth:!0}))]})})}),e(J,{width:{xs:"100%",sm:"initial"},children:e(D,{fullWidth:!0,variant:"outlined",disabled:a,onClick:o,className:"query-date-selector__bt-search",children:e(st,{})})})]})]})};var ia=T(sa);const na=()=>{const[n,a]=g.exports.useState(null),[t]=B("clockify-api-key"),s=async()=>{const i=lt({RootStore:Ct,env:Nt});a(i),(t==null?void 0:t.length)&&(i.authStore.setAutoLogin(!0),await H(i.authStore.authenticate(t)),i.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{s()},[]),n?e("div",{className:"app",children:e(Pt,{value:n,children:e(it,{dateAdapter:nt,locale:ot,children:u(Ce,{children:[e(aa,{}),e(ia,{})]})})})}):null};ct.register(dt,ht,mt,ut,ft,pt);gt.render(e(_t.StrictMode,{children:e(na,{})}),document.getElementById("root"));
