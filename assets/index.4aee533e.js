var ft=Object.defineProperty,pt=Object.defineProperties;var gt=Object.getOwnPropertyDescriptors;var fe=Object.getOwnPropertySymbols;var ze=Object.prototype.hasOwnProperty,He=Object.prototype.propertyIsEnumerable;var Le=(n,r,t)=>r in n?ft(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,N=(n,r)=>{for(var t in r||(r={}))ze.call(r,t)&&Le(n,t,r[t]);if(fe)for(var t of fe(r))He.call(r,t)&&Le(n,t,r[t]);return n},C=(n,r)=>pt(n,gt(r));var Je=(n,r)=>{var t={};for(var a in n)ze.call(n,a)&&r.indexOf(a)<0&&(t[a]=n[a]);if(n!=null&&fe)for(var a of fe(n))r.indexOf(a)<0&&He.call(n,a)&&(t[a]=n[a]);return t};var S=(n,r,t)=>(Le(n,typeof r!="symbol"?r+"":r,t),t);import{a as Ze,m as ae,o as b,c as xe,b as P,f as ee,g as Q,R as Ge,j as e,N as ne,d as L,r as g,u as X,B as $,e as d,h as _t,S as St,i as j,A as et,C as H,k as x,I as oe,l as De,n as vt,p as Ee,q as yt,T as tt,s as rt,t as Nt,D as Ie,v as Pe,w as $e,x as ke,y as M,z as Ve,E as je,F as at,G as st,H as Ue,J as te,P as v,L as le,K as it,M as ce,O as ve,Q as ge,U as nt,V as bt,W as ot,X as lt,_ as A,Y as wt,Z as Lt,$ as xt,a0 as Tt,a1 as Ct,a2 as Dt,a3 as Te,a4 as Xe,a5 as ct,a6 as Et,a7 as kt,a8 as Ye,a9 as V,aa as It,ab as Pt,ac as $t,ad as jt,ae as Ut,af as Rt,ag as Ft,ah as Bt,ai as Ot,aj as At,ak as Mt,al as Wt,am as qt,an as zt,ao as Ht,ap as Jt,aq as Vt}from"./vendor.352c7246.js";const Xt=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}};Xt();const Yt="https://api.clockify.me/api/v1",Kt="https://reports.api.clockify.me/",Qt=Ze.create({baseURL:Yt,timeout:1e4}),dt=Ze.create({baseURL:Kt,timeout:1e4}),z=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},a=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(a))}];class ye{constructor(r){S(this,"id",null);S(this,"name",null);S(this,"email",null);S(this,"defaultWorkspace",null);S(this,"profilePicture",null);S(this,"timeEntries",[]);S(this,"timeEntriesByDay",[]);S(this,"teams",[]);S(this,"hours",null);S(this,"warnings",{});S(this,"meta",{valuePerHour:0,attachments:[]});if(ae(this,{id:b,name:b,email:b,defaultWorkspace:b,profilePicture:b,timeEntries:b,timeEntriesByDay:b,teams:b,hours:b,warnings:b,meta:b}),r==null||r.id==null)throw new Error("Invalid user constructor");const{id:t,name:a,email:i,defaultWorkspace:s,profilePicture:o,timeEntries:l,timeEntriesByDay:c,teams:f,hours:u,warnings:_,meta:T}=r;this.id=t,this.name=a||"",this.email=i||"",this.defaultWorkspace=s||"",this.profilePicture=o||"",this.timeEntries=l||[],this.timeEntriesByDay=c||[],this.teams=f||[],this.hours=u||0,this.warnings=_||{},this.meta=T||{}}static fromApi({id:r,name:t,email:a,defaultWorkspace:i,profilePicture:s,timeEntries:o,timeEntriesByDay:l,teams:c,hours:f,warnings:u,meta:_}={}){return new ye({id:r,name:t,email:a,defaultWorkspace:i,profilePicture:s,timeEntries:o,timeEntriesByDay:l,teams:c,hours:f,warnings:u,meta:_})}}class Zt{constructor(){S(this,"user",null);S(this,"authStatus","unauthenticated");S(this,"autoLogin",!1);S(this,"fetchDataLog",[]);ae(this,{user:b,authStatus:b,autoLogin:b,fetchDataLog:b,isAuthenticated:xe,isConfirmingIdentity:xe,isUnauthenticated:xe,setUser:P.bound,confirmIdentity:P.bound,unauthenticate:P.bound,setAutoLogin:P.bound,feedFetchDataLog:P.bound,setStatusConfirmingIdentity:P.bound,clearDataLog:P.bound,authenticate:ee})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(r){this.user=ye.fromApi(r)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(r){this.autoLogin=r}feedFetchDataLog(r,t){let a="";switch(t){case"success":{a="#27ae60";break}case"error":{a="#c0392b";break}default:{a="#ffffff";break}}typeof r=="string"&&r.length&&this.fetchDataLog.push({text:r,color:a})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,Q().defaults.headers.common["X-Api-Key"]=null}*authenticate(r){try{const[,t]=z("clockify-api-key");Q().defaults.headers.common["X-Api-Key"]=r,dt.defaults.headers.common["X-Api-Key"]=r,t(r);const a=yield Q().get("/user");return(a==null?void 0:a.status)!==200?(alert("Invalid Clockify API Key"),!1):(a==null?void 0:a.data)?(this.setUser(a.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const Ke=n=>{let r=n;r=r*60*60;let t=Math.floor(r/(60*60));r-=t*60*60;let a=Math.floor(r/60);return r-=a*60,t<10&&(t=`0${t}`),a<10&&(a=`0${a}`),`${t}:${a}`},_e=n=>{try{const r=new Date(n).toISOString().split("T");if(r==null?void 0:r.length){const t=r[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(r){return console.log(r),null}},Ce=n=>{try{const r=n==null?void 0:n.split("T");if(r==null?void 0:r.length){const t=r[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(r){return console.log(r),null}},ie=n=>{try{const r=n==null?void 0:n.split("H");let t=0,a=0;return(r==null?void 0:r.length)?((r==null?void 0:r.length)===2?(t=Number(r[0].split("PT")[1])||0,a=Number(r[1].split("M")[0])||0):r[0]!=="PT0S"&&(a=Number(r[0].replace("PT","").replace("M",""))),Number(t+a/60)):null}catch(r){return console.log(r),null}},Gt=Ge.forwardRef(function(r,t){const s=r,{onChange:a}=s,i=Je(s,["onChange"]);return e(ne,C(N({},i),{getInputRef:t,onValueChange:o=>{a({target:{name:r.name,value:o.value}})},thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0}))});var er={Currency:Gt};const tr=n=>n.replace(/[^\w\s]/gi,""),Se={NO_DESCRIPTION:"Time entry without description",TIME_LIMIT:"Time entry longer than 6 hours"};class rr{constructor(){S(this,"userList",[]);S(this,"queryStartDate",null);S(this,"queryEndDate",null);ae(this,{userList:b,queryStartDate:b,queryEndDate:b,setUserList:P.bound,formatUserData:P.bound,getUsersTeams:P.bound,storeUserMeta:P.bound,fetchUserList:ee,fetchUserTimeEntries:ee,fetchUserSummaryReport:ee,sendReports:ee,sendReport:ee})}setUserList(r=[]){this.userList=r.map(t=>ye.fromApi(t))}setQueryDate(r,t){this.queryStartDate=r,this.queryEndDate=t}*fetchUserTimeEntries(r={}){const{id:t,name:a,pageSize:i=5e3}=r,{NO_DESCRIPTION:s,TIME_LIMIT:o}=Se;try{L().authStore.feedFetchDataLog(`fetching user ${a} time entries...`);const{defaultWorkspace:l}=L().authStore.user,c=yield Q().get(`/workspaces/${l}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":i}});if(c.status!==200)return L().authStore.feedFetchDataLog(`error fetching ${a} time entries`,"error"),!1;if(c==null?void 0:c.data){let f=0;const u={};Object.keys(Se).forEach(T=>{u[T]=0});const _=c.data.map(T=>{var h,U;const m=(h=T==null?void 0:T.timeInterval)==null?void 0:h.duration,E=C(N({},T),{warnings:[]});if(((U=T==null?void 0:T.description)==null?void 0:U.length)||(E.warnings.push(s),u.NO_DESCRIPTION++),m==null?void 0:m.length){const R=ie(m);R&&(f+=R,R>=6&&(E.warnings.push(o),u.TIME_LIMIT++))}return E});return L().authStore.feedFetchDataLog(`fetched ${a} time entries`,"success"),{timeEntries:_,hours:f,warnings:u}}return L().authStore.feedFetchDataLog(`error fetching ${a} time entries`,"error"),!1}catch(l){return console.log(l),L().authStore.feedFetchDataLog(`error fetching ${a} time entries`,"error"),!1}}formatUserData(r){var t,a;try{let i=[];for(const s of r.timeEntries){const o=(t=s==null?void 0:s.timeInterval)==null?void 0:t.duration,l=(a=s==null?void 0:s.timeInterval)==null?void 0:a.start,c=L().projectStore.projectList.find(({id:u})=>u===(s==null?void 0:s.projectId)),f=i.find(u=>u.date===Ce(l));(o==null?void 0:o.length)&&(l==null?void 0:l.length)&&(f?i=i.map(u=>u.date===Ce(l)?{date:u.date,timeEntries:[...u.timeEntries,C(N({},s),{project:c||{name:"Without project",color:"#ffffff"}})],hours:u.hours+ie(o)}:u):i.push({date:Ce(l),timeEntries:[C(N({},s),{project:c||{name:"Without project",color:"#ffffff"}})],hours:ie(o)}))}return C(N({},r),{timeEntriesByDay:i})}catch(i){return console.log(i),!1}}getUsersTeams(){const r=[];for(const t of this.userList){const a=[];for(const i of L().teamStore.teamList)for(const s of i.users)s.id===t.id&&a.push(i);r.push(C(N({},t),{teams:a}))}this.setUserList(r)}storeUserMeta(r={}){const{id:t,userMeta:a}=r,[i,s]=z("user-meta"),o=C(N({},i),{[t]:a});i[t]&&(o[t]=N(N({},i[t].meta),a)),s(o)}*fetchUserList(r={}){var t;try{L().authStore.feedFetchDataLog("fetching user list...");const[a]=z("user-meta"),{pageSize:i=5e3}=r,{defaultWorkspace:s}=L().authStore.user,o=yield Q().get(`/workspaces/${s}/users`,{params:{"page-size":i,status:"ACTIVE"}});if(o.status!==200)return L().authStore.feedFetchDataLog("error fecthing user list","error"),!1;if((t=o==null?void 0:o.data)==null?void 0:t.length){L().authStore.feedFetchDataLog("fetched user list","success");const l=[];for(const c of o.data){const f=yield this.fetchUserTimeEntries(c);if(f){const u=N(N({},c),f);a&&a[c.id]&&(u.meta=a[c.id]);const _=this.formatUserData(u);l.push(_)}}if(l.length)return this.setUserList(l),L().authStore.feedFetchDataLog("fetched all users time entries","success"),!0}return L().authStore.feedFetchDataLog("error fetching user list","error"),!1}catch(a){return console.log(a),L().authStore.feedFetchDataLog("error fetching user list","error"),!1}}*fetchUserSummaryReport(r){try{const{defaultWorkspace:t}=L().authStore.user,a=yield dt.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[r.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),s=`${r.name.toLowerCase().split(" ").map(l=>tr(l)).join("-")}__from_${_e(this.queryStartDate)}_to_${_e(this.queryEndDate)}`,o=new Blob([a.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(o,s);else{const l=document.createElement("a"),c=document.querySelector("body");l.href=window.URL.createObjectURL(o),l.download=s,l.style.display="none",c.appendChild(l),l.click(),c.removeChild(l),window.URL.revokeObjectURL(l.href)}return!1}catch(t){return console.log(t),L().authStore.feedFetchDataLog("error fetching user list","error"),!1}}*sendReports(r={}){try{const{collaborator_ids:t}=r;return(yield Q().post("/send-reports",{collaborator_ids:t})).status===200}catch(t){return console.log(t),!1}}*sendReport(r={}){try{const{collaborator_id:t}=r;return(yield Q().post("/send-reports",{collaborator_ids:[t]})).status===200}catch(t){return console.log(t),!1}}}class Re{constructor(r){S(this,"id",null);S(this,"name",null);S(this,"email",null);S(this,"workspaceId",null);S(this,"color",null);S(this,"duration",null);S(this,"estimate",null);S(this,"users",[]);S(this,"timeEntriesByUser",[]);if(ae(this,{id:b,name:b,email:b,workspaceId:b,color:b,duration:b,estimate:b,users:b,timeEntriesByUser:b}),r==null||r.id==null)throw new Error("Invalid Project constructor");const{id:t,name:a,email:i,workspaceId:s,color:o,duration:l,estimate:c,users:f,timeEntriesByUser:u}=r;this.id=t,this.name=a||"",this.email=i||"",this.workspaceId=s||"",this.color=o||"",this.duration=l||"",this.estimate=c||"",this.users=f||[],this.timeEntriesByUser=u||[]}static fromApi({id:r,name:t,email:a,workspaceId:i,color:s,duration:o,estimate:l,users:c,timeEntriesByUser:f}={}){return new Re({id:r,name:t,email:a,workspaceId:i,color:s,duration:o,estimate:l,users:c,timeEntriesByUser:f})}}class ar{constructor(){S(this,"projectList",[]);ae(this,{projectList:b,setProjectList:P.bound,formatProjectData:P.bound,formatProjectList:P.bound,fetchProjectList:ee})}setProjectList(r=[]){this.projectList=r.map(t=>Re.fromApi(t))}formatProjectData(r={}){var t;try{const{id:a}=r;let i=[];for(const s of L().userStore.userList){const o=s.timeEntries.filter(l=>l.projectId===a);for(const l of o){const c=i.find(_=>_.id===l.userId);let f=0;const u=(t=l==null?void 0:l.timeInterval)==null?void 0:t.duration;(u==null?void 0:u.length)&&(f+=ie(u)),c?i=i.map(_=>_.id===l.userId?C(N({},_),{timeEntries:[..._.timeEntries,l],hours:_.hours+f}):_):i.push(C(N({},s),{timeEntries:[l],hours:f}))}}return C(N({},r),{timeEntriesByUser:i})}catch(a){return console.log(a),!1}}formatProjectList(){const r=[];for(const t of this.projectList){const a=this.formatProjectData(t);r.push(a)}this.setProjectList(r)}*fetchProjectList(r={}){var t;try{L().authStore.feedFetchDataLog("fetching project list...");const{pageSize:a=5e3}=r,{defaultWorkspace:i}=L().authStore.user,s=yield Q().get(`/workspaces/${i}/projects`,{params:{archived:!1,"page-size":a}});return s.status!==200?(L().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=s==null?void 0:s.data)==null?void 0:t.length)?(this.setProjectList(s.data),L().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(a){return console.log(a),L().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class Fe{constructor(r){S(this,"id",null);S(this,"name",null);S(this,"image",null);S(this,"users",[]);S(this,"timeEntriesByProject",[]);if(ae(this,{id:b,name:b,image:b,users:b,timeEntriesByProject:b}),r==null||r.id==null)throw new Error("Invalid Team constructor");const{id:t,name:a,image:i,users:s,timeEntriesByProject:o}=r;this.id=t,this.name=a||"",this.image=i||"",this.users=s||[],this.timeEntriesByProject=o||[]}static fromApi({id:r,name:t,image:a,users:i,timeEntriesByProject:s}={}){return new Fe({id:r,name:t,image:a,users:i,timeEntriesByProject:s})}}class sr{constructor(){S(this,"teamList",[]);ae(this,{teamList:b,setTeamList:P.bound,createTeam:P.bound,editTeam:P.bound,fetchTeamList:P.bound,formatTeamData:P.bound})}createTeam(r={}){try{const{users:t}=r,[a,i]=z("team-list"),s=a||[];let o=1;return s.length?(o=s.length+1,i([...s,C(N({},r),{id:o,users:t.map(l=>l.id)})])):i([C(N({},r),{id:1,users:t.map(l=>l.id)})]),o}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(r,t={}){try{const[a,i]=z("team-list"),{users:s}=t;return i(a.map(o=>o.id===r?C(N(N({},o),o),{users:s.map(l=>l.id)}):o)),r}catch(a){return console.log(a),!1}finally{this.fetchTeamList()}}removeTeam(r={}){try{const[t,a]=z("team-list"),i=t.filter(s=>s.id!==r.id);a(i),this.setTeamList(i.map(s=>C(N({},s),{users:L().userStore.userList.filter(o=>s.users.includes(o.id))})))}catch(t){console.log(t)}}setTeamList(r=[]){this.teamList=r.map(t=>Fe.fromApi(t))}fetchTeamList(){try{L().authStore.feedFetchDataLog("fetching team list...");const[r]=z("team-list");if(r.length){const t=[];for(const a of r){const i=this.formatTeamData(a);t.push(C(N({},i),{users:L().userStore.userList.filter(s=>a.users.includes(s.id))}))}this.setTeamList(t),L().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(r){return console.log(r),L().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(r={}){var t;try{const a=[];let i=[];for(const o of r.users){const l=L().userStore.userList.find(c=>c.id===o);if(l){const{timeEntries:c,hours:f}=l;for(const _ of c){const T=i.find(h=>h.id===_.projectId);let m=0;const E=(t=_==null?void 0:_.timeInterval)==null?void 0:t.duration;(E==null?void 0:E.length)&&(m+=ie(E)),T?i=i.map(h=>h.id===_.projectId?C(N({},h),{id:_.projectId,timeEntries:[...h.timeEntries,_],hours:h.hours+m}):h):i.push({id:_.projectId,timeEntries:[_],hours:m})}const u=L().userStore.userList.find(_=>_.id===o.id);a.push(C(N({},u),{timeEntries:c,hours:f}))}}let s=0;for(const o of i){if(o.id){const l=L().projectStore.projectList.find(c=>c.id===o.id);l&&(i[s]=C(N({},i[s]),{name:l.name,color:l.color}))}else i[s]=C(N({},i[s]),{name:"Without project",color:"#ffffff"});s++}return C(N({},r),{users:a,timeEntriesByProject:i})}catch(a){return console.log(a),!1}}}class ir{constructor(){S(this,"authStore",null);S(this,"userStore",null);S(this,"projectStore",null);S(this,"teamStore",null)}init(){this.authStore=new Zt,this.userStore=new rr,this.projectStore=new ar,this.teamStore=new sr}}const ht=g.exports.createContext({}),nr=ht.Provider;var q=()=>g.exports.useContext(ht);const or=[{route:"/",label:"Collaborators"},{route:"/teams",label:"Teams"},{route:"/projects",label:"Projects"}],ut=({vertical:n,drawer:r})=>{const t=X(),a=i=>{t(i),r&&r.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:or.map(i=>e("li",{className:"menu__list__item",children:e($,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>a(i.route),children:i.label})},i.route))})})};const lr=()=>{const[n,r]=g.exports.useState(!1),t=()=>{r(!0)},a=()=>{r(!1)};return d("div",{className:"drawer",children:[e($,{onClick:t,children:e(_t,{color:"primary"})}),e(St,{anchor:"right",open:n,onClose:a,onOpen:t,children:e("div",{className:"drawer__content",children:e(ut,{vertical:!0,drawer:{close:a}})})})]})};const cr=()=>e("div",{className:"logo",children:"Clockify Teams"});const dr=()=>{const[n,r]=g.exports.useState(!0);let t=0;const a=()=>{const i=window.pageYOffset||document.documentElement.scrollTop;i>t?r(!1):r(!0),t=i<=0?0:i};return g.exports.useEffect(()=>(window.addEventListener("scroll",a,!1),()=>{window.removeEventListener("scroll",a,!1)}),[]),e(et,{className:"header",position:"sticky",style:{transform:n?"none":"translate3d(0, calc(-100% - 2rem),0)",transition:"transform 0.25s cubic-bezier(0.645,0.045,0.355,1)"},children:e(H,{maxWidth:"lg",children:d("div",{className:"header__content",children:[e(cr,{}),e("div",{className:"header__menu",children:e(ut,{})}),e("div",{className:"header__drawer",children:e(lr,{})})]})})})};var hr=j(dr);const{Currency:Qe}=er,ur=n=>{var qe;const r=q(),{hours:t,warnings:a,error:i,success:s,user:o,pdf:l}=n,[c,f]=g.exports.useState(!1),[u,_]=g.exports.useState(!1),[T,m]=g.exports.useState(!1),[E,h]=g.exports.useState(!1),[U,R]=g.exports.useState("idle"),[B,de]=g.exports.useState(0),[Z,Y]=g.exports.useState([]),[G,he]=g.exports.useState(0),[p,y]=g.exports.useState(0),D=async()=>{_(!0),await te(r.userStore.fetchUserSummaryReport(o)),_(!1)},I=()=>{if(s)return"#2ecc71";if(i)return"#f44336";switch(U){case"success":return"#2ecc71";case"error":return"#f44336";default:return"#fff"}},W=async()=>{try{if(h(!1),m(!0),(await te(r.userStore.sendReport({collaborator_id:o.id}))).error){R("error");return}R("success")}catch(w){console.log(w)}finally{m(!1)}},J=()=>{Y(w=>[...w,{description:"",value:0}])},F=w=>{Y(k=>k.filter((O,K)=>w!==K))},se=w=>{let k=0;return(w==null?void 0:w.length)>1?k+=w.reduce((O,K)=>Number(O.value)+Number(K.value)):w.length===1&&(k+=Number(w[0].value)),y(k),k},ue=w=>{const k=t*B,O=se(w);he(k+O)},be=w=>w<0?"#f44336":w>0?"#2ecc71":"#fff";return g.exports.useEffect(()=>{!c||(r.userStore.storeUserMeta({id:o.id,userMeta:{valuePerHour:B,attachments:Z}}),ue(Z))},[B,Z]),g.exports.useEffect(()=>{var w,k;((w=o==null?void 0:o.meta)==null?void 0:w.valuePerHour)&&de(o.meta.valuePerHour),((k=o==null?void 0:o.meta)==null?void 0:k.attachments)&&Y(o.meta.attachments.map(O=>N({},O))),f(!0)},[]),d("div",{className:"user__meta",children:[d(x,{display:"flex",alignItems:"center",gap:2,padding:2,children:[e("div",{className:"user__meta__item",style:{color:I()},children:l?e(oe,{onClick:D,disabled:u,children:u?e(De,{style:{width:20,height:20}}):e(vt,{})}):null}),e("div",{className:"user__meta__item",style:{color:I()},children:e(oe,{onClick:()=>h(!0),disabled:T,children:T?e(De,{style:{width:20,height:20}}):d("div",{className:"user__meta__payment-report-icon",children:[e(Ee,{}),e("div",{className:"user__meta__payment-report-icon__money-icon",children:e(yt,{})})]})})}),((qe=Object.entries(a).filter(([,w])=>w>0))==null?void 0:qe.length)?e(tt,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(a).filter(([,w])=>w>0).map(([w,k])=>e("li",{className:"warning-list__item",children:`${k}x ${Se[w]}`},Se[w]))}),children:e("div",{className:"user__meta__item warning",children:e(rt,{color:a.NO_PROJECT>0||a.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(Nt,{color:"secondary"})}),d(Ie,{open:E,onClose:()=>h(!1),children:[e(Pe,{children:o.name}),e($e,{children:d(x,{display:"flex",flexDirection:"column",gap:4,paddingTop:2,children:[d(x,{display:"flex",justifyContent:"space-between",gap:2,sx:{alignItems:{xs:"center",sx:"initial"},flexDirection:{xs:"row",sm:"row"}},children:[d(x,{display:"flex",alignItems:"center",gap:1,flex:2,style:{color:t>=200?"#f44336":"#ffffff"},children:[e(ke,{color:t>=200?"error":""}),Ke(t)," \u2022 ",t.toFixed(2)]}),e(x,{display:"flex",flexDirection:"column",alignItems:"center",flex:1,children:e(M,{id:"value-per-hour",label:"Per hour",size:"small",value:B,onChange:w=>{const{value:k}=w.target;k&&de(Number(k))},InputProps:{startAdornment:e(Ve,{position:"start",children:"R$"}),inputComponent:Qe}})})]}),d(x,{display:"flex",flexDirection:"column",gap:2,paddingBottom:2,style:{borderBottom:"1px solid rgba(236, 240, 241, 0.5)"},children:[e(je,{display:"flex",alignItems:"center",gap:1,style:{color:t>=200?"#f44336":"#ffffff",borderBottom:"1px solid rgba(236, 240, 241, 0.5)"},children:"Attachments"}),Z.map((w,k)=>d(x,{display:"flex",gap:2,children:[e(x,{display:"flex",flex:1,children:e(M,{label:"Description",size:"small",fullWidth:!0,value:w.description,onChange:O=>{Y(K=>{const me=[...K];return me[k].description=O.target.value,me})}})}),e(x,{display:"flex",flex:1,children:e(M,{label:"Value",size:"small",fullWidth:!0,value:w.value,InputProps:{startAdornment:e(Ve,{position:"start",children:"R$"}),inputComponent:Qe},onChange:O=>{var K;!((K=O==null?void 0:O.target)==null?void 0:K.value)||Y(me=>{const we=[...me];return we[k].value=Number(O.target.value),ue(we),we})}})}),e(oe,{onClick:()=>F(k),children:e(at,{})})]},`${k}`)),e(x,{alignSelf:"flex-end",children:e(oe,{onClick:J,children:e(st,{})})})]}),d(x,{alignSelf:"flex-end",color:be(G),children:["Total: R$"," ",e(ne,{value:G,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]})]})}),e(Ue,{children:d(x,{display:"flex",gap:2,children:[e($,{autoFocus:!0,onClick:()=>h(!1),variant:"outlined",children:"Close"}),e($,{onClick:W,startIcon:e(Ee,{}),variant:"outlined",children:"Send Report"})]})})]})]}),d(x,{display:"flex",alignItems:"center",gap:2,padding:2,children:[d(x,{color:t>=200?"#f44336":"#ffffff",display:"flex",alignItems:"center",gap:1,children:[e(x,{children:Ke(t)}),e(ke,{color:t>=200?"error":""}),"R$"," ",e(ne,{value:B,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]}),"+",d(x,{color:be(p),children:["R$"," ",e(ne,{value:p,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]}),"=",d(x,{color:be(G),children:["R$"," ",e(ne,{value:G,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]})]})]})};var mr=j(ur);const Be=n=>{const{id:r,name:t,lastName:a,profilePicture:i,email:s,showMeta:o,pdf:l,disabled:c,hours:f,warnings:u,error:_,success:T,meta:m,hasCheckBox:E,checked:h,onCheck:U}=n,R=X();return d(le,{className:"user",children:[E?e("div",{className:"user__checkbox",children:e(it,{checked:h,onChange:B=>U(B.target.checked),color:"primary"})}):null,d("div",{className:"user__pressable",onClick:()=>c?null:R(`/users/${r}`),style:{pointerEvents:c?"none":"initial"},children:[e(ce,{alt:t,src:i,className:"user__avatar"}),d("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:s})]})]}),o?e(mr,{pdf:l,hours:f,warnings:u,user:{id:r,name:t,lastName:a,email:s,meta:m},error:_,success:T}):null]})};Be.propTypes={id:v.oneOfType([v.number,v.string]),name:v.string,lastName:v.string,profilePicture:v.string,email:v.string,showMeta:v.bool,pdf:v.bool,disabled:v.bool,hours:v.number,warnings:v.instanceOf(Object),meta:v.instanceOf(Object),checked:v.bool,error:v.bool,hasCheckBox:v.bool,success:v.bool,onCheck:v.func};Be.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null,meta:{valuePerHour:0,attachments:[]},checked:!1,success:!1,error:!1,hasCheckBox:!1,onCheck:()=>""};var re=j(Be);const fr=()=>{var f;const n=q(),r=ve(),t=X(),[a,i]=g.exports.useState(!1),s=n.teamStore.teamList.find(({id:u})=>u===Number(r.id)),o=()=>{i(!0)},l=()=>{i(!1)},c=()=>{n.teamStore.removeTeam(s),l(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),s?d(ge,{children:[d("div",{className:"screen team-detail",children:[d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(ce,{alt:s==null?void 0:s.name,src:s==null?void 0:s.image,className:"team-detail__avatar"}),e("h2",{children:s==null?void 0:s.name})]}),e("div",{className:"screen__header__right",children:e($,{onClick:o,children:e(at,{})})})]}),e("main",{children:d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Team collaborators"})}),((f=s==null?void 0:s.users)==null?void 0:f.length)?s.users.map(u=>e(re,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours,warnings:u==null?void 0:u.warnings},u.id)):null]})})]}),e(nt,{className:"team-detail__edit-team",color:"primary","aria-label":"Edit team",onClick:()=>{t(`/teams/edit/${s.id}`)},children:e(bt,{})})]}),d(Ie,{open:a,onClose:l,children:[e(Pe,{children:`Delete team ${s.name}`}),e($e,{children:e(je,{children:`Are you sure you want to delete "${s.name}" team?`})}),d(Ue,{children:[e($,{autoFocus:!0,onClick:l,color:"primary",children:"Cancel"}),e($,{onClick:c,color:"primary",children:"Confirm"})]})]})]}):null};var pr=j(fr);const Oe=n=>{const{id:r,name:t,image:a,avatarSize:i,fontSize:s,disabled:o,card:l}=n,c=X();return l?d(le,{className:"team card",button:!o,onClick:()=>o?null:c(`/teams/${r}`),children:[a.length?e("img",{className:"team__image",src:a,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:s},children:t})})]}):d(le,{className:"team",button:!o,onClick:()=>o?null:c(`/teams/${r}`),children:[e(ce,{alt:t,src:a,className:"team__avatar",style:{width:i,height:i}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:s},children:t})})]})};Oe.propTypes={id:v.number.isRequired,name:v.string,image:v.string,avatarSize:v.number,fontSize:v.number,disabled:v.bool,card:v.bool};Oe.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var Ne=j(Oe);const gr=()=>{const n=q(),r=ve(),t=X(),a=n.teamStore.teamList.find(h=>h.id===Number(r.id)),[i,s]=g.exports.useState(""),[o,l]=g.exports.useState(""),[c,f]=g.exports.useState([]),[u,_]=g.exports.useState([]),T=(h,U,R)=>{f(A.sortBy(U.filter(B=>B.id!==h.id),"name")),_(A.sortBy([...R,h],"name"))},m=(h,U,R)=>{_(A.sortBy(R.filter(B=>B.id!==h.id),"name")),f(A.sortBy([...U,h],"name"))},E=async()=>{const h=await n.teamStore.editTeam(a.id,{name:i,image:o,users:u});t(`/teams/${h}`),h&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{s(a.name),l(a.image),_(a.users);const h=[...n.userStore.userList];a.users.forEach(U=>{h.forEach((R,B)=>{R.id===U.id&&h.splice(B,1)})}),f(h)},[a]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(H,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Edit team ${a.name}`})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(M,{id:"team-name",label:"Name",value:i,onChange:h=>{s(h.target.value)}}),e(M,{id:"team-image",label:"Image",value:o,onChange:h=>{l(h.target.value)}}),(i==null?void 0:i.length)||(o==null?void 0:o.length)?e("div",{className:"screen__header__preview",children:e(Ne,{name:i,image:o,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e($,{variant:"outlined",onClick:E,children:"Salvar"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),c.map(h=>d("div",{className:"user-list__item",children:[e(re,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours},h.id),e($,{className:"user-list__item__bt-add",onClick:()=>T(h,c,u),children:e(ot,{})})]},h.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),u.map(h=>d("div",{className:"user-list__item",children:[e($,{className:"user-list__item__bt-add",onClick:()=>m(h,c,u),children:e(lt,{})}),e(re,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours})]},h.id))]})]})]})]})})};var _r=j(gr);const Sr=()=>{const n=q(),r=X(),[t,a]=g.exports.useState(""),[i,s]=g.exports.useState(""),[o,l]=g.exports.useState([]),[c,f]=g.exports.useState([]),u=m=>{l(A.sortBy(o.filter(E=>E.id!==m.id),"name")),f(A.sortBy([...c,m],"name"))},_=m=>{f(A.sortBy(c.filter(E=>E.id!==m.id),"name")),l(A.sortBy([...o,m],"name"))},T=async()=>{const m=n.teamStore.createTeam({name:t,image:i,users:c});n.teamStore.fetchTeamList(),r(`/teams/${m}`),m&&alert(`Team ${t} created.`)};return g.exports.useEffect(()=>{l(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(H,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Create team"})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(M,{id:"team-name",label:"Name",value:t,onChange:m=>{a(m.target.value)}}),e(M,{id:"team-image",label:"Image",value:i,onChange:m=>{s(m.target.value)}}),(t==null?void 0:t.length)||(i==null?void 0:i.length)?e("div",{className:"screen__header__preview",children:e(Ne,{name:t,image:i,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e($,{variant:"outlined",onClick:T,children:"Create"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),o.map(m=>d("div",{className:"user-list__item",children:[e(re,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours},m.id),e($,{className:"user-list__item__bt-add",onClick:()=>u(m),children:e(ot,{})})]},m.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),c.map(m=>d("div",{className:"user-list__item",children:[e($,{className:"user-list__item__bt-add",onClick:()=>_(m),children:e(lt,{})}),e(re,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours})]},m.id))]})]})]})]})})};var vr=j(Sr);const yr=()=>{var o,l;const n=q(),r=X(),[t,a]=g.exports.useState(""),[i,s]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){s(n.teamStore.teamList.filter(c=>c.name.toLowerCase().includes(t.toLowerCase())));return}s(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{s(n.teamStore.teamList),window.scrollTo(0,0)},[]),d("div",{className:"screen teams",children:[d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Teams"}),e("div",{className:"screen__header__right",children:((l=(o=n==null?void 0:n.teamStore)==null?void 0:o.teamList)==null?void 0:l.length)?e(M,{id:"filter-term",label:"Filter",size:"small",value:t,onChange:c=>{a(c.target.value)}}):null})]}),e("main",{children:(i==null?void 0:i.length)?i.map(c=>e(Ne,{id:c.id,name:c==null?void 0:c.name,image:c==null?void 0:c.image},c.id)):e("div",{children:"No team found."})})]}),e(nt,{className:"teams__create-team",color:"primary","aria-label":"Create team",onClick:()=>{r("/teams/create")},children:e(st,{})})]})};var Nr=j(yr);const Ae=n=>{const{project:r,time:t,description:a,disabled:i,showMeta:s,warnings:o}=n,l=X();return d(le,{button:!i,className:"time-entry",style:{borderColor:r.color},children:[d("div",{className:"time-entry__pressable",onClick:()=>r.id?l(`/projects/${r.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:r.name})}),d("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:r.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:a})]})]}),s&&(o==null?void 0:o.length)?e("div",{className:"time-entry__meta",children:e(tt,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:o.map(c=>e("li",{className:"warning-list__item",children:c}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(rt,{color:o.length===1&&o[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};Ae.propTypes={project:v.instanceOf(Object),time:v.string,description:v.string,disabled:v.bool,showMeta:v.bool,warnings:v.arrayOf(v.instanceOf(Object))};Ae.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var br=j(Ae);const wr=()=>{var l;const n=q(),r=ve(),t=n.userStore.userList.find(({id:c})=>c===r.id),[a,i]=g.exports.useState([]),[s,o]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(s){i(t.timeEntriesByDay.filter(c=>c.timeEntries.find(f=>{var u;return(u=f==null?void 0:f.warnings)==null?void 0:u.length})).map(c=>C(N({},c),{timeEntries:c.timeEntries.filter(f=>{var u;return(u=f==null?void 0:f.warnings)==null?void 0:u.length})})));return}i(t.timeEntriesByDay)},[s]),g.exports.useEffect(()=>{i(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(ce,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),d("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e(ke,{color:t.hours>=200?"error":""})]})]}),d("main",{children:[(t==null?void 0:t.teams.length)?d("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Collaborator teams"})}),t.teams.map(c=>e(Ne,{id:c.id,name:c==null?void 0:c.name,image:c==null?void 0:c.image},c.id))]}):null,((l=t==null?void 0:t.timeEntries)==null?void 0:l.length)?d("div",{className:"time-entries",children:[d("header",{className:"section-header",children:[e("h3",{children:"Time entries"}),e("div",{className:"time-entries__filter",children:e(wt,{control:e(Lt,{checked:s,onChange:()=>o(!s),name:"filterWarnings",color:"primary"}),label:"Filter warnings"})})]}),(a==null?void 0:a.length)?a.map(c=>d("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:c.date})}),e("div",{className:"description",children:c.timeEntries.map(f=>{var u;return e(br,{disabled:!((u=f==null?void 0:f.project)==null?void 0:u.id),project:f.project,time:f.timeInterval.duration,description:f.description,warnings:f.warnings,showMeta:!0},f.id)})})]},c.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var Lr=j(wr);const xr=()=>{var Z,Y,G,he;const n=q(),[r,t]=g.exports.useState(""),[a,i]=g.exports.useState([]),[s,o]=g.exports.useState("name"),[l,c]=g.exports.useState([]),[f,u]=g.exports.useState(!1),[_,T]=g.exports.useState(!1),m=s==="hours"?"desc":"asc",E=async p=>{try{if(u(!0),c(D=>D.map(I=>p.map(({id:W})=>W).includes(I.id)?C(N({},I),{requesting:!0}):I)),(await te(n.userStore.sendReports({collaborator_ids:p.map(({id:D})=>D)}))).error)return}catch(y){console.log(y)}finally{u(!1),c(y=>y.map(D=>p.map(({id:I})=>I).includes(D.id)?C(N({},D),{requesting:!1}):D))}},h=async()=>{try{u(!0),T(!1);const p=a.filter((y,D)=>l[D].checked&&!l[D].requesting);await E(p)}catch(p){console.log(p)}finally{u(!1)}},U=(p,y={valuePerHour:0,attachments:[]})=>{var W,J,F;let D=0;const{valuePerHour:I}=y;return((W=y==null?void 0:y.attachments)==null?void 0:W.length)?(((J=y==null?void 0:y.attachments)==null?void 0:J.length)>1?D+=y.attachments.reduce((se,ue)=>se.value+ue.value):((F=y==null?void 0:y.attachments)==null?void 0:F.length)===1&&(D+=Number(y==null?void 0:y.attachments[0].value)),p*I+D):p*I},R=async()=>{const[p]=z("user-meta");try{Xe({data:a.map(({id:y,name:D,email:I,hours:W,warnings:J})=>{var se;const F=p[y];return console.log(F),{name:D,email:I,hours:W.toFixed(2),valuePerHour:(F==null?void 0:F.valuePerHour)||0,attachments:((se=F==null?void 0:F.attachments)==null?void 0:se.length)?JSON.stringify(F.attachments):"",total:String(U(W,F).toFixed(2)),warnings:JSON.stringify(J)}}),fileName:`Clockify_Teams_REPORT___from_${_e(n.userStore.queryStartDate)}_to_${_e(n.userStore.queryEndDate)}`,exportType:Xe.types.xls})}catch(y){console.log(y)}},B=(p,y)=>{c(D=>D.map(I=>I.id===p?C(N({},I),{checked:y}):I))},de=p=>{c(y=>y.map(D=>C(N({},D),{checked:p})))};return g.exports.useEffect(()=>{if(r.length){i(A.orderBy(n.userStore.userList.filter(p=>p.name.toLowerCase().includes(r.toLowerCase())),s,m));return}i(A.orderBy(n.userStore.userList,s,m))},[r]),g.exports.useEffect(()=>{const p=s==="hours"?"desc":"asc";i(y=>A.orderBy(y,s,p))},[s]),g.exports.useEffect(()=>{i(A.orderBy(n.userStore.userList,s)),c(A.orderBy(n.userStore.userList,s).map(({id:p})=>({id:p,checked:!1,requesting:!1,error:!1,sent:!1}))),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:d(H,{maxWidth:"lg",children:[d(x,{component:"header",className:"screen__header",sx:{flexDirection:{sm:"column"},alignItems:{sm:"flex-start"}},children:[d(x,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2,children:[e("h2",{children:"Collaborators"}),e($,{onClick:R,variant:"outlined",startIcon:e(xt,{}),size:"large",children:"XLS"})]}),d(x,{className:"screen__header__content",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[d(x,{sx:{display:"flex",alignItems:"center",gap:2,marginLeft:1},children:[e(it,{checked:!l.find(p=>p.checked===!1),onChange:p=>de(p.target.checked),color:"primary",disabled:f}),l.filter(p=>p.checked).length?e("div",{className:"screen__header__content__item",children:e($,{onClick:()=>T(!0),disabled:f,variant:"outlined",size:"large",sx:{paddingLeft:0,paddingRight:0,minWidth:40},children:f?e(De,{style:{width:20,height:20}}):e(Ee,{})})}):null]}),d(x,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((Y=(Z=n==null?void 0:n.userStore)==null?void 0:Z.userList)==null?void 0:Y.length)?e(x,{flex:{xs:2},children:d(Tt,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(Ct,{id:"order-by-label",children:"Order by"}),d(Dt,{labelId:"order-by-label",id:"order-by",value:s,label:"Order by",onChange:p=>o(p.target.value),size:"small",children:[e(Te,{value:"name",children:"Name"}),e(Te,{value:"email",children:"E-mail"}),e(Te,{value:"hours",children:"Workload"})]})]})}):null,((he=(G=n==null?void 0:n.userStore)==null?void 0:G.userList)==null?void 0:he.length)?e(x,{flex:"3",children:e(M,{fullWidth:!0,id:"filter-term",label:"Filter",size:"small",value:r,onChange:p=>{t(p.target.value)}})}):null]})]})]}),e("main",{children:(a==null?void 0:a.length)?a.map((p,y)=>{var D,I,W,J;return e(re,{id:p.id,profilePicture:p==null?void 0:p.profilePicture,name:p==null?void 0:p.name,lastName:p==null?void 0:p.lastName,email:p==null?void 0:p.email,hours:p==null?void 0:p.hours,payment:p==null?void 0:p.payment,warnings:p==null?void 0:p.warnings,meta:p==null?void 0:p.meta,checked:(D=l[y])==null?void 0:D.checked,requesting:(I=l[y])==null?void 0:I.requesting,error:(W=l[y])==null?void 0:W.error,success:(J=l[y])==null?void 0:J.success,onCheck:F=>B(p.id,F),showMeta:!0,pdf:!0,hasCheckBox:!0},p.id)}):e("div",{children:"No collaborator found."})}),d(Ie,{open:_,onClose:()=>T(!1),children:[e(Pe,{children:"Report"}),e($e,{children:e(je,{children:` Send report to ${l.filter(p=>p.checked).length} collaborators?`})}),d(Ue,{children:[e($,{autoFocus:!0,onClick:()=>T(!1),color:"primary",children:"Cancel"}),e($,{onClick:h,color:"primary",children:"Confirm"})]})]})]})})};var Tr=j(xr);const Me=n=>{const{id:r,index:t,name:a,color:i,disabled:s=!1}=n,[o,l]=g.exports.useState(!1),c=X();return g.exports.useEffect(()=>{const f=setTimeout(()=>{l(!0)},t*50+100);return()=>{clearTimeout(f)}},[]),e(le,{button:!s,onClick:()=>s?null:c(`/projects/${r}`),className:"project",style:{borderColor:o?i:"transparent"},children:e("div",{className:"project__name",children:a})})};Me.propTypes={id:v.string.isRequired,index:v.number.isRequired,name:v.string,color:v.string,disabled:v.bool};Me.defaultProps={name:"",color:"",disabled:!1};var Cr=j(Me);const Dr=()=>{var s,o;const n=q(),[r,t]=g.exports.useState(""),[a,i]=g.exports.useState([]);return g.exports.useEffect(()=>{if(r.length){i(n.projectStore.projectList.filter(l=>l.name.toLowerCase().includes(r.toLowerCase())));return}i(n.projectStore.projectList)},[r]),g.exports.useEffect(()=>{i(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Projects"}),((o=(s=n==null?void 0:n.projectStore)==null?void 0:s.projectList)==null?void 0:o.length)?e(M,{id:"filter-term",label:"Filter",size:"small",value:r,onChange:l=>{t(l.target.value)}}):null]}),e("main",{children:(a==null?void 0:a.length)?a.map((l,c)=>e(Cr,{id:l.id,color:l==null?void 0:l.color,name:l==null?void 0:l.name,index:c},l.id)):e("div",{children:"No project found."})})]})})};var Er=j(Dr);const kr=()=>{var a,i;const n=q(),r=ve(),t=n.projectStore.projectList.find(({id:s})=>s===r.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:d(H,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:e("div",{className:"project-detail__estimate",children:e("div",{children:`Total: ${ie(t==null?void 0:t.duration).toFixed(2)} hours`})})})]}),d("main",{children:[((a=t==null?void 0:t.timeEntriesByUser)==null?void 0:a.length)?d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Project collaborators"})}),t.timeEntriesByUser.map(s=>e(re,{id:s.id,profilePicture:s==null?void 0:s.profilePicture,name:s==null?void 0:s.name,email:s==null?void 0:s.email,hours:s==null?void 0:s.hours},s.id))]}):null,((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?null:e("div",{children:"No time entries found."})]})]})}):null};var Ir=j(kr);const Pr=()=>{var l,c,f,u,_,T,m,E;const n=q(),[r,t]=g.exports.useState(""),[a,i]=g.exports.useState(!1),[s]=z("clockify-api-key"),o=async()=>{i(!0),await te(n.authStore.authenticate(r)),i(!1)};return g.exports.useEffect(()=>{const h=document.querySelector(".login .fetch-data-log");h&&(h.scrollTop=h.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(s==null?void 0:s.length)&&t(s)},[]),e("div",{className:"screen login",children:e(H,{maxWidth:"lg",className:"login__container",children:d(x,{position:"relative",display:"flex",alignItems:"center",flexDirection:"column",width:"100%",maxWidth:"400px",children:[e("h1",{children:"Clockify Teams"}),e(x,{className:"login__box",width:"100%",children:n.authStore.isConfirmingIdentity?d(ge,{children:[d("div",{className:"login__user",children:[e(ce,{alt:(c=(l=n==null?void 0:n.authStore)==null?void 0:l.user)==null?void 0:c.name,src:(u=(f=n==null?void 0:n.authStore)==null?void 0:f.user)==null?void 0:u.profilePicture,className:"login__user__avatar"}),d("div",{className:"login__user__profile",children:[e("div",{className:"login__user__name",children:(T=(_=n==null?void 0:n.authStore)==null?void 0:_.user)==null?void 0:T.name}),e("div",{className:"login__user__email",children:(E=(m=n==null?void 0:n.authStore)==null?void 0:m.user)==null?void 0:E.email})]}),e("div",{className:"login__user__logout",children:e(oe,{onClick:n.authStore.unauthenticate,children:e(Et,{})})})]}),e(x,{className:"fetch-data-log",width:"100%",children:n.authStore.fetchDataLog.map(({text:h,color:U})=>e("div",{style:{color:U},children:h},h))})]}):d(ge,{children:[n.authStore.autoLogin?null:e(M,{id:"api-key",label:"Clockify API Key",value:r,onChange:h=>{t(h.target.value)}}),a||n.authStore.autoLogin?e(ct,{}):e($,{variant:"outlined",onClick:o,children:"Entrar"})]})})]})})})};var $r=j(Pr);const jr=()=>{var r;const n=q();return e(kt,{children:((r=n==null?void 0:n.authStore)==null?void 0:r.isAuthenticated)?d(ge,{children:[e(hr,{}),d(Ye,{children:[e(V,{path:"/users/:id",element:e(Lr,{})}),e(V,{path:"/projects/:id",element:e(Ir,{})}),e(V,{path:"/projects",element:e(Er,{})}),e(V,{path:"/teams/edit/:id",element:e(_r,{})}),e(V,{path:"/teams/create",element:e(vr,{})}),e(V,{path:"/teams/:id",element:e(pr,{})}),e(V,{path:"/teams",element:e(Nr,{})}),e(V,{path:"/",element:e(Tr,{})})]})]}):e(Ye,{children:e(V,{path:"/",element:e($r,{})})})})};var Ur=j(jr);const Rr=It({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),mt=({children:n})=>d(Pt,{theme:Rr,children:[e($t,{}),n]});mt.propTypes={children:v.node.isRequired};const We=n=>{const{active:r}=n;return r?e("div",{className:"loader",children:e(ct,{style:{height:1}})}):null};We.propTypes={active:v.bool};We.defaultProps={active:!1};const pe=new Date,Fr=()=>{const n=q(),[r,t]=g.exports.useState(!1),[a,i]=g.exports.useState(new Date(pe.getFullYear(),pe.getMonth(),1)),[s,o]=g.exports.useState(new Date(pe.getFullYear(),pe.getMonth()+1,0)),l=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(a,s),t(!0),await te(n.projectStore.fetchProjectList()),await te(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:d(et,{className:"query-date-selector",component:"footer",children:[e("div",{className:"query-date-selector__loader",children:e(We,{active:r})}),d(x,{className:"query-date-selector__content",gap:2,children:[e(x,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:1,className:"query-date-selector__date-picker",children:e(jt,{startText:"Start date",endText:"End date",value:[a,s],disabled:r,onChange:([c,f])=>{i(c),o(f)},renderInput:(c,f)=>d(x,{display:"flex",gap:2,style:{width:"100%"},children:[e(M,C(N({},c),{helperText:null,size:"small",fullWidth:!0})),e(M,C(N({},f),{helperText:null,size:"small",fullWidth:!0}))]})})}),e(x,{width:{xs:"100%",sm:"initial"},children:e($,{fullWidth:!0,variant:"outlined",disabled:r,onClick:l,className:"query-date-selector__bt-search",children:e(Ut,{})})})]})]})};var Br=j(Fr);window.cptable={};const Or=()=>{const[n,r]=g.exports.useState(null),[t]=z("clockify-api-key"),a=async()=>{const i=Ot({RootStore:ir,env:Qt});r(i),(t==null?void 0:t.length)&&(i.authStore.setAutoLogin(!0),await te(i.authStore.authenticate(t)),i.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{a()},[]),n?e("div",{className:"app",children:e(nr,{value:n,children:e(Rt,{dateAdapter:Ft,locale:Bt,children:d(mt,{children:[e(Ur,{}),e(Br,{})]})})})}):null};At.register(Mt,Wt,qt,zt,Ht,Jt);Vt.render(e(Ge.StrictMode,{children:e(Or,{})}),document.getElementById("root"));
