var ut=Object.defineProperty,ft=Object.defineProperties;var pt=Object.getOwnPropertyDescriptors;var ce=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable;var ve=(n,a,t)=>a in n?ut(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,y=(n,a)=>{for(var t in a||(a={}))Ae.call(a,t)&&ve(n,t,a[t]);if(ce)for(var t of ce(a))Me.call(a,t)&&ve(n,t,a[t]);return n},T=(n,a)=>ft(n,pt(a));var We=(n,a)=>{var t={};for(var r in n)Ae.call(n,r)&&a.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&ce)for(var r of ce(n))a.indexOf(r)<0&&Me.call(n,r)&&(t[r]=n[r]);return t};var S=(n,a,t)=>(ve(n,typeof a!="symbol"?a+"":a,t),t);import{a as Xe,m as G,o as N,c as ye,b as k,f as K,g as X,R as Ye,j as e,N as ie,d as w,r as g,u as H,B as I,e as d,h as gt,S as _t,i as P,A as Ke,C as W,k as L,I as ne,l as we,n as St,p as Le,q as vt,T as Qe,s as Ze,t as yt,D as Te,v as Ce,w as De,x as xe,y as O,z as qe,E as Ee,F as Ge,G as et,H as ke,J as Q,P as v,L as oe,K as tt,M as le,O as fe,Q as he,U as at,V as Nt,W as rt,X as st,_ as B,Y as bt,Z as wt,$ as Lt,a0 as xt,a1 as Tt,a2 as Ct,a3 as Ne,a4 as ze,a5 as it,a6 as Dt,a7 as Et,a8 as He,a9 as q,aa as kt,ab as It,ac as $t,ad as Pt,ae as jt,af as Ut,ag as Rt,ah as Ft,ai as Bt,aj as Ot,ak as At,al as Mt,am as Wt,an as qt,ao as zt,ap as Ht,aq as Jt}from"./vendor.352c7246.js";const Vt=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}};Vt();const Xt="https://api.clockify.me/api/v1",Yt="https://reports.api.clockify.me/",Kt=Xe.create({baseURL:Xt,timeout:1e4}),nt=Xe.create({baseURL:Yt,timeout:1e4}),z=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},r=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(r))}];class pe{constructor(a){S(this,"id",null);S(this,"name",null);S(this,"email",null);S(this,"defaultWorkspace",null);S(this,"profilePicture",null);S(this,"timeEntries",[]);S(this,"timeEntriesByDay",[]);S(this,"teams",[]);S(this,"hours",null);S(this,"warnings",{});S(this,"meta",{valuePerHour:0,attachments:[]});if(G(this,{id:N,name:N,email:N,defaultWorkspace:N,profilePicture:N,timeEntries:N,timeEntriesByDay:N,teams:N,hours:N,warnings:N,meta:N}),a==null||a.id==null)throw new Error("Invalid user constructor");const{id:t,name:r,email:i,defaultWorkspace:s,profilePicture:o,timeEntries:l,timeEntriesByDay:c,teams:p,hours:m,warnings:_,meta:x}=a;this.id=t,this.name=r||"",this.email=i||"",this.defaultWorkspace=s||"",this.profilePicture=o||"",this.timeEntries=l||[],this.timeEntriesByDay=c||[],this.teams=p||[],this.hours=m||0,this.warnings=_||{},this.meta=x||{}}static fromApi({id:a,name:t,email:r,defaultWorkspace:i,profilePicture:s,timeEntries:o,timeEntriesByDay:l,teams:c,hours:p,warnings:m,meta:_}={}){return new pe({id:a,name:t,email:r,defaultWorkspace:i,profilePicture:s,timeEntries:o,timeEntriesByDay:l,teams:c,hours:p,warnings:m,meta:_})}}class Qt{constructor(){S(this,"user",null);S(this,"authStatus","unauthenticated");S(this,"autoLogin",!1);S(this,"fetchDataLog",[]);G(this,{user:N,authStatus:N,autoLogin:N,fetchDataLog:N,isAuthenticated:ye,isConfirmingIdentity:ye,isUnauthenticated:ye,setUser:k.bound,confirmIdentity:k.bound,unauthenticate:k.bound,setAutoLogin:k.bound,feedFetchDataLog:k.bound,setStatusConfirmingIdentity:k.bound,clearDataLog:k.bound,authenticate:K})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(a){this.user=pe.fromApi(a)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(a){this.autoLogin=a}feedFetchDataLog(a,t){let r="";switch(t){case"success":{r="#27ae60";break}case"error":{r="#c0392b";break}default:{r="#ffffff";break}}typeof a=="string"&&a.length&&this.fetchDataLog.push({text:a,color:r})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,X().defaults.headers.common["X-Api-Key"]=null}*authenticate(a){try{const[,t]=z("clockify-api-key");X().defaults.headers.common["X-Api-Key"]=a,nt.defaults.headers.common["X-Api-Key"]=a,t(a);const r=yield X().get("/user");return(r==null?void 0:r.status)!==200?(alert("Invalid Clockify API Key"),!1):(r==null?void 0:r.data)?(this.setUser(r.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const Je=n=>{let a=n;a=a*60*60;let t=Math.floor(a/(60*60));a-=t*60*60;let r=Math.floor(a/60);return a-=r*60,t<10&&(t=`0${t}`),r<10&&(r=`0${r}`),`${t}:${r}`},me=n=>{try{const a=new Date(n).toISOString().split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(a){return console.log(a),null}},be=n=>{try{const a=n==null?void 0:n.split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(a){return console.log(a),null}},te=n=>{try{const a=n==null?void 0:n.split("H");let t=0,r=0;return(a==null?void 0:a.length)?((a==null?void 0:a.length)===2?(t=Number(a[0].split("PT")[1])||0,r=Number(a[1].split("M")[0])||0):a[0]!=="PT0S"&&(r=Number(a[0].replace("PT","").replace("M",""))),Number(t+r/60)):null}catch(a){return console.log(a),null}},Zt=Ye.forwardRef(function(a,t){const s=a,{onChange:r}=s,i=We(s,["onChange"]);return e(ie,T(y({},i),{getInputRef:t,onValueChange:o=>{r({target:{name:a.name,value:o.value}})},thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0}))});var Gt={Currency:Zt};const ea=n=>n.replace(/[^\w\s]/gi,""),ue={NO_DESCRIPTION:"Time entry without description",TIME_LIMIT:"Time entry longer than 6 hours"};class ta{constructor(){S(this,"userList",[]);S(this,"queryStartDate",null);S(this,"queryEndDate",null);G(this,{userList:N,queryStartDate:N,queryEndDate:N,setUserList:k.bound,formatUserData:k.bound,getUsersTeams:k.bound,storeUserMeta:k.bound,fetchUserList:K,fetchUserTimeEntries:K,fetchUserSummaryReport:K,sendReports:K,sendReport:K})}setUserList(a=[]){this.userList=a.map(t=>pe.fromApi(t))}setQueryDate(a,t){this.queryStartDate=a,this.queryEndDate=t}*fetchUserTimeEntries(a={}){const{id:t,name:r,pageSize:i=5e3}=a,{NO_DESCRIPTION:s,TIME_LIMIT:o}=ue;try{w().authStore.feedFetchDataLog(`fetching user ${r} time entries...`);const{defaultWorkspace:l}=w().authStore.user,c=yield X().get(`/workspaces/${l}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":i}});if(c.status!==200)return w().authStore.feedFetchDataLog(`error fetching ${r} time entries`,"error"),!1;if(c==null?void 0:c.data){let p=0;const m={};Object.keys(ue).forEach(x=>{m[x]=0});const _=c.data.map(x=>{var h,j;const f=(h=x==null?void 0:x.timeInterval)==null?void 0:h.duration,C=T(y({},x),{warnings:[]});if(((j=x==null?void 0:x.description)==null?void 0:j.length)||(C.warnings.push(s),m.NO_DESCRIPTION++),f==null?void 0:f.length){const U=te(f);U&&(p+=U,U>=6&&(C.warnings.push(o),m.TIME_LIMIT++))}return C});return w().authStore.feedFetchDataLog(`fetched ${r} time entries`,"success"),{timeEntries:_,hours:p,warnings:m}}return w().authStore.feedFetchDataLog(`error fetching ${r} time entries`,"error"),!1}catch(l){return console.log(l),w().authStore.feedFetchDataLog(`error fetching ${r} time entries`,"error"),!1}}formatUserData(a){var t,r;try{let i=[];for(const s of a.timeEntries){const o=(t=s==null?void 0:s.timeInterval)==null?void 0:t.duration,l=(r=s==null?void 0:s.timeInterval)==null?void 0:r.start,c=w().projectStore.projectList.find(({id:m})=>m===(s==null?void 0:s.projectId)),p=i.find(m=>m.date===be(l));(o==null?void 0:o.length)&&(l==null?void 0:l.length)&&(p?i=i.map(m=>m.date===be(l)?{date:m.date,timeEntries:[...m.timeEntries,T(y({},s),{project:c||{name:"Without project",color:"#ffffff"}})],hours:m.hours+te(o)}:m):i.push({date:be(l),timeEntries:[T(y({},s),{project:c||{name:"Without project",color:"#ffffff"}})],hours:te(o)}))}return T(y({},a),{timeEntriesByDay:i})}catch(i){return console.log(i),!1}}getUsersTeams(){const a=[];for(const t of this.userList){const r=[];for(const i of w().teamStore.teamList)for(const s of i.users)s.id===t.id&&r.push(i);a.push(T(y({},t),{teams:r}))}this.setUserList(a)}storeUserMeta(a={}){const{id:t,userMeta:r}=a,[i,s]=z("user-meta"),o=T(y({},i),{[t]:r});i[t]&&(o[t]=y(y({},i[t].meta),r)),s(o)}*fetchUserList(a={}){var t;try{w().authStore.feedFetchDataLog("fetching user list...");const[r]=z("user-meta"),{pageSize:i=5e3}=a,{defaultWorkspace:s}=w().authStore.user,o=yield X().get(`/workspaces/${s}/users`,{params:{"page-size":i,status:"ACTIVE"}});if(o.status!==200)return w().authStore.feedFetchDataLog("error fecthing user list","error"),!1;if((t=o==null?void 0:o.data)==null?void 0:t.length){w().authStore.feedFetchDataLog("fetched user list","success");const l=[];for(const c of o.data){const p=yield this.fetchUserTimeEntries(c);if(p){const m=y(y({},c),p);r&&r[c.id]&&(m.meta=r[c.id]);const _=this.formatUserData(m);l.push(_)}}if(l.length)return this.setUserList(l),w().authStore.feedFetchDataLog("fetched all users time entries","success"),!0}return w().authStore.feedFetchDataLog("error fetching user list","error"),!1}catch(r){return console.log(r),w().authStore.feedFetchDataLog("error fetching user list","error"),!1}}*fetchUserSummaryReport(a){try{const{defaultWorkspace:t}=w().authStore.user,r=yield nt.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[a.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),s=`${a.name.toLowerCase().split(" ").map(l=>ea(l)).join("-")}__from_${me(this.queryStartDate)}_to_${me(this.queryEndDate)}`,o=new Blob([r.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(o,s);else{const l=document.createElement("a"),c=document.querySelector("body");l.href=window.URL.createObjectURL(o),l.download=s,l.style.display="none",c.appendChild(l),l.click(),c.removeChild(l),window.URL.revokeObjectURL(l.href)}return!1}catch(t){return console.log(t),w().authStore.feedFetchDataLog("error fetching user list","error"),!1}}*sendReports(a={}){try{const{collaborator_ids:t}=a;return(yield X().post("/send-reports",{collaborator_ids:t})).status===200}catch(t){return console.log(t),!1}}*sendReport(a={}){try{const{collaborator_id:t}=a;return(yield X().post("/send-reports",{collaborator_ids:[t]})).status===200}catch(t){return console.log(t),!1}}}class Ie{constructor(a){S(this,"id",null);S(this,"name",null);S(this,"email",null);S(this,"workspaceId",null);S(this,"color",null);S(this,"duration",null);S(this,"estimate",null);S(this,"users",[]);S(this,"timeEntriesByUser",[]);if(G(this,{id:N,name:N,email:N,workspaceId:N,color:N,duration:N,estimate:N,users:N,timeEntriesByUser:N}),a==null||a.id==null)throw new Error("Invalid Project constructor");const{id:t,name:r,email:i,workspaceId:s,color:o,duration:l,estimate:c,users:p,timeEntriesByUser:m}=a;this.id=t,this.name=r||"",this.email=i||"",this.workspaceId=s||"",this.color=o||"",this.duration=l||"",this.estimate=c||"",this.users=p||[],this.timeEntriesByUser=m||[]}static fromApi({id:a,name:t,email:r,workspaceId:i,color:s,duration:o,estimate:l,users:c,timeEntriesByUser:p}={}){return new Ie({id:a,name:t,email:r,workspaceId:i,color:s,duration:o,estimate:l,users:c,timeEntriesByUser:p})}}class aa{constructor(){S(this,"projectList",[]);G(this,{projectList:N,setProjectList:k.bound,formatProjectData:k.bound,formatProjectList:k.bound,fetchProjectList:K})}setProjectList(a=[]){this.projectList=a.map(t=>Ie.fromApi(t))}formatProjectData(a={}){var t;try{const{id:r}=a;let i=[];for(const s of w().userStore.userList){const o=s.timeEntries.filter(l=>l.projectId===r);for(const l of o){const c=i.find(_=>_.id===l.userId);let p=0;const m=(t=l==null?void 0:l.timeInterval)==null?void 0:t.duration;(m==null?void 0:m.length)&&(p+=te(m)),c?i=i.map(_=>_.id===l.userId?T(y({},_),{timeEntries:[..._.timeEntries,l],hours:_.hours+p}):_):i.push(T(y({},s),{timeEntries:[l],hours:p}))}}return T(y({},a),{timeEntriesByUser:i})}catch(r){return console.log(r),!1}}formatProjectList(){const a=[];for(const t of this.projectList){const r=this.formatProjectData(t);a.push(r)}this.setProjectList(a)}*fetchProjectList(a={}){var t;try{w().authStore.feedFetchDataLog("fetching project list...");const{pageSize:r=5e3}=a,{defaultWorkspace:i}=w().authStore.user,s=yield X().get(`/workspaces/${i}/projects`,{params:{archived:!1,"page-size":r}});return s.status!==200?(w().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=s==null?void 0:s.data)==null?void 0:t.length)?(this.setProjectList(s.data),w().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(r){return console.log(r),w().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class $e{constructor(a){S(this,"id",null);S(this,"name",null);S(this,"image",null);S(this,"users",[]);S(this,"timeEntriesByProject",[]);if(G(this,{id:N,name:N,image:N,users:N,timeEntriesByProject:N}),a==null||a.id==null)throw new Error("Invalid Team constructor");const{id:t,name:r,image:i,users:s,timeEntriesByProject:o}=a;this.id=t,this.name=r||"",this.image=i||"",this.users=s||[],this.timeEntriesByProject=o||[]}static fromApi({id:a,name:t,image:r,users:i,timeEntriesByProject:s}={}){return new $e({id:a,name:t,image:r,users:i,timeEntriesByProject:s})}}class ra{constructor(){S(this,"teamList",[]);G(this,{teamList:N,setTeamList:k.bound,createTeam:k.bound,editTeam:k.bound,fetchTeamList:k.bound,formatTeamData:k.bound})}createTeam(a={}){try{const{users:t}=a,[r,i]=z("team-list"),s=r||[];let o=1;return s.length?(o=s.length+1,i([...s,T(y({},a),{id:o,users:t.map(l=>l.id)})])):i([T(y({},a),{id:1,users:t.map(l=>l.id)})]),o}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(a,t={}){try{const[r,i]=z("team-list"),{users:s}=t;return i(r.map(o=>o.id===a?T(y(y({},o),o),{users:s.map(l=>l.id)}):o)),a}catch(r){return console.log(r),!1}finally{this.fetchTeamList()}}removeTeam(a={}){try{const[t,r]=z("team-list"),i=t.filter(s=>s.id!==a.id);r(i),this.setTeamList(i.map(s=>T(y({},s),{users:w().userStore.userList.filter(o=>s.users.includes(o.id))})))}catch(t){console.log(t)}}setTeamList(a=[]){this.teamList=a.map(t=>$e.fromApi(t))}fetchTeamList(){try{w().authStore.feedFetchDataLog("fetching team list...");const[a]=z("team-list");if(a.length){const t=[];for(const r of a){const i=this.formatTeamData(r);t.push(T(y({},i),{users:w().userStore.userList.filter(s=>r.users.includes(s.id))}))}this.setTeamList(t),w().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(a){return console.log(a),w().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(a={}){var t;try{const r=[];let i=[];for(const o of a.users){const l=w().userStore.userList.find(c=>c.id===o);if(l){const{timeEntries:c,hours:p}=l;for(const _ of c){const x=i.find(h=>h.id===_.projectId);let f=0;const C=(t=_==null?void 0:_.timeInterval)==null?void 0:t.duration;(C==null?void 0:C.length)&&(f+=te(C)),x?i=i.map(h=>h.id===_.projectId?T(y({},h),{id:_.projectId,timeEntries:[...h.timeEntries,_],hours:h.hours+f}):h):i.push({id:_.projectId,timeEntries:[_],hours:f})}const m=w().userStore.userList.find(_=>_.id===o.id);r.push(T(y({},m),{timeEntries:c,hours:p}))}}let s=0;for(const o of i){if(o.id){const l=w().projectStore.projectList.find(c=>c.id===o.id);l&&(i[s]=T(y({},i[s]),{name:l.name,color:l.color}))}else i[s]=T(y({},i[s]),{name:"Without project",color:"#ffffff"});s++}return T(y({},a),{users:r,timeEntriesByProject:i})}catch(r){return console.log(r),!1}}}class sa{constructor(){S(this,"authStore",null);S(this,"userStore",null);S(this,"projectStore",null);S(this,"teamStore",null)}init(){this.authStore=new Qt,this.userStore=new ta,this.projectStore=new aa,this.teamStore=new ra}}const ot=g.exports.createContext({}),ia=ot.Provider;var A=()=>g.exports.useContext(ot);const na=[{route:"/",label:"Collaborators"},{route:"/teams",label:"Teams"},{route:"/projects",label:"Projects"}],lt=({vertical:n,drawer:a})=>{const t=H(),r=i=>{t(i),a&&a.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:na.map(i=>e("li",{className:"menu__list__item",children:e(I,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>r(i.route),children:i.label})},i.route))})})};const oa=()=>{const[n,a]=g.exports.useState(!1),t=()=>{a(!0)},r=()=>{a(!1)};return d("div",{className:"drawer",children:[e(I,{onClick:t,children:e(gt,{color:"primary"})}),e(_t,{anchor:"right",open:n,onClose:r,onOpen:t,children:e("div",{className:"drawer__content",children:e(lt,{vertical:!0,drawer:{close:r}})})})]})};const la=()=>e("div",{className:"logo",children:"Clockify Teams"});const ca=()=>{const[n,a]=g.exports.useState(!0);let t=0;const r=()=>{const i=window.pageYOffset||document.documentElement.scrollTop;i>t?a(!1):a(!0),t=i<=0?0:i};return g.exports.useEffect(()=>(window.addEventListener("scroll",r,!1),()=>{window.removeEventListener("scroll",r,!1)}),[]),e(Ke,{className:"header",position:"sticky",style:{transform:n?"none":"translate3d(0, calc(-100% - 2rem),0)",transition:"transform 0.25s cubic-bezier(0.645,0.045,0.355,1)"},children:e(W,{maxWidth:"lg",children:d("div",{className:"header__content",children:[e(la,{}),e("div",{className:"header__menu",children:e(lt,{})}),e("div",{className:"header__drawer",children:e(oa,{})})]})})})};var da=P(ca);const{Currency:Ve}=Gt,ha=n=>{var Oe;const a=A(),{hours:t,warnings:r,error:i,success:s,user:o,pdf:l}=n,[c,p]=g.exports.useState(!1),[m,_]=g.exports.useState(!1),[x,f]=g.exports.useState(!1),[C,h]=g.exports.useState(!1),[j,U]=g.exports.useState("idle"),[R,ae]=g.exports.useState(0),[Y,J]=g.exports.useState([]),[u,D]=g.exports.useState(0),[E,F]=g.exports.useState(0),ee=async()=>{_(!0),await Q(a.userStore.fetchUserSummaryReport(o)),_(!1)},re=()=>{if(s)return"#2ecc71";if(i)return"#f44336";switch(j){case"success":return"#2ecc71";case"error":return"#f44336";default:return"#fff"}},_e=async()=>{try{if(h(!1),f(!0),(await Q(a.userStore.sendReport({collaborator_id:o.id}))).error){U("error");return}U("success")}catch(b){console.log(b)}finally{f(!1)}},dt=()=>{J(b=>[...b,{description:"",value:0}])},ht=b=>{J($=>$.filter((M,V)=>b!==V))},mt=b=>{let $=0;return(b==null?void 0:b.length)>1?$+=b.reduce((M,V)=>Number(M.value)+Number(V.value)):b.length===1&&($+=Number(b[0].value)),F($),$},Be=b=>{const $=t*R,M=mt(b);D($+M)},Se=b=>b<0?"#f44336":b>0?"#2ecc71":"#fff";return g.exports.useEffect(()=>{!c||(a.userStore.storeUserMeta({id:o.id,userMeta:{valuePerHour:R,attachments:Y}}),Be(Y))},[R,Y]),g.exports.useEffect(()=>{var b,$;((b=o==null?void 0:o.meta)==null?void 0:b.valuePerHour)&&ae(o.meta.valuePerHour),(($=o==null?void 0:o.meta)==null?void 0:$.attachments)&&J(o.meta.attachments.map(M=>y({},M))),p(!0)},[]),d("div",{className:"user__meta",children:[d(L,{display:"flex",alignItems:"center",gap:2,padding:2,children:[e("div",{className:"user__meta__item",style:{color:re()},children:l?e(ne,{onClick:ee,disabled:m,children:m?e(we,{style:{width:20,height:20}}):e(St,{})}):null}),e("div",{className:"user__meta__item",style:{color:re()},children:e(ne,{onClick:()=>h(!0),disabled:x,children:x?e(we,{style:{width:20,height:20}}):d("div",{className:"user__meta__payment-report-icon",children:[e(Le,{}),e("div",{className:"user__meta__payment-report-icon__money-icon",children:e(vt,{})})]})})}),((Oe=Object.entries(r).filter(([,b])=>b>0))==null?void 0:Oe.length)?e(Qe,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(r).filter(([,b])=>b>0).map(([b,$])=>e("li",{className:"warning-list__item",children:`${$}x ${ue[b]}`},ue[b]))}),children:e("div",{className:"user__meta__item warning",children:e(Ze,{color:r.NO_PROJECT>0||r.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(yt,{color:"secondary"})}),d(Te,{open:C,onClose:()=>h(!1),children:[e(Ce,{children:o.name}),e(De,{children:d(L,{display:"flex",flexDirection:"column",gap:4,paddingTop:2,children:[d(L,{display:"flex",justifyContent:"space-between",gap:2,sx:{alignItems:{xs:"center",sx:"initial"},flexDirection:{xs:"row",sm:"row"}},children:[d(L,{display:"flex",alignItems:"center",gap:1,flex:2,style:{color:t>=200?"#f44336":"#ffffff"},children:[e(xe,{color:t>=200?"error":""}),Je(t)," \u2022 ",t.toFixed(2)]}),e(L,{display:"flex",flexDirection:"column",alignItems:"center",flex:1,children:e(O,{id:"value-per-hour",label:"Per hour",size:"small",value:R,onChange:b=>{ae(b.target.value)},InputProps:{startAdornment:e(qe,{position:"start",children:"R$"}),inputComponent:Ve}})})]}),d(L,{display:"flex",flexDirection:"column",gap:2,paddingBottom:2,style:{borderBottom:"1px solid rgba(236, 240, 241, 0.5)"},children:[e(Ee,{display:"flex",alignItems:"center",gap:1,style:{color:t>=200?"#f44336":"#ffffff",borderBottom:"1px solid rgba(236, 240, 241, 0.5)"},children:"Attachments"}),Y.map((b,$)=>d(L,{display:"flex",gap:2,children:[e(L,{display:"flex",flex:1,children:e(O,{label:"Description",size:"small",fullWidth:!0,value:b.description,onChange:M=>{J(V=>{const se=[...V];return se[$].description=M.target.value,se})}})}),e(L,{display:"flex",flex:1,children:e(O,{label:"Value",size:"small",fullWidth:!0,value:b.value,InputProps:{startAdornment:e(qe,{position:"start",children:"R$"}),inputComponent:Ve},onChange:M=>{J(V=>{const se=[...V];return se[$].value=M.target.value,Be(V),se})}})}),e(ne,{onClick:()=>ht($),children:e(Ge,{})})]},`${$}`)),e(L,{alignSelf:"flex-end",children:e(ne,{onClick:dt,children:e(et,{})})})]}),d(L,{alignSelf:"flex-end",color:Se(u),children:["Total: R$"," ",e(ie,{value:u,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]})]})}),e(ke,{children:d(L,{display:"flex",gap:2,children:[e(I,{autoFocus:!0,onClick:()=>h(!1),variant:"outlined",children:"Close"}),e(I,{onClick:_e,startIcon:e(Le,{}),variant:"outlined",children:"Send Report"})]})})]})]}),d(L,{display:"flex",alignItems:"center",gap:2,padding:2,children:[d(L,{color:t>=200?"#f44336":"#ffffff",display:"flex",alignItems:"center",gap:1,children:[e(L,{children:Je(t)}),e(xe,{color:t>=200?"error":""}),"R$"," ",e(ie,{value:R,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]}),"+",d(L,{color:Se(E),children:["R$"," ",e(ie,{value:E,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]}),"=",d(L,{color:Se(u),children:["R$"," ",e(ie,{value:u,thousandSeparator:".",decimalScale:2,decimalSeparator:",",fixedDecimalScale:!0,isNumericString:!0,displayType:"text"})]})]})]})};var ma=P(ha);const Pe=n=>{const{id:a,name:t,lastName:r,profilePicture:i,email:s,showMeta:o,pdf:l,disabled:c,hours:p,warnings:m,error:_,success:x,meta:f,hasCheckBox:C,checked:h,onCheck:j}=n,U=H();return d(oe,{className:"user",children:[C?e("div",{className:"user__checkbox",children:e(tt,{checked:h,onChange:R=>j(R.target.checked),color:"primary"})}):null,d("div",{className:"user__pressable",onClick:()=>c?null:U(`/users/${a}`),style:{pointerEvents:c?"none":"initial"},children:[e(le,{alt:t,src:i,className:"user__avatar"}),d("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:s})]})]}),o?e(ma,{pdf:l,hours:p,warnings:m,user:{id:a,name:t,lastName:r,email:s,meta:f},error:_,success:x}):null]})};Pe.propTypes={id:v.oneOfType([v.number,v.string]),name:v.string,lastName:v.string,profilePicture:v.string,email:v.string,showMeta:v.bool,pdf:v.bool,disabled:v.bool,hours:v.number,warnings:v.instanceOf(Object),meta:v.instanceOf(Object),checked:v.bool,error:v.bool,hasCheckBox:v.bool,success:v.bool,onCheck:v.func};Pe.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null,meta:{valuePerHour:0,attachments:[]},checked:!1,success:!1,error:!1,hasCheckBox:!1,onCheck:()=>""};var Z=P(Pe);const ua=()=>{var p;const n=A(),a=fe(),t=H(),[r,i]=g.exports.useState(!1),s=n.teamStore.teamList.find(({id:m})=>m===Number(a.id)),o=()=>{i(!0)},l=()=>{i(!1)},c=()=>{n.teamStore.removeTeam(s),l(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),s?d(he,{children:[d("div",{className:"screen team-detail",children:[d(W,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(le,{alt:s==null?void 0:s.name,src:s==null?void 0:s.image,className:"team-detail__avatar"}),e("h2",{children:s==null?void 0:s.name})]}),e("div",{className:"screen__header__right",children:e(I,{onClick:o,children:e(Ge,{})})})]}),e("main",{children:d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Team collaborators"})}),((p=s==null?void 0:s.users)==null?void 0:p.length)?s.users.map(m=>e(Z,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours,warnings:m==null?void 0:m.warnings},m.id)):null]})})]}),e(at,{className:"team-detail__edit-team",color:"primary","aria-label":"Edit team",onClick:()=>{t(`/teams/edit/${s.id}`)},children:e(Nt,{})})]}),d(Te,{open:r,onClose:l,children:[e(Ce,{children:`Delete team ${s.name}`}),e(De,{children:e(Ee,{children:`Are you sure you want to delete "${s.name}" team?`})}),d(ke,{children:[e(I,{autoFocus:!0,onClick:l,color:"primary",children:"Cancel"}),e(I,{onClick:c,color:"primary",children:"Confirm"})]})]})]}):null};var fa=P(ua);const je=n=>{const{id:a,name:t,image:r,avatarSize:i,fontSize:s,disabled:o,card:l}=n,c=H();return l?d(oe,{className:"team card",button:!o,onClick:()=>o?null:c(`/teams/${a}`),children:[r.length?e("img",{className:"team__image",src:r,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:s},children:t})})]}):d(oe,{className:"team",button:!o,onClick:()=>o?null:c(`/teams/${a}`),children:[e(le,{alt:t,src:r,className:"team__avatar",style:{width:i,height:i}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:s},children:t})})]})};je.propTypes={id:v.number.isRequired,name:v.string,image:v.string,avatarSize:v.number,fontSize:v.number,disabled:v.bool,card:v.bool};je.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var ge=P(je);const pa=()=>{const n=A(),a=fe(),t=H(),r=n.teamStore.teamList.find(h=>h.id===Number(a.id)),[i,s]=g.exports.useState(""),[o,l]=g.exports.useState(""),[c,p]=g.exports.useState([]),[m,_]=g.exports.useState([]),x=(h,j,U)=>{p(B.sortBy(j.filter(R=>R.id!==h.id),"name")),_(B.sortBy([...U,h],"name"))},f=(h,j,U)=>{_(B.sortBy(U.filter(R=>R.id!==h.id),"name")),p(B.sortBy([...j,h],"name"))},C=async()=>{const h=await n.teamStore.editTeam(r.id,{name:i,image:o,users:m});t(`/teams/${h}`),h&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{s(r.name),l(r.image),_(r.users);const h=[...n.userStore.userList];r.users.forEach(j=>{h.forEach((U,R)=>{U.id===j.id&&h.splice(R,1)})}),p(h)},[r]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(W,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Edit team ${r.name}`})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(O,{id:"team-name",label:"Name",value:i,onChange:h=>{s(h.target.value)}}),e(O,{id:"team-image",label:"Image",value:o,onChange:h=>{l(h.target.value)}}),(i==null?void 0:i.length)||(o==null?void 0:o.length)?e("div",{className:"screen__header__preview",children:e(ge,{name:i,image:o,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(I,{variant:"outlined",onClick:C,children:"Salvar"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),c.map(h=>d("div",{className:"user-list__item",children:[e(Z,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours},h.id),e(I,{className:"user-list__item__bt-add",onClick:()=>x(h,c,m),children:e(rt,{})})]},h.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),m.map(h=>d("div",{className:"user-list__item",children:[e(I,{className:"user-list__item__bt-add",onClick:()=>f(h,c,m),children:e(st,{})}),e(Z,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours})]},h.id))]})]})]})]})})};var ga=P(pa);const _a=()=>{const n=A(),a=H(),[t,r]=g.exports.useState(""),[i,s]=g.exports.useState(""),[o,l]=g.exports.useState([]),[c,p]=g.exports.useState([]),m=f=>{l(B.sortBy(o.filter(C=>C.id!==f.id),"name")),p(B.sortBy([...c,f],"name"))},_=f=>{p(B.sortBy(c.filter(C=>C.id!==f.id),"name")),l(B.sortBy([...o,f],"name"))},x=async()=>{const f=n.teamStore.createTeam({name:t,image:i,users:c});n.teamStore.fetchTeamList(),a(`/teams/${f}`),f&&alert(`Team ${t} created.`)};return g.exports.useEffect(()=>{l(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(W,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Create team"})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(O,{id:"team-name",label:"Name",value:t,onChange:f=>{r(f.target.value)}}),e(O,{id:"team-image",label:"Image",value:i,onChange:f=>{s(f.target.value)}}),(t==null?void 0:t.length)||(i==null?void 0:i.length)?e("div",{className:"screen__header__preview",children:e(ge,{name:t,image:i,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(I,{variant:"outlined",onClick:x,children:"Create"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),o.map(f=>d("div",{className:"user-list__item",children:[e(Z,{id:f.id,profilePicture:f==null?void 0:f.profilePicture,name:f==null?void 0:f.name,email:f==null?void 0:f.email,hours:f==null?void 0:f.hours},f.id),e(I,{className:"user-list__item__bt-add",onClick:()=>m(f),children:e(rt,{})})]},f.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),c.map(f=>d("div",{className:"user-list__item",children:[e(I,{className:"user-list__item__bt-add",onClick:()=>_(f),children:e(st,{})}),e(Z,{id:f.id,profilePicture:f==null?void 0:f.profilePicture,name:f==null?void 0:f.name,email:f==null?void 0:f.email,hours:f==null?void 0:f.hours})]},f.id))]})]})]})]})})};var Sa=P(_a);const va=()=>{var o,l;const n=A(),a=H(),[t,r]=g.exports.useState(""),[i,s]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){s(n.teamStore.teamList.filter(c=>c.name.toLowerCase().includes(t.toLowerCase())));return}s(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{s(n.teamStore.teamList),window.scrollTo(0,0)},[]),d("div",{className:"screen teams",children:[d(W,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Teams"}),e("div",{className:"screen__header__right",children:((l=(o=n==null?void 0:n.teamStore)==null?void 0:o.teamList)==null?void 0:l.length)?e(O,{id:"filter-term",label:"Filter",size:"small",value:t,onChange:c=>{r(c.target.value)}}):null})]}),e("main",{children:(i==null?void 0:i.length)?i.map(c=>e(ge,{id:c.id,name:c==null?void 0:c.name,image:c==null?void 0:c.image},c.id)):e("div",{children:"No team found."})})]}),e(at,{className:"teams__create-team",color:"primary","aria-label":"Create team",onClick:()=>{a("/teams/create")},children:e(et,{})})]})};var ya=P(va);const Ue=n=>{const{project:a,time:t,description:r,disabled:i,showMeta:s,warnings:o}=n,l=H();return d(oe,{button:!i,className:"time-entry",style:{borderColor:a.color},children:[d("div",{className:"time-entry__pressable",onClick:()=>a.id?l(`/projects/${a.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:a.name})}),d("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:a.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:r})]})]}),s&&(o==null?void 0:o.length)?e("div",{className:"time-entry__meta",children:e(Qe,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:o.map(c=>e("li",{className:"warning-list__item",children:c}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(Ze,{color:o.length===1&&o[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};Ue.propTypes={project:v.instanceOf(Object),time:v.string,description:v.string,disabled:v.bool,showMeta:v.bool,warnings:v.arrayOf(v.instanceOf(Object))};Ue.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var Na=P(Ue);const ba=()=>{var l;const n=A(),a=fe(),t=n.userStore.userList.find(({id:c})=>c===a.id),[r,i]=g.exports.useState([]),[s,o]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(s){i(t.timeEntriesByDay.filter(c=>c.timeEntries.find(p=>{var m;return(m=p==null?void 0:p.warnings)==null?void 0:m.length})).map(c=>T(y({},c),{timeEntries:c.timeEntries.filter(p=>{var m;return(m=p==null?void 0:p.warnings)==null?void 0:m.length})})));return}i(t.timeEntriesByDay)},[s]),g.exports.useEffect(()=>{i(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:d(W,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(le,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),d("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e(xe,{color:t.hours>=200?"error":""})]})]}),d("main",{children:[(t==null?void 0:t.teams.length)?d("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Collaborator teams"})}),t.teams.map(c=>e(ge,{id:c.id,name:c==null?void 0:c.name,image:c==null?void 0:c.image},c.id))]}):null,((l=t==null?void 0:t.timeEntries)==null?void 0:l.length)?d("div",{className:"time-entries",children:[d("header",{className:"section-header",children:[e("h3",{children:"Time entries"}),e("div",{className:"time-entries__filter",children:e(bt,{control:e(wt,{checked:s,onChange:()=>o(!s),name:"filterWarnings",color:"primary"}),label:"Filter warnings"})})]}),(r==null?void 0:r.length)?r.map(c=>d("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:c.date})}),e("div",{className:"description",children:c.timeEntries.map(p=>{var m;return e(Na,{disabled:!((m=p==null?void 0:p.project)==null?void 0:m.id),project:p.project,time:p.timeInterval.duration,description:p.description,warnings:p.warnings,showMeta:!0},p.id)})})]},c.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var wa=P(ba);const La=()=>{var R,ae,Y,J;const n=A(),[a,t]=g.exports.useState(""),[r,i]=g.exports.useState([]),[s,o]=g.exports.useState("name"),[l,c]=g.exports.useState([]),[p,m]=g.exports.useState(!1),[_,x]=g.exports.useState(!1),f=async u=>{try{if(m(!0),c(E=>E.map(F=>u.map(({id:ee})=>ee).includes(F.id)?T(y({},F),{requesting:!0}):F)),(await Q(n.userStore.sendReports({collaborator_ids:u.map(({id:E})=>E)}))).error)return}catch(D){console.log(D)}finally{m(!1),c(D=>D.map(E=>u.map(({id:F})=>F).includes(E.id)?T(y({},E),{requesting:!1}):E))}},C=async()=>{try{m(!0),x(!1);const u=r.filter((D,E)=>l[E].checked&&!l[E].requesting);await f(u)}catch(u){console.log(u)}finally{m(!1)}},h=async()=>{try{ze({data:r.map(({name:u,email:D,hours:E,warnings:F})=>({name:u,email:D,hours:E.toFixed(2),warnings:JSON.stringify(F).replace('"',"").replace('"',"").replace('"'," ").replace('"',"").replace("_"," ").replace("_"," ").replace("{","").replace("}","")})),fileName:`Clockify_Teams_REPORT___from_${me(n.userStore.queryStartDate)}_to_${me(n.userStore.queryEndDate)}`,exportType:ze.types.xls})}catch(u){console.log(u)}},j=(u,D)=>{c(E=>E.map(F=>F.id===u?T(y({},F),{checked:D}):F))},U=u=>{c(D=>D.map(E=>T(y({},E),{checked:u})))};return g.exports.useEffect(()=>{const u=s==="hours"?"desc":"asc";if(a.length){i(B.orderBy(n.userStore.userList.filter(D=>D.name.toLowerCase().includes(a.toLowerCase())),s,u));return}i(B.orderBy(n.userStore.userList,s,u))},[a]),g.exports.useEffect(()=>{const u=s==="hours"?"desc":"asc";i(D=>B.orderBy(D,s,u))},[s]),g.exports.useEffect(()=>{i(B.orderBy(n.userStore.userList,s)),c(B.orderBy(n.userStore.userList,s).map(({id:u})=>({id:u,checked:!1,requesting:!1,error:!1,sent:!1}))),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:d(W,{maxWidth:"lg",children:[d(L,{component:"header",className:"screen__header",sx:{flexDirection:{sm:"column"},alignItems:{sm:"flex-start"}},children:[d(L,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2,children:[e("h2",{children:"Collaborators"}),e(I,{onClick:h,variant:"outlined",startIcon:e(Lt,{}),size:"large",children:"XLS"})]}),d(L,{className:"screen__header__content",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[d(L,{sx:{display:"flex",alignItems:"center",gap:2,marginLeft:1},children:[e(tt,{checked:!l.find(u=>u.checked===!1),onChange:u=>U(u.target.checked),color:"primary",disabled:p}),l.filter(u=>u.checked).length?e("div",{className:"screen__header__content__item",children:e(I,{onClick:()=>x(!0),disabled:p,variant:"outlined",size:"large",sx:{paddingLeft:0,paddingRight:0,minWidth:40},children:p?e(we,{style:{width:20,height:20}}):e(Le,{})})}):null]}),d(L,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((ae=(R=n==null?void 0:n.userStore)==null?void 0:R.userList)==null?void 0:ae.length)?e(L,{flex:{xs:2},children:d(xt,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(Tt,{id:"order-by-label",children:"Order by"}),d(Ct,{labelId:"order-by-label",id:"order-by",value:s,label:"Order by",onChange:u=>o(u.target.value),size:"small",children:[e(Ne,{value:"name",children:"Name"}),e(Ne,{value:"email",children:"E-mail"}),e(Ne,{value:"hours",children:"Workload"})]})]})}):null,((J=(Y=n==null?void 0:n.userStore)==null?void 0:Y.userList)==null?void 0:J.length)?e(L,{flex:"3",children:e(O,{fullWidth:!0,id:"filter-term",label:"Filter",size:"small",value:a,onChange:u=>{t(u.target.value)}})}):null]})]})]}),e("main",{children:(r==null?void 0:r.length)?r.map((u,D)=>{var E,F,ee,re;return e(Z,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,lastName:u==null?void 0:u.lastName,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours,payment:u==null?void 0:u.payment,warnings:u==null?void 0:u.warnings,meta:u==null?void 0:u.meta,checked:(E=l[D])==null?void 0:E.checked,requesting:(F=l[D])==null?void 0:F.requesting,error:(ee=l[D])==null?void 0:ee.error,success:(re=l[D])==null?void 0:re.success,onCheck:_e=>j(u.id,_e),showMeta:!0,pdf:!0,hasCheckBox:!0},u.id)}):e("div",{children:"No collaborator found."})}),d(Te,{open:_,onClose:()=>x(!1),children:[e(Ce,{children:"Report"}),e(De,{children:e(Ee,{children:` Send report to ${l.filter(u=>u.checked).length} collaborators?`})}),d(ke,{children:[e(I,{autoFocus:!0,onClick:()=>x(!1),color:"primary",children:"Cancel"}),e(I,{onClick:C,color:"primary",children:"Confirm"})]})]})]})})};var xa=P(La);const Re=n=>{const{id:a,index:t,name:r,color:i,disabled:s=!1}=n,[o,l]=g.exports.useState(!1),c=H();return g.exports.useEffect(()=>{const p=setTimeout(()=>{l(!0)},t*50+100);return()=>{clearTimeout(p)}},[]),e(oe,{button:!s,onClick:()=>s?null:c(`/projects/${a}`),className:"project",style:{borderColor:o?i:"transparent"},children:e("div",{className:"project__name",children:r})})};Re.propTypes={id:v.string.isRequired,index:v.number.isRequired,name:v.string,color:v.string,disabled:v.bool};Re.defaultProps={name:"",color:"",disabled:!1};var Ta=P(Re);const Ca=()=>{var s,o;const n=A(),[a,t]=g.exports.useState(""),[r,i]=g.exports.useState([]);return g.exports.useEffect(()=>{if(a.length){i(n.projectStore.projectList.filter(l=>l.name.toLowerCase().includes(a.toLowerCase())));return}i(n.projectStore.projectList)},[a]),g.exports.useEffect(()=>{i(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:d(W,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Projects"}),((o=(s=n==null?void 0:n.projectStore)==null?void 0:s.projectList)==null?void 0:o.length)?e(O,{id:"filter-term",label:"Filter",size:"small",value:a,onChange:l=>{t(l.target.value)}}):null]}),e("main",{children:(r==null?void 0:r.length)?r.map((l,c)=>e(Ta,{id:l.id,color:l==null?void 0:l.color,name:l==null?void 0:l.name,index:c},l.id)):e("div",{children:"No project found."})})]})})};var Da=P(Ca);const Ea=()=>{var r,i;const n=A(),a=fe(),t=n.projectStore.projectList.find(({id:s})=>s===a.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:d(W,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:e("div",{className:"project-detail__estimate",children:e("div",{children:`Total: ${te(t==null?void 0:t.duration).toFixed(2)} hours`})})})]}),d("main",{children:[((r=t==null?void 0:t.timeEntriesByUser)==null?void 0:r.length)?d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Project collaborators"})}),t.timeEntriesByUser.map(s=>e(Z,{id:s.id,profilePicture:s==null?void 0:s.profilePicture,name:s==null?void 0:s.name,email:s==null?void 0:s.email,hours:s==null?void 0:s.hours},s.id))]}):null,((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?null:e("div",{children:"No time entries found."})]})]})}):null};var ka=P(Ea);const Ia=()=>{var l,c,p,m,_,x,f,C;const n=A(),[a,t]=g.exports.useState(""),[r,i]=g.exports.useState(!1),[s]=z("clockify-api-key"),o=async()=>{i(!0),await Q(n.authStore.authenticate(a)),i(!1)};return g.exports.useEffect(()=>{const h=document.querySelector(".login .fetch-data-log");h&&(h.scrollTop=h.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(s==null?void 0:s.length)&&t(s)},[]),e("div",{className:"screen login",children:e(W,{maxWidth:"lg",className:"login__container",children:d(L,{position:"relative",display:"flex",alignItems:"center",flexDirection:"column",width:"100%",maxWidth:"400px",children:[e("h1",{children:"Clockify Teams"}),e(L,{className:"login__box",width:"100%",children:n.authStore.isConfirmingIdentity?d(he,{children:[d("div",{className:"login__user",children:[e(le,{alt:(c=(l=n==null?void 0:n.authStore)==null?void 0:l.user)==null?void 0:c.name,src:(m=(p=n==null?void 0:n.authStore)==null?void 0:p.user)==null?void 0:m.profilePicture,className:"login__user__avatar"}),d("div",{className:"login__user__profile",children:[e("div",{className:"login__user__name",children:(x=(_=n==null?void 0:n.authStore)==null?void 0:_.user)==null?void 0:x.name}),e("div",{className:"login__user__email",children:(C=(f=n==null?void 0:n.authStore)==null?void 0:f.user)==null?void 0:C.email})]}),e("div",{className:"login__user__logout",children:e(ne,{onClick:n.authStore.unauthenticate,children:e(Dt,{})})})]}),e(L,{className:"fetch-data-log",width:"100%",children:n.authStore.fetchDataLog.map(({text:h,color:j})=>e("div",{style:{color:j},children:h},h))})]}):d(he,{children:[n.authStore.autoLogin?null:e(O,{id:"api-key",label:"Clockify API Key",value:a,onChange:h=>{t(h.target.value)}}),r||n.authStore.autoLogin?e(it,{}):e(I,{variant:"outlined",onClick:o,children:"Entrar"})]})})]})})})};var $a=P(Ia);const Pa=()=>{var a;const n=A();return e(Et,{children:((a=n==null?void 0:n.authStore)==null?void 0:a.isAuthenticated)?d(he,{children:[e(da,{}),d(He,{children:[e(q,{path:"/users/:id",element:e(wa,{})}),e(q,{path:"/projects/:id",element:e(ka,{})}),e(q,{path:"/projects",element:e(Da,{})}),e(q,{path:"/teams/edit/:id",element:e(ga,{})}),e(q,{path:"/teams/create",element:e(Sa,{})}),e(q,{path:"/teams/:id",element:e(fa,{})}),e(q,{path:"/teams",element:e(ya,{})}),e(q,{path:"/",element:e(xa,{})})]})]}):e(He,{children:e(q,{path:"/",element:e($a,{})})})})};var ja=P(Pa);const Ua=kt({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),ct=({children:n})=>d(It,{theme:Ua,children:[e($t,{}),n]});ct.propTypes={children:v.node.isRequired};const Fe=n=>{const{active:a}=n;return a?e("div",{className:"loader",children:e(it,{style:{height:1}})}):null};Fe.propTypes={active:v.bool};Fe.defaultProps={active:!1};const de=new Date,Ra=()=>{const n=A(),[a,t]=g.exports.useState(!1),[r,i]=g.exports.useState(new Date(de.getFullYear(),de.getMonth(),1)),[s,o]=g.exports.useState(new Date(de.getFullYear(),de.getMonth()+1,0)),l=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(r,s),t(!0),await Q(n.projectStore.fetchProjectList()),await Q(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:d(Ke,{className:"query-date-selector",component:"footer",children:[e("div",{className:"query-date-selector__loader",children:e(Fe,{active:a})}),d(L,{className:"query-date-selector__content",gap:2,children:[e(L,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:1,className:"query-date-selector__date-picker",children:e(Pt,{startText:"Start date",endText:"End date",value:[r,s],disabled:a,onChange:([c,p])=>{i(c),o(p)},renderInput:(c,p)=>d(L,{display:"flex",gap:2,style:{width:"100%"},children:[e(O,T(y({},c),{helperText:null,size:"small",fullWidth:!0})),e(O,T(y({},p),{helperText:null,size:"small",fullWidth:!0}))]})})}),e(L,{width:{xs:"100%",sm:"initial"},children:e(I,{fullWidth:!0,variant:"outlined",disabled:a,onClick:l,className:"query-date-selector__bt-search",children:e(jt,{})})})]})]})};var Fa=P(Ra);window.cptable={};const Ba=()=>{const[n,a]=g.exports.useState(null),[t]=z("clockify-api-key"),r=async()=>{const i=Bt({RootStore:sa,env:Kt});a(i),(t==null?void 0:t.length)&&(i.authStore.setAutoLogin(!0),await Q(i.authStore.authenticate(t)),i.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{r()},[]),n?e("div",{className:"app",children:e(ia,{value:n,children:e(Ut,{dateAdapter:Rt,locale:Ft,children:d(ct,{children:[e(ja,{}),e(Fa,{})]})})})}):null};Ot.register(At,Mt,Wt,qt,zt,Ht);Jt.render(e(Ye.StrictMode,{children:e(Ba,{})}),document.getElementById("root"));
