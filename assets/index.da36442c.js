var Pe=Object.defineProperty,je=Object.defineProperties;var $e=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var te=(n,a,t)=>a in n?Pe(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,N=(n,a)=>{for(var t in a||(a={}))Ie.call(a,t)&&te(n,t,a[t]);if(ue)for(var t of ue(a))ke.call(a,t)&&te(n,t,a[t]);return n},L=(n,a)=>je(n,$e(a));var _=(n,a,t)=>(te(n,typeof a!="symbol"?a+"":a,t),t);import{a as ve,m as R,o as S,c as ae,b,f as z,g as A,d as y,r as g,u as I,j as e,B as D,e as u,h as Ue,S as Fe,i as T,A as Oe,C as j,P as v,L as H,k as Z,l as Se,n as Be,I as Re,p as Ae,T as ye,q as Ne,s as We,t as J,v as V,F as Q,w as Me,x as Le,y as qe,D as ze,z as He,E as Je,G as fe,H as Ke,J as P,K as be,M as we,_ as x,N as Qe,O as Ye,Q as Ze,R as q,U as Ve,V as Xe,W as Ge,X as re,Y as Te,Z as et,$ as pe,a0 as $,a1 as tt,a2 as at,a3 as rt,a4 as M,a5 as ge,a6 as st,a7 as it,a8 as nt,a9 as ot,aa as lt,ab as ct,ac as dt,ad as ht,ae as mt,af as ut,ag as ft,ah as pt,ai as gt,aj as _t}from"./vendor.d3c910e3.js";const vt=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}};vt();const St="https://api.clockify.me/api/v1",yt="https://reports.api.clockify.me/",Nt=ve.create({baseURL:St,timeout:1e4}),Ee=ve.create({baseURL:yt,timeout:1e4}),B=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},i=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(i))}];class X{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"defaultWorkspace",null);_(this,"profilePicture",null);_(this,"timeEntries",[]);_(this,"timeEntriesByDay",[]);_(this,"teams",[]);_(this,"hours",null);_(this,"warnings",{});if(R(this,{id:S,name:S,email:S,defaultWorkspace:S,profilePicture:S,timeEntries:S,timeEntriesByDay:S,teams:S,hours:S,warnings:S}),a==null||a.id==null)throw new Error("Invalid user constructor");const{id:t,name:i,email:s,defaultWorkspace:r,profilePicture:c,timeEntries:o,timeEntriesByDay:l,teams:p,hours:d,warnings:h}=a;this.id=t,this.name=i||"",this.email=s||"",this.defaultWorkspace=r||"",this.profilePicture=c||"",this.timeEntries=o||[],this.timeEntriesByDay=l||[],this.teams=p||[],this.hours=d||0,this.warnings=h||{}}static fromApi({id:a,name:t,email:i,defaultWorkspace:s,profilePicture:r,timeEntries:c,timeEntriesByDay:o,teams:l,hours:p,warnings:d}={}){return new X({id:a,name:t,email:i,defaultWorkspace:s,profilePicture:r,timeEntries:c,timeEntriesByDay:o,teams:l,hours:p,warnings:d})}}class Lt{constructor(){_(this,"user",null);_(this,"authStatus","unauthenticated");_(this,"autoLogin",!1);_(this,"fetchDataLog",[]);R(this,{user:S,authStatus:S,autoLogin:S,fetchDataLog:S,isAuthenticated:ae,isConfirmingIdentity:ae,isUnauthenticated:ae,setUser:b.bound,confirmIdentity:b.bound,unauthenticate:b.bound,setAutoLogin:b.bound,feedFetchDataLog:b.bound,setStatusConfirmingIdentity:b.bound,clearDataLog:b.bound,authenticate:z})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(a){this.user=X.fromApi(a)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(a){this.autoLogin=a}feedFetchDataLog(a,t){let i="";switch(t){case"success":{i="#27ae60";break}case"error":{i="#c0392b";break}default:{i="#ffffff";break}}typeof a=="string"&&a.length&&this.fetchDataLog.push({text:a,color:i})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,A().defaults.headers.common["X-Api-Key"]=null}*authenticate(a){try{const[,t]=B("clockify-api-key");A().defaults.headers.common["X-Api-Key"]=a,Ee.defaults.headers.common["X-Api-Key"]=a,t(a);const i=yield A().get("/user");return(i==null?void 0:i.status)!==200?(alert("Invalid Clockify API Key"),!1):(i==null?void 0:i.data)?(this.setUser(i.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const _e=n=>{try{const a=new Date(n).toISOString().split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(a){return console.log(a),null}},se=n=>{try{const a=n==null?void 0:n.split("T");if(a==null?void 0:a.length){const t=a[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(a){return console.log(a),null}},W=n=>{try{const a=n==null?void 0:n.split("H");let t=0,i=0;return(a==null?void 0:a.length)?((a==null?void 0:a.length)===2?(t=Number(a[0].split("PT")[1])||0,i=Number(a[1].split("M")[0])||0):a[0]!=="PT0S"&&(i=Number(a[0].replace("PT","").replace("M",""))),Number(t+i/60)):null}catch(a){return console.log(a),null}},bt=n=>n.replace(/[^\w\s]/gi,""),Y={NO_PROJECT:"Time entry without project",NO_DESCRIPTION:"Time entry without description",TIME_LIMIT:"Time entry longer than 6 hours"};class wt{constructor(){_(this,"userList",[]);_(this,"queryStartDate",null);_(this,"queryEndDate",null);R(this,{userList:S,queryStartDate:S,queryEndDate:S,setUserList:b.bound,formatUserData:b.bound,getUsersTeams:b.bound,fetchUserList:z,fetchUserTimeEntries:z,fetchUserSummaryReport:z})}setUserList(a=[]){this.userList=a.map(t=>X.fromApi(t))}setQueryDate(a,t){this.queryStartDate=a,this.queryEndDate=t}*fetchUserTimeEntries(a={}){const{id:t,name:i,pageSize:s=5e3}=a,{NO_DESCRIPTION:r,NO_PROJECT:c,TIME_LIMIT:o}=Y;try{y().authStore.feedFetchDataLog(`fetching user ${i} time entries...`);const{defaultWorkspace:l}=y().authStore.user,p=yield A().get(`/workspaces/${l}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":s}});if(p.status!==200)return y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1;if(p==null?void 0:p.data){let d=0;const h={};Object.keys(Y).forEach(m=>{h[m]=0});const E=p.data.map(m=>{var k,U,F;const w=(k=m==null?void 0:m.timeInterval)==null?void 0:k.duration,f=L(N({},m),{warnings:[]});if(((U=m==null?void 0:m.projectId)==null?void 0:U.length)||(f.warnings.push(c),h.NO_PROJECT++),((F=m==null?void 0:m.description)==null?void 0:F.length)||(f.warnings.push(r),h.NO_DESCRIPTION++),w==null?void 0:w.length){const ee=W(w);ee&&(d+=ee,ee>=6&&(f.warnings.push(o),h.TIME_LIMIT++))}return f});return y().authStore.feedFetchDataLog(`fetch user ${i} time entries success`,"success"),{timeEntries:E,hours:d,warnings:h}}return y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1}catch(l){return console.log(l),y().authStore.feedFetchDataLog(`fetch user ${i} time entries error`,"error"),!1}}formatUserData(a){var t,i;try{let s=[];for(const r of a.timeEntries){const c=(t=r==null?void 0:r.timeInterval)==null?void 0:t.duration,o=(i=r==null?void 0:r.timeInterval)==null?void 0:i.start,l=y().projectStore.projectList.find(({id:d})=>d===(r==null?void 0:r.projectId)),p=s.find(d=>d.date===se(o));(c==null?void 0:c.length)&&(o==null?void 0:o.length)&&(p?s=s.map(d=>d.date===se(o)?{date:d.date,timeEntries:[...d.timeEntries,L(N({},r),{project:l||{name:"Without project",color:"#ffffff"}})],hours:d.hours+W(c)}:d):s.push({date:se(o),timeEntries:[L(N({},r),{project:l||{name:"Without project",color:"#ffffff"}})],hours:W(c)}))}return L(N({},a),{timeEntriesByDay:s})}catch(s){return console.log(s),!1}}getUsersTeams(){const a=[];for(const t of this.userList){const i=[];for(const s of y().teamStore.teamList)for(const r of s.users)r.id===t.id&&i.push(s);a.push(L(N({},t),{teams:i}))}this.setUserList(a)}*fetchUserList(a={}){var t;try{y().authStore.feedFetchDataLog("fetching user list...");const{pageSize:i=5e3}=a,{defaultWorkspace:s}=y().authStore.user,r=yield A().get(`/workspaces/${s}/users`,{params:{"page-size":i,status:"ACTIVE"}});if(r.status!==200)return y().authStore.feedFetchDataLog("fetch user list error","error"),!1;if((t=r==null?void 0:r.data)==null?void 0:t.length){y().authStore.feedFetchDataLog("fetch user list success","success");const c=[];for(const o of r.data){const l=yield this.fetchUserTimeEntries(o);if(l){const p=this.formatUserData(N(N({},o),l));c.push(p)}}if(c.length)return this.setUserList(c),y().authStore.feedFetchDataLog("fetch all users time entries success","success"),!0}return y().authStore.feedFetchDataLog("fetch user list error","error"),!1}catch(i){return console.log(i),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*fetchUserSummaryReport(a){try{const{defaultWorkspace:t}=y().authStore.user,i=yield Ee.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[a.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),r=`${a.name.toLowerCase().split(" ").map(o=>bt(o)).join("-")}__from_${_e(this.queryStartDate)}_to_${_e(this.queryEndDate)}`,c=new Blob([i.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(c,r);else{const o=document.createElement("a"),l=document.querySelector("body");o.href=window.URL.createObjectURL(c),o.download=r,o.style.display="none",l.appendChild(o),o.click(),l.removeChild(o),window.URL.revokeObjectURL(o.href)}return!1}catch(t){return console.log(t),y().authStore.feedFetchDataLog("fetch user list error","error"),!1}}}class ie{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"email",null);_(this,"workspaceId",null);_(this,"color",null);_(this,"duration",null);_(this,"estimate",null);_(this,"users",[]);_(this,"timeEntriesByUser",[]);if(R(this,{id:S,name:S,email:S,workspaceId:S,color:S,duration:S,estimate:S,users:S,timeEntriesByUser:S}),a==null||a.id==null)throw new Error("Invalid Project constructor");const{id:t,name:i,email:s,workspaceId:r,color:c,duration:o,estimate:l,users:p,timeEntriesByUser:d}=a;this.id=t,this.name=i||"",this.email=s||"",this.workspaceId=r||"",this.color=c||"",this.duration=o||"",this.estimate=l||"",this.users=p||[],this.timeEntriesByUser=d||[]}static fromApi({id:a,name:t,email:i,workspaceId:s,color:r,duration:c,estimate:o,users:l,timeEntriesByUser:p}={}){return new ie({id:a,name:t,email:i,workspaceId:s,color:r,duration:c,estimate:o,users:l,timeEntriesByUser:p})}}class Tt{constructor(){_(this,"projectList",[]);R(this,{projectList:S,setProjectList:b.bound,formatProjectData:b.bound,formatProjectList:b.bound,fetchProjectList:z})}setProjectList(a=[]){this.projectList=a.map(t=>ie.fromApi(t))}formatProjectData(a={}){var t;try{const{id:i}=a;let s=[];for(const r of y().userStore.userList){const c=r.timeEntries.filter(o=>o.projectId===i);for(const o of c){const l=s.find(h=>h.id===o.userId);let p=0;const d=(t=o==null?void 0:o.timeInterval)==null?void 0:t.duration;(d==null?void 0:d.length)&&(p+=W(d)),l?s=s.map(h=>h.id===o.userId?L(N({},h),{timeEntries:[...h.timeEntries,o],hours:h.hours+p}):h):s.push(L(N({},r),{timeEntries:[o],hours:p}))}}return L(N({},a),{timeEntriesByUser:s})}catch(i){return console.log(i),!1}}formatProjectList(){const a=[];for(const t of this.projectList){const i=this.formatProjectData(t);a.push(i)}this.setProjectList(a)}*fetchProjectList(a={}){var t;try{y().authStore.feedFetchDataLog("fetching project list...");const{pageSize:i=5e3}=a,{defaultWorkspace:s}=y().authStore.user,r=yield A().get(`/workspaces/${s}/projects`,{params:{archived:!1,"page-size":i}});return r.status!==200?(y().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=r==null?void 0:r.data)==null?void 0:t.length)?(this.setProjectList(r.data),y().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(i){return console.log(i),y().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class ne{constructor(a){_(this,"id",null);_(this,"name",null);_(this,"image",null);_(this,"users",[]);_(this,"timeEntriesByProject",[]);if(R(this,{id:S,name:S,image:S,users:S,timeEntriesByProject:S}),a==null||a.id==null)throw new Error("Invalid Team constructor");const{id:t,name:i,image:s,users:r,timeEntriesByProject:c}=a;this.id=t,this.name=i||"",this.image=s||"",this.users=r||[],this.timeEntriesByProject=c||[]}static fromApi({id:a,name:t,image:i,users:s,timeEntriesByProject:r}={}){return new ne({id:a,name:t,image:i,users:s,timeEntriesByProject:r})}}class Et{constructor(){_(this,"teamList",[]);R(this,{teamList:S,setTeamList:b.bound,createTeam:b.bound,editTeam:b.bound,fetchTeamList:b.bound,formatTeamData:b.bound})}createTeam(a={}){try{const{users:t}=a,[i,s]=B("team-list"),r=i||[];let c=1;return r.length?(c=r.length+1,s([...r,L(N({},a),{id:c,users:t.map(o=>o.id)})])):s([L(N({},a),{id:1,users:t.map(o=>o.id)})]),c}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(a,t={}){try{const[i,s]=B("team-list"),{users:r}=t;return s(i.map(c=>c.id===a?L(N(N({},c),c),{users:r.map(o=>o.id)}):c)),a}catch(i){return console.log(i),!1}finally{this.fetchTeamList()}}removeTeam(a={}){try{const[t,i]=B("team-list"),s=t.filter(r=>r.id!==a.id);i(s),this.setTeamList(s.map(r=>L(N({},r),{users:y().userStore.userList.filter(c=>r.users.includes(c.id))})))}catch(t){console.log(t)}}setTeamList(a=[]){this.teamList=a.map(t=>ne.fromApi(t))}fetchTeamList(){try{y().authStore.feedFetchDataLog("fetching team list...");const[a]=B("team-list");if(a.length){const t=[];for(const i of a){const s=this.formatTeamData(i);t.push(L(N({},s),{users:y().userStore.userList.filter(r=>i.users.includes(r.id))}))}this.setTeamList(t),y().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(a){return console.log(a),y().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(a={}){var t;try{const i=[];let s=[];for(const c of a.users){const o=y().userStore.userList.find(l=>l.id===c);if(o){const{timeEntries:l,hours:p}=o;for(const h of l){const E=s.find(f=>f.id===h.projectId);let m=0;const w=(t=h==null?void 0:h.timeInterval)==null?void 0:t.duration;(w==null?void 0:w.length)&&(m+=W(w)),E?s=s.map(f=>f.id===h.projectId?L(N({},f),{id:h.projectId,timeEntries:[...f.timeEntries,h],hours:f.hours+m}):f):s.push({id:h.projectId,timeEntries:[h],hours:m})}const d=y().userStore.userList.find(h=>h.id===c.id);i.push(L(N({},d),{timeEntries:l,hours:p}))}}let r=0;for(const c of s){if(c.id){const o=y().projectStore.projectList.find(l=>l.id===c.id);o&&(s[r]=L(N({},s[r]),{name:o.name,color:o.color}))}else s[r]=L(N({},s[r]),{name:"Without project",color:"#ffffff"});r++}return L(N({},a),{users:i,timeEntriesByProject:s})}catch(i){return console.log(i),!1}}}class Dt{constructor(){_(this,"authStore",null);_(this,"userStore",null);_(this,"projectStore",null);_(this,"teamStore",null)}init(){this.authStore=new Lt,this.userStore=new wt,this.projectStore=new Tt,this.teamStore=new Et}}const De=g.exports.createContext({}),xt=De.Provider,C=()=>g.exports.useContext(De);const Ct=[{route:"/",label:"Collaborators"},{route:"/teams",label:"Teams"},{route:"/projects",label:"Projects"}],xe=({vertical:n,drawer:a})=>{const t=I(),i=s=>{t(s),a&&a.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:Ct.map(s=>e("li",{className:"menu__list__item",children:e(D,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>i(s.route),children:s.label})},s.route))})})};const Pt=()=>{const[n,a]=g.exports.useState(!1),t=()=>{a(!0)},i=()=>{a(!1)};return u("div",{className:"drawer",children:[e(D,{onClick:t,children:e(Ue,{color:"primary"})}),e(Fe,{anchor:"right",open:n,onClose:i,onOpen:t,children:e("div",{className:"drawer__content",children:e(xe,{vertical:!0,drawer:{close:i}})})})]})};const jt=()=>e("div",{className:"logo",children:"Clockify Teams"});const $t=()=>e(Oe,{className:"header",position:"sticky",children:e(j,{maxWidth:"lg",children:u("div",{className:"header__content",children:[e(jt,{}),e("div",{className:"header__menu",children:e(xe,{})}),e("div",{className:"header__drawer",children:e(Pt,{})})]})})});var It=T($t);const oe=n=>{var p;const a=C(),{hours:t,warnings:i,user:s,pdf:r}=n,[c,o]=g.exports.useState(!1),l=async()=>{o(!0),await J(a.userStore.fetchUserSummaryReport(s)),o(!1)};return u("div",{className:"user__meta",children:[u("div",{className:"user__meta__item",style:{color:t>=200?"#f44336":"#ffffff"},children:[t.toFixed(2),e(Se,{color:t>=200?"error":""})]}),r?c?e(Be,{style:{width:20,height:20,margin:14}}):e(Re,{onClick:l,children:e(Ae,{})}):null,((p=Object.entries(i).filter(([,d])=>d>0))==null?void 0:p.length)?e(ye,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(i).filter(([,d])=>d>0).map(([d,h])=>e("li",{className:"warning-list__item",children:`${h}x ${Y[d]}`},Y[d]))}),children:e("div",{className:"user__meta__item warning",children:e(Ne,{color:i.NO_PROJECT>0||i.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(We,{color:"secondary"})})]})};oe.propTypes={hours:v.number.isRequired,user:v.instanceOf(Object).isRequired,pdf:v.bool,warnings:v.instanceOf(Object).isRequired};oe.defaultProps={pdf:!1};const le=n=>{const{id:a,name:t,lastName:i,profilePicture:s,email:r,showMeta:c,pdf:o,disabled:l,hours:p,warnings:d}=n,h=I();return u(H,{className:"user",children:[u("div",{className:"user__pressable",onClick:()=>l?null:h(`/users/${a}`),style:{pointerEvents:l?"none":"initial"},children:[e(Z,{alt:t,src:s,className:"user__avatar"}),u("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:r})]})]}),c?e(oe,{pdf:o,hours:p,warnings:d,user:{id:a,name:t,lastName:i,email:r}}):null]})};le.propTypes={id:v.oneOfType([v.number,v.string]),name:v.string,lastName:v.string,profilePicture:v.string,email:v.string,showMeta:v.bool,pdf:v.bool,disabled:v.bool,hours:v.number,warnings:v.instanceOf(Object)};le.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null};var O=T(le);const kt=()=>{var p;const n=C(),a=V(),t=I(),[i,s]=g.exports.useState(!1),r=n.teamStore.teamList.find(({id:d})=>d===Number(a.id)),c=()=>{s(!0)},o=()=>{s(!1)},l=()=>{n.teamStore.removeTeam(r),o(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),r?u(Q,{children:[u("div",{className:"screen team-detail",children:[u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[u("div",{className:"screen__header__left",children:[e(Z,{alt:r==null?void 0:r.name,src:r==null?void 0:r.image,className:"team-detail__avatar"}),e("h2",{children:r==null?void 0:r.name})]}),e("div",{className:"screen__header__right",children:e(D,{onClick:c,children:e(Me,{})})})]}),e("main",{children:u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Team collaborators"})}),((p=r==null?void 0:r.users)==null?void 0:p.length)?r.users.map(d=>e(O,{id:d.id,profilePicture:d==null?void 0:d.profilePicture,name:d==null?void 0:d.name,email:d==null?void 0:d.email,hours:d==null?void 0:d.hours,warnings:d==null?void 0:d.warnings,showMeta:!0},d.id)):null]})})]}),e(Le,{className:"team-detail__edit-team",color:"primary","aria-label":"Edit team",onClick:()=>{t(`/teams/edit/${r.id}`)},children:e(qe,{})})]}),u(ze,{open:i,onClose:o,"aria-labelledby":"draggable-dialog-title",children:[e(He,{style:{cursor:"move"},id:"draggable-dialog-title",children:`Delete team ${r.name}`}),u(Je,{children:[e(fe,{children:`Are you sure you want to delete ${r.name} team?`}),e(fe,{children:"Esta a\xE7\xE3o \xE9 irrevers\xEDvel."})]}),u(Ke,{children:[e(D,{autoFocus:!0,onClick:o,color:"primary",children:"Cancelar"}),e(D,{onClick:l,color:"primary",children:"Confirmar"})]})]})]}):null};var Ut=T(kt);const ce=n=>{const{id:a,name:t,image:i,avatarSize:s,fontSize:r,disabled:c,card:o}=n,l=I();return o?u(H,{className:"team card",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[i.length?e("img",{className:"team__image",src:i,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:r},children:t})})]}):u(H,{className:"team",button:!c,onClick:()=>c?null:l(`/teams/${a}`),children:[e(Z,{alt:t,src:i,className:"team__avatar",style:{width:s,height:s}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:r},children:t})})]})};ce.propTypes={id:v.number.isRequired,name:v.string,image:v.string,avatarSize:v.number,fontSize:v.number,disabled:v.bool,card:v.bool};ce.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var G=T(ce);const Ft=()=>{const n=C(),a=V(),t=I(),i=n.teamStore.teamList.find(f=>f.id===Number(a.id)),[s,r]=g.exports.useState(""),[c,o]=g.exports.useState(""),[l,p]=g.exports.useState([]),[d,h]=g.exports.useState([]),E=(f,k,U)=>{p(x.sortBy(k.filter(F=>F.id!==f.id),"name")),h(x.sortBy([...U,f],"name"))},m=(f,k,U)=>{h(x.sortBy(U.filter(F=>F.id!==f.id),"name")),p(x.sortBy([...k,f],"name"))},w=async()=>{const f=await n.teamStore.editTeam(i.id,{name:s,image:c,users:d});t(`/teams/${f}`),f&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{r(i.name),o(i.image),h(i.users);const f=[...n.userStore.userList];i.users.forEach(k=>{f.forEach((U,F)=>{U.id===k.id&&f.splice(F,1)})}),p(f)},[i]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:u(j,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Edit team ${i.name}`})}),u("main",{children:[u("div",{className:"create-team__form",children:[u("div",{className:"create-team__form__content",children:[e(P,{id:"team-name",label:"Name",value:s,onChange:f=>{r(f.target.value)}}),e(P,{id:"team-image",label:"Image",value:c,onChange:f=>{o(f.target.value)}}),(s==null?void 0:s.length)||(c==null?void 0:c.length)?e("div",{className:"screen__header__preview",children:e(G,{name:s,image:c,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(D,{variant:"outlined",onClick:w,children:"Salvar"})]}),u("div",{className:"create-team__user-lists",children:[u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),l.map(f=>u("div",{className:"user-list__item",children:[e(O,{id:f.id,profilePicture:f==null?void 0:f.profilePicture,name:f==null?void 0:f.name,email:f==null?void 0:f.email,hours:f==null?void 0:f.hours},f.id),e(D,{className:"user-list__item__bt-add",onClick:()=>E(f,l,d),children:e(be,{})})]},f.id))]}),u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),d.map(f=>u("div",{className:"user-list__item",children:[e(D,{className:"user-list__item__bt-add",onClick:()=>m(f,l,d),children:e(we,{})}),e(O,{id:f.id,profilePicture:f==null?void 0:f.profilePicture,name:f==null?void 0:f.name,email:f==null?void 0:f.email,hours:f==null?void 0:f.hours})]},f.id))]})]})]})]})})};var Ot=T(Ft);const Bt=()=>{const n=C(),a=I(),[t,i]=g.exports.useState(""),[s,r]=g.exports.useState(""),[c,o]=g.exports.useState([]),[l,p]=g.exports.useState([]),d=m=>{o(x.sortBy(c.filter(w=>w.id!==m.id),"name")),p(x.sortBy([...l,m],"name"))},h=m=>{p(x.sortBy(l.filter(w=>w.id!==m.id),"name")),o(x.sortBy([...c,m],"name"))},E=async()=>{const m=n.teamStore.createTeam({name:t,image:s,users:l});n.teamStore.fetchTeamList(),a(`/teams/${m}`),m&&alert(`Team ${t} created.`)};return g.exports.useEffect(()=>{o(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:u(j,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Create team"})}),u("main",{children:[u("div",{className:"create-team__form",children:[u("div",{className:"create-team__form__content",children:[e(P,{id:"team-name",label:"Name",value:t,onChange:m=>{i(m.target.value)}}),e(P,{id:"team-image",label:"Image",value:s,onChange:m=>{r(m.target.value)}}),(t==null?void 0:t.length)||(s==null?void 0:s.length)?e("div",{className:"screen__header__preview",children:e(G,{name:t,image:s,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(D,{variant:"outlined",onClick:E,children:"Create"})]}),u("div",{className:"create-team__user-lists",children:[u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),c.map(m=>u("div",{className:"user-list__item",children:[e(O,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours},m.id),e(D,{className:"user-list__item__bt-add",onClick:()=>d(m),children:e(be,{})})]},m.id))]}),u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),l.map(m=>u("div",{className:"user-list__item",children:[e(D,{className:"user-list__item__bt-add",onClick:()=>h(m),children:e(we,{})}),e(O,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours})]},m.id))]})]})]})]})})};var Rt=T(Bt);const At=()=>{var c,o;const n=C(),a=I(),[t,i]=g.exports.useState(""),[s,r]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){r(n.teamStore.teamList.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())));return}r(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{r(n.teamStore.teamList),window.scrollTo(0,0)},[]),u("div",{className:"screen teams",children:[u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[e("h2",{children:"Teams"}),e("div",{className:"screen__header__right",children:((o=(c=n==null?void 0:n.teamStore)==null?void 0:c.teamList)==null?void 0:o.length)?e(P,{id:"filter-term",label:"Filter",size:"small",value:t,onChange:l=>{i(l.target.value)}}):null})]}),e("main",{children:(s==null?void 0:s.length)?s.map(l=>e(G,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id)):e("div",{children:"No teams found."})})]}),e(Le,{className:"teams__create-team",color:"primary","aria-label":"Create team",onClick:()=>{a("/teams/create")},children:e(Qe,{})})]})};var Wt=T(At);const de=n=>{const{project:a,time:t,description:i,disabled:s,showMeta:r,warnings:c}=n,o=I();return u(H,{button:!s,className:"time-entry",style:{borderColor:a.color},children:[u("div",{className:"time-entry__pressable",onClick:()=>a.id?o(`/projects/${a.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:a.name})}),u("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:a.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:i})]})]}),r&&(c==null?void 0:c.length)?e("div",{className:"time-entry__meta",children:e(ye,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:c.map(l=>e("li",{className:"warning-list__item",children:l}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(Ne,{color:c.length===1&&c[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};de.propTypes={project:v.instanceOf(Object),time:v.string,description:v.string,disabled:v.bool,showMeta:v.bool,warnings:v.arrayOf(v.instanceOf(Object))};de.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var Mt=T(de);const qt=()=>{var o;const n=C(),a=V(),t=n.userStore.userList.find(({id:l})=>l===a.id),[i,s]=g.exports.useState([]),[r,c]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(r){s(t.timeEntriesByDay.filter(l=>l.timeEntries.find(p=>{var d;return(d=p==null?void 0:p.warnings)==null?void 0:d.length})).map(l=>L(N({},l),{timeEntries:l.timeEntries.filter(p=>{var d;return(d=p==null?void 0:p.warnings)==null?void 0:d.length})})));return}s(t.timeEntriesByDay)},[r]),g.exports.useEffect(()=>{s(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[u("div",{className:"screen__header__left",children:[e(Z,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),u("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e(Se,{color:t.hours>=200?"error":""})]})]}),u("main",{children:[(t==null?void 0:t.teams.length)?u("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Collaborator teams"})}),t.teams.map(l=>e(G,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id))]}):null,((o=t==null?void 0:t.timeEntries)==null?void 0:o.length)?u("div",{className:"time-entries",children:[u("header",{className:"section-header",children:[e("h3",{children:"Entradas de tempo"}),e("div",{className:"time-entries__filter",children:e(Ye,{control:e(Ze,{checked:r,onChange:()=>c(!r),name:"filterWarnings",color:"primary"}),label:"Filtrar warnings"})})]}),(i==null?void 0:i.length)?i.map(l=>u("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:l.date})}),e("div",{className:"description",children:l.timeEntries.map(p=>{var d;return e(Mt,{disabled:!((d=p==null?void 0:p.project)==null?void 0:d.id),project:p.project,time:p.timeInterval.duration,description:p.description,warnings:p.warnings,showMeta:!0},p.id)})})]},l.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var zt=T(qt);const Ht=()=>{var o,l,p,d;const n=C(),[a,t]=g.exports.useState(""),[i,s]=g.exports.useState([]),[r,c]=g.exports.useState("name");return g.exports.useEffect(()=>{const h=r==="hours"?"desc":"asc";if(a.length){s(x.orderBy(n.userStore.userList.filter(E=>E.name.toLowerCase().includes(a.toLowerCase())),r,h));return}s(x.orderBy(n.userStore.userList,r,h))},[a]),g.exports.useEffect(()=>{const h=r==="hours"?"desc":"asc";s(E=>x.orderBy(E,r,h))},[r]),g.exports.useEffect(()=>{s(x.orderBy(n.userStore.userList,r)),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:u(j,{maxWidth:"lg",children:[u(q,{component:"header",className:"screen__header",children:[e("h2",{children:"Collaborators"}),u(q,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((l=(o=n==null?void 0:n.userStore)==null?void 0:o.userList)==null?void 0:l.length)?e(q,{flex:{xs:2},children:u(Ve,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(Xe,{id:"order-by-label",children:"Order by"}),u(Ge,{labelId:"order-by-label",id:"order-by",value:r,label:"Order by",onChange:h=>c(h.target.value),size:"small",children:[e(re,{value:"name",children:"Name"}),e(re,{value:"email",children:"E-mail"}),e(re,{value:"hours",children:"Workload"})]})]})}):null,((d=(p=n==null?void 0:n.userStore)==null?void 0:p.userList)==null?void 0:d.length)?e(q,{flex:"3",children:e(P,{fullWidth:!0,id:"filter-term",label:"Filter",size:"small",value:a,onChange:h=>{t(h.target.value)}})}):null]})]}),e("main",{children:(i==null?void 0:i.length)?i.map(h=>e(O,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,lastName:h==null?void 0:h.lastName,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours,payment:h==null?void 0:h.payment,warnings:h==null?void 0:h.warnings,showMeta:!0,pdf:!0},h.id)):e("div",{children:"No collaborators found."})})]})})};var Jt=T(Ht);const he=n=>{const{id:a,index:t,name:i,color:s,disabled:r=!1}=n,[c,o]=g.exports.useState(!1),l=I();return g.exports.useEffect(()=>{const p=setTimeout(()=>{o(!0)},t*50+100);return()=>{clearTimeout(p)}},[]),e(H,{button:!r,onClick:()=>r?null:l(`/projects/${a}`),className:"project",style:{borderColor:c?s:"transparent"},children:e("div",{className:"project__name",children:i})})};he.propTypes={id:v.number.isRequired,index:v.number.isRequired,name:v.string,color:v.string,disabled:v.bool};he.defaultProps={name:"",color:"",disabled:!1};var Kt=T(he);const Qt=()=>{var r,c;const n=C(),[a,t]=g.exports.useState(""),[i,s]=g.exports.useState([]);return g.exports.useEffect(()=>{if(a.length){s(n.projectStore.projectList.filter(o=>o.name.toLowerCase().includes(a.toLowerCase())));return}s(n.projectStore.projectList)},[a]),g.exports.useEffect(()=>{s(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[e("h2",{children:"Projects"}),((c=(r=n==null?void 0:n.projectStore)==null?void 0:r.projectList)==null?void 0:c.length)?e(P,{id:"filter-term",label:"Filter",size:"small",value:a,onChange:o=>{t(o.target.value)}}):null]}),e("main",{children:(i==null?void 0:i.length)?i.map((o,l)=>e(Kt,{id:o.id,color:o==null?void 0:o.color,name:o==null?void 0:o.name,index:l},o.id)):e("div",{children:"No projects found."})})]})})};var Yt=T(Qt);const Zt=()=>{var i,s;const n=C(),a=V(),t=n.projectStore.projectList.find(({id:r})=>r===a.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:u(j,{maxWidth:"lg",children:[u("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:e("div",{className:"project-detail__estimate",children:e("div",{children:`Total: ${W(t==null?void 0:t.duration).toFixed(2)} hours`})})})]}),u("main",{children:[((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?u("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Project collaborators"})}),t.timeEntriesByUser.map(r=>e(O,{id:r.id,profilePicture:r==null?void 0:r.profilePicture,name:r==null?void 0:r.name,email:r==null?void 0:r.email,hours:r==null?void 0:r.hours},r.id))]}):null,((s=t==null?void 0:t.timeEntriesByUser)==null?void 0:s.length)?null:e("div",{children:"No time entries found."})]})]})}):null};var Vt=T(Zt);const Xt=()=>{var o,l,p,d,h,E;const n=C(),[a,t]=g.exports.useState(""),[i,s]=g.exports.useState(!1),[r]=B("clockify-api-key"),c=async()=>{s(!0),await J(n.authStore.authenticate(a)),s(!1)};return g.exports.useEffect(()=>{const m=document.querySelector(".login .fetch-data-log");m&&(m.scrollTop=m.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(r==null?void 0:r.length)&&t(r)},[]),e("div",{className:"screen login",children:e(j,{maxWidth:"lg",className:"login__container",children:u(q,{position:"relative",children:[e("h1",{children:"Clockify Teams"}),e("div",{className:"login__box",children:n.authStore.isConfirmingIdentity?u(Q,{children:[e(O,{disabled:!0,name:(l=(o=n==null?void 0:n.authStore)==null?void 0:o.user)==null?void 0:l.name,profilePicture:(d=(p=n==null?void 0:n.authStore)==null?void 0:p.user)==null?void 0:d.profilePicture,email:(E=(h=n==null?void 0:n.authStore)==null?void 0:h.user)==null?void 0:E.email}),e("div",{className:"fetch-data-log",children:n.authStore.fetchDataLog.map(({text:m,color:w})=>e("div",{style:{color:w},children:m},m))})]}):u(Q,{children:[n.authStore.autoLogin?null:e(P,{id:"api-key",label:"Clockify API Key",value:a,onChange:m=>{t(m.target.value)}}),i||n.authStore.autoLogin?e(Te,{}):e(D,{variant:"outlined",onClick:c,children:"Entrar"})]})})]})})})};var Gt=T(Xt);const ea=()=>{var a;const n=C();return e(et,{children:((a=n==null?void 0:n.authStore)==null?void 0:a.isAuthenticated)?u(Q,{children:[e(It,{}),u(pe,{children:[e($,{path:"/users/:id",element:e(zt,{})}),e($,{path:"/projects/:id",element:e(Vt,{})}),e($,{path:"/projects",element:e(Yt,{})}),e($,{path:"/teams/edit/:id",element:e(Ot,{})}),e($,{path:"/teams/create",element:e(Rt,{})}),e($,{path:"/teams/:id",element:e(Ut,{})}),e($,{path:"/teams",element:e(Wt,{})}),e($,{path:"/",element:e(Jt,{})})]})]}):e(pe,{children:e($,{path:"/",element:e(Gt,{})})})})};var ta=T(ea);const aa=tt({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),Ce=({children:n})=>u(at,{theme:aa,children:[e(rt,{}),n]});Ce.propTypes={children:v.node.isRequired};const me=n=>{const{active:a}=n;return a?e("div",{className:"loader",children:e(Te,{})}):null};me.propTypes={active:v.bool};me.defaultProps={active:!1};const K=new Date,ra=()=>{const n=C(),[a,t]=g.exports.useState(!1),[i,s]=g.exports.useState(new Date(K.getFullYear(),K.getMonth(),1)),[r,c]=g.exports.useState(new Date(K.getFullYear(),K.getMonth()+1,0)),o=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(i,r),t(!0),await J(n.projectStore.fetchProjectList()),await J(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:u("div",{className:"query-date-selector",children:[e("div",{className:"query-date-selector__loader",children:e(me,{active:a})}),u(M,{className:"query-date-selector__content",gap:2,children:[u(M,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:{md:3},children:[e(M,{flex:{xs:1},children:e(ge,{views:["day"],label:"From",value:i,disabled:a,onChange:s,renderInput:l=>e(P,L(N({},l),{helperText:null,size:"small",fullWidth:!0,sx:{width:"100%"}}))})}),e(M,{flex:{xs:1},children:e(ge,{views:["day"],label:"To",value:r,disabled:a,onChange:c,renderInput:l=>e(P,L(N({},l),{helperText:null,size:"small",sx:{width:"100%"}}))})})]}),e(M,{width:{xs:"100%",sm:"initial"},children:e(D,{fullWidth:!0,variant:"outlined",disabled:a,onClick:o,className:"query-date-selector__bt-search",children:e(st,{})})})]})]})};var sa=T(ra);const ia=()=>{const[n,a]=g.exports.useState(null),[t]=B("clockify-api-key"),i=async()=>{const s=lt({RootStore:Dt,env:Nt});a(s),(t==null?void 0:t.length)&&(s.authStore.setAutoLogin(!0),await J(s.authStore.authenticate(t)),s.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{i()},[]),n?e("div",{className:"app",children:e(xt,{value:n,children:e(it,{dateAdapter:nt,locale:ot,children:u(Ce,{children:[e(ta,{}),e(sa,{})]})})})}):null};ct.register(dt,ht,mt,ut,ft,pt);gt.render(e(_t.StrictMode,{children:e(ia,{})}),document.getElementById("root"));
