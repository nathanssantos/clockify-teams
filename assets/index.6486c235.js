var Xe=Object.defineProperty,Ye=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var xe=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ze=Object.prototype.propertyIsEnumerable;var le=(n,r,t)=>r in n?Xe(n,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[r]=t,b=(n,r)=>{for(var t in r||(r={}))Qe.call(r,t)&&le(n,t,r[t]);if(xe)for(var t of xe(r))Ze.call(r,t)&&le(n,t,r[t]);return n},w=(n,r)=>Ye(n,Ke(r));var v=(n,r,t)=>(le(n,typeof r!="symbol"?r+"":r,t),t);import{a as $e,m as Y,o as y,c as ce,b as D,f as z,g as W,d as N,r as g,u as q,j as e,B as x,e as d,h as Ve,S as Ge,i as P,A as Pe,C as A,P as _,L as Z,k as Ie,l as V,n as je,I as me,p as ue,q as et,s as Re,T as Fe,t as Ue,v as tt,D as fe,w as pe,x as ge,y as _e,z as Se,E as J,F as ie,G as re,H as rt,J as Oe,K as at,M as B,N as Be,O as Ae,_ as j,Q as st,R as it,U as nt,V as F,W as ot,X as lt,Y as ct,Z as dt,$ as de,a0 as De,a1 as Me,a2 as ht,a3 as mt,a4 as ke,a5 as M,a6 as ut,a7 as ft,a8 as pt,a9 as gt,aa as _t,ab as St,ac as vt,ad as yt,ae as Nt,af as bt,ag as Lt,ah as wt,ai as Tt,aj as Ct,ak as Et,al as xt,am as Dt,an as kt}from"./vendor.1f7b77fa.js";const $t=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}};$t();const Pt="https://api.clockify.me/api/v1",It="https://reports.api.clockify.me/",jt=$e.create({baseURL:Pt,timeout:1e4}),qe=$e.create({baseURL:It,timeout:1e4}),H=(n="")=>[JSON.parse(localStorage.getItem(`clockify-teams@${n}`))||{},s=>{localStorage.setItem(`clockify-teams@${n}`,JSON.stringify(s))}];class ne{constructor(r){v(this,"id",null);v(this,"name",null);v(this,"email",null);v(this,"defaultWorkspace",null);v(this,"profilePicture",null);v(this,"timeEntries",[]);v(this,"timeEntriesByDay",[]);v(this,"teams",[]);v(this,"hours",null);v(this,"warnings",{});if(Y(this,{id:y,name:y,email:y,defaultWorkspace:y,profilePicture:y,timeEntries:y,timeEntriesByDay:y,teams:y,hours:y,warnings:y}),r==null||r.id==null)throw new Error("Invalid user constructor");const{id:t,name:s,email:i,defaultWorkspace:a,profilePicture:c,timeEntries:o,timeEntriesByDay:l,teams:f,hours:m,warnings:S}=r;this.id=t,this.name=s||"",this.email=i||"",this.defaultWorkspace=a||"",this.profilePicture=c||"",this.timeEntries=o||[],this.timeEntriesByDay=l||[],this.teams=f||[],this.hours=m||0,this.warnings=S||{}}static fromApi({id:r,name:t,email:s,defaultWorkspace:i,profilePicture:a,timeEntries:c,timeEntriesByDay:o,teams:l,hours:f,warnings:m}={}){return new ne({id:r,name:t,email:s,defaultWorkspace:i,profilePicture:a,timeEntries:c,timeEntriesByDay:o,teams:l,hours:f,warnings:m})}}class Rt{constructor(){v(this,"user",null);v(this,"authStatus","unauthenticated");v(this,"autoLogin",!1);v(this,"fetchDataLog",[]);Y(this,{user:y,authStatus:y,autoLogin:y,fetchDataLog:y,isAuthenticated:ce,isConfirmingIdentity:ce,isUnauthenticated:ce,setUser:D.bound,confirmIdentity:D.bound,unauthenticate:D.bound,setAutoLogin:D.bound,feedFetchDataLog:D.bound,setStatusConfirmingIdentity:D.bound,clearDataLog:D.bound,authenticate:z})}get isAuthenticated(){return this.authStatus==="authenticated"}get isConfirmingIdentity(){return this.authStatus==="confirming-identity"}get isUnauthenticated(){return this.authStatus==="unauthenticated"}setUser(r){this.user=ne.fromApi(r)}confirmIdentity(){this.authStatus="authenticated"}setAutoLogin(r){this.autoLogin=r}feedFetchDataLog(r,t){let s="";switch(t){case"success":{s="#27ae60";break}case"error":{s="#c0392b";break}default:{s="#ffffff";break}}typeof r=="string"&&r.length&&this.fetchDataLog.push({text:r,color:s})}clearDataLog(){this.fetchDataLog=[]}setStatusConfirmingIdentity(){this.authStatus="confirming-identity"}unauthenticate(){this.authStatus="unauthenticated",this.user=null,W().defaults.headers.common["X-Api-Key"]=null}*authenticate(r){try{const[,t]=H("clockify-api-key");W().defaults.headers.common["X-Api-Key"]=r,qe.defaults.headers.common["X-Api-Key"]=r,t(r);const s=yield W().get("/user");return(s==null?void 0:s.status)!==200?(alert("Invalid Clockify API Key"),!1):(s==null?void 0:s.data)?(this.setUser(s.data),this.authStatus="confirming-identity",!0):(this.unauthenticate(),!1)}catch(t){return console.log(t),this.unauthenticate(),alert("Invalid Clockify API Key"),!1}}}const Ft=n=>{let r=n;r=r*60*60;let t=Math.floor(r/(60*60));r-=t*60*60;let s=Math.floor(r/60);return r-=s*60,t<10&&(t=`0${t}`),s<10&&(s=`0${s}`),`${t}:${s}`},ae=n=>{try{const r=new Date(n).toISOString().split("T");if(r==null?void 0:r.length){const t=r[0].split("-");return`${t[2]}-${t[1]}-${t[0]}`}return null}catch(r){return console.log(r),null}},he=n=>{try{const r=n==null?void 0:n.split("T");if(r==null?void 0:r.length){const t=r[0].split("-");return`${t[2]}/${t[1]}/${t[0]}`}return null}catch(r){return console.log(r),null}},K=n=>{try{const r=n==null?void 0:n.split("H");let t=0,s=0;return(r==null?void 0:r.length)?((r==null?void 0:r.length)===2?(t=Number(r[0].split("PT")[1])||0,s=Number(r[1].split("M")[0])||0):r[0]!=="PT0S"&&(s=Number(r[0].replace("PT","").replace("M",""))),Number(t+s/60)):null}catch(r){return console.log(r),null}},Ut=n=>n.replace(/[^\w\s]/gi,""),se={NO_DESCRIPTION:"Time entry without description",TIME_LIMIT:"Time entry longer than 6 hours"};class Ot{constructor(){v(this,"userList",[]);v(this,"queryStartDate",null);v(this,"queryEndDate",null);Y(this,{userList:y,queryStartDate:y,queryEndDate:y,setUserList:D.bound,formatUserData:D.bound,getUsersTeams:D.bound,fetchUserList:z,fetchUserTimeEntries:z,fetchUserSummaryReport:z,sendReports:z,sendReport:z})}setUserList(r=[]){this.userList=r.map(t=>ne.fromApi(t))}setQueryDate(r,t){this.queryStartDate=r,this.queryEndDate=t}*fetchUserTimeEntries(r={}){const{id:t,name:s,pageSize:i=5e3}=r,{NO_DESCRIPTION:a,TIME_LIMIT:c}=se;try{N().authStore.feedFetchDataLog(`fetching user ${s} time entries...`);const{defaultWorkspace:o}=N().authStore.user,l=yield W().get(`/workspaces/${o}/user/${t}/time-entries`,{params:{start:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,end:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,"page-size":i}});if(l.status!==200)return N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1;if(l==null?void 0:l.data){let f=0;const m={};Object.keys(se).forEach(L=>{m[L]=0});const S=l.data.map(L=>{var h,k;const u=(h=L==null?void 0:L.timeInterval)==null?void 0:h.duration,T=w(b({},L),{warnings:[]});if(((k=L==null?void 0:L.description)==null?void 0:k.length)||(T.warnings.push(a),m.NO_DESCRIPTION++),u==null?void 0:u.length){const $=K(u);$&&(f+=$,$>=6&&(T.warnings.push(c),m.TIME_LIMIT++))}return T});return N().authStore.feedFetchDataLog(`fetch user ${s} time entries success`,"success"),{timeEntries:S,hours:f,warnings:m}}return N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}catch(o){return console.log(o),N().authStore.feedFetchDataLog(`fetch user ${s} time entries error`,"error"),!1}}formatUserData(r){var t,s;try{let i=[];for(const a of r.timeEntries){const c=(t=a==null?void 0:a.timeInterval)==null?void 0:t.duration,o=(s=a==null?void 0:a.timeInterval)==null?void 0:s.start,l=N().projectStore.projectList.find(({id:m})=>m===(a==null?void 0:a.projectId)),f=i.find(m=>m.date===he(o));(c==null?void 0:c.length)&&(o==null?void 0:o.length)&&(f?i=i.map(m=>m.date===he(o)?{date:m.date,timeEntries:[...m.timeEntries,w(b({},a),{project:l||{name:"Without project",color:"#ffffff"}})],hours:m.hours+K(c)}:m):i.push({date:he(o),timeEntries:[w(b({},a),{project:l||{name:"Without project",color:"#ffffff"}})],hours:K(c)}))}return w(b({},r),{timeEntriesByDay:i})}catch(i){return console.log(i),!1}}getUsersTeams(){const r=[];for(const t of this.userList){const s=[];for(const i of N().teamStore.teamList)for(const a of i.users)a.id===t.id&&s.push(i);r.push(w(b({},t),{teams:s}))}this.setUserList(r)}*fetchUserList(r={}){var t;try{N().authStore.feedFetchDataLog("fetching user list...");const{pageSize:s=5e3}=r,{defaultWorkspace:i}=N().authStore.user,a=yield W().get(`/workspaces/${i}/users`,{params:{"page-size":s,status:"ACTIVE"}});if(a.status!==200)return N().authStore.feedFetchDataLog("fetch user list error","error"),!1;if((t=a==null?void 0:a.data)==null?void 0:t.length){N().authStore.feedFetchDataLog("fetch user list success","success");const c=[];for(const o of a.data){const l=yield this.fetchUserTimeEntries(o);if(l){const f=this.formatUserData(b(b({},o),l));c.push(f)}}if(c.length)return this.setUserList(c),N().authStore.feedFetchDataLog("fetch all users time entries success","success"),!0}return N().authStore.feedFetchDataLog("fetch user list error","error"),!1}catch(s){return console.log(s),N().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*fetchUserSummaryReport(r){try{const{defaultWorkspace:t}=N().authStore.user,s=yield qe.post(`/workspaces/${t}/reports/summary`,{amountShown:"HIDE_AMOUNT",dateRangeStart:`${new Date(this.queryStartDate).toISOString().split("T")[0]}T00:00:00.000Z`,dateRangeEnd:`${new Date(this.queryEndDate).toISOString().split("T")[0]}T23:59:59.999Z`,exportType:"PDF",summaryFilter:{groups:["PROJECT","TIMEENTRY"]},users:{ids:[r.id],contains:"CONTAINS",status:"ALL"},userLocale:"pt_BR"},{responseType:"blob"}),a=`${r.name.toLowerCase().split(" ").map(o=>Ut(o)).join("-")}__from_${ae(this.queryStartDate)}_to_${ae(this.queryEndDate)}`,c=new Blob([s.data],{type:"application/pdf"});if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(c,a);else{const o=document.createElement("a"),l=document.querySelector("body");o.href=window.URL.createObjectURL(c),o.download=a,o.style.display="none",l.appendChild(o),o.click(),l.removeChild(o),window.URL.revokeObjectURL(o.href)}return!1}catch(t){return console.log(t),N().authStore.feedFetchDataLog("fetch user list error","error"),!1}}*sendReports(r={}){try{const{collaborator_ids:t}=r;return(yield W().post("/send-reports",{collaborator_ids:t})).status===200}catch(t){return console.log(t),!1}}*sendReport(r={}){try{const{collaborator_id:t}=r;return(yield W().post("/send-reports",{collaborator_ids:[t]})).status===200}catch(t){return console.log(t),!1}}}class ve{constructor(r){v(this,"id",null);v(this,"name",null);v(this,"email",null);v(this,"workspaceId",null);v(this,"color",null);v(this,"duration",null);v(this,"estimate",null);v(this,"users",[]);v(this,"timeEntriesByUser",[]);if(Y(this,{id:y,name:y,email:y,workspaceId:y,color:y,duration:y,estimate:y,users:y,timeEntriesByUser:y}),r==null||r.id==null)throw new Error("Invalid Project constructor");const{id:t,name:s,email:i,workspaceId:a,color:c,duration:o,estimate:l,users:f,timeEntriesByUser:m}=r;this.id=t,this.name=s||"",this.email=i||"",this.workspaceId=a||"",this.color=c||"",this.duration=o||"",this.estimate=l||"",this.users=f||[],this.timeEntriesByUser=m||[]}static fromApi({id:r,name:t,email:s,workspaceId:i,color:a,duration:c,estimate:o,users:l,timeEntriesByUser:f}={}){return new ve({id:r,name:t,email:s,workspaceId:i,color:a,duration:c,estimate:o,users:l,timeEntriesByUser:f})}}class Bt{constructor(){v(this,"projectList",[]);Y(this,{projectList:y,setProjectList:D.bound,formatProjectData:D.bound,formatProjectList:D.bound,fetchProjectList:z})}setProjectList(r=[]){this.projectList=r.map(t=>ve.fromApi(t))}formatProjectData(r={}){var t;try{const{id:s}=r;let i=[];for(const a of N().userStore.userList){const c=a.timeEntries.filter(o=>o.projectId===s);for(const o of c){const l=i.find(S=>S.id===o.userId);let f=0;const m=(t=o==null?void 0:o.timeInterval)==null?void 0:t.duration;(m==null?void 0:m.length)&&(f+=K(m)),l?i=i.map(S=>S.id===o.userId?w(b({},S),{timeEntries:[...S.timeEntries,o],hours:S.hours+f}):S):i.push(w(b({},a),{timeEntries:[o],hours:f}))}}return w(b({},r),{timeEntriesByUser:i})}catch(s){return console.log(s),!1}}formatProjectList(){const r=[];for(const t of this.projectList){const s=this.formatProjectData(t);r.push(s)}this.setProjectList(r)}*fetchProjectList(r={}){var t;try{N().authStore.feedFetchDataLog("fetching project list...");const{pageSize:s=5e3}=r,{defaultWorkspace:i}=N().authStore.user,a=yield W().get(`/workspaces/${i}/projects`,{params:{archived:!1,"page-size":s}});return a.status!==200?(N().authStore.feedFetchDataLog("fetch project list error","error"),!1):((t=a==null?void 0:a.data)==null?void 0:t.length)?(this.setProjectList(a.data),N().authStore.feedFetchDataLog("fetch project list success","success"),!0):!1}catch(s){return console.log(s),N().authStore.feedFetchDataLog("fetch project list error","error"),!1}}}class ye{constructor(r){v(this,"id",null);v(this,"name",null);v(this,"image",null);v(this,"users",[]);v(this,"timeEntriesByProject",[]);if(Y(this,{id:y,name:y,image:y,users:y,timeEntriesByProject:y}),r==null||r.id==null)throw new Error("Invalid Team constructor");const{id:t,name:s,image:i,users:a,timeEntriesByProject:c}=r;this.id=t,this.name=s||"",this.image=i||"",this.users=a||[],this.timeEntriesByProject=c||[]}static fromApi({id:r,name:t,image:s,users:i,timeEntriesByProject:a}={}){return new ye({id:r,name:t,image:s,users:i,timeEntriesByProject:a})}}class At{constructor(){v(this,"teamList",[]);Y(this,{teamList:y,setTeamList:D.bound,createTeam:D.bound,editTeam:D.bound,fetchTeamList:D.bound,formatTeamData:D.bound})}createTeam(r={}){try{const{users:t}=r,[s,i]=H("team-list"),a=s||[];let c=1;return a.length?(c=a.length+1,i([...a,w(b({},r),{id:c,users:t.map(o=>o.id)})])):i([w(b({},r),{id:1,users:t.map(o=>o.id)})]),c}catch(t){return console.log(t),!1}finally{this.fetchTeamList()}}editTeam(r,t={}){try{const[s,i]=H("team-list"),{users:a}=t;return i(s.map(c=>c.id===r?w(b(b({},c),c),{users:a.map(o=>o.id)}):c)),r}catch(s){return console.log(s),!1}finally{this.fetchTeamList()}}removeTeam(r={}){try{const[t,s]=H("team-list"),i=t.filter(a=>a.id!==r.id);s(i),this.setTeamList(i.map(a=>w(b({},a),{users:N().userStore.userList.filter(c=>a.users.includes(c.id))})))}catch(t){console.log(t)}}setTeamList(r=[]){this.teamList=r.map(t=>ye.fromApi(t))}fetchTeamList(){try{N().authStore.feedFetchDataLog("fetching team list...");const[r]=H("team-list");if(r.length){const t=[];for(const s of r){const i=this.formatTeamData(s);t.push(w(b({},i),{users:N().userStore.userList.filter(a=>s.users.includes(a.id))}))}this.setTeamList(t),N().authStore.feedFetchDataLog("fetch team list success","success")}return!1}catch(r){return console.log(r),N().authStore.feedFetchDataLog("fetch team list error","error"),!1}}formatTeamData(r={}){var t;try{const s=[];let i=[];for(const c of r.users){const o=N().userStore.userList.find(l=>l.id===c);if(o){const{timeEntries:l,hours:f}=o;for(const S of l){const L=i.find(h=>h.id===S.projectId);let u=0;const T=(t=S==null?void 0:S.timeInterval)==null?void 0:t.duration;(T==null?void 0:T.length)&&(u+=K(T)),L?i=i.map(h=>h.id===S.projectId?w(b({},h),{id:S.projectId,timeEntries:[...h.timeEntries,S],hours:h.hours+u}):h):i.push({id:S.projectId,timeEntries:[S],hours:u})}const m=N().userStore.userList.find(S=>S.id===c.id);s.push(w(b({},m),{timeEntries:l,hours:f}))}}let a=0;for(const c of i){if(c.id){const o=N().projectStore.projectList.find(l=>l.id===c.id);o&&(i[a]=w(b({},i[a]),{name:o.name,color:o.color}))}else i[a]=w(b({},i[a]),{name:"Without project",color:"#ffffff"});a++}return w(b({},r),{users:s,timeEntriesByProject:i})}catch(s){return console.log(s),!1}}}class Mt{constructor(){v(this,"authStore",null);v(this,"userStore",null);v(this,"projectStore",null);v(this,"teamStore",null)}init(){this.authStore=new Rt,this.userStore=new Ot,this.projectStore=new Bt,this.teamStore=new At}}const We=g.exports.createContext({}),qt=We.Provider,U=()=>g.exports.useContext(We);const Wt=[{route:"/",label:"Collaborators"},{route:"/teams",label:"Teams"},{route:"/projects",label:"Projects"}],ze=({vertical:n,drawer:r})=>{const t=q(),s=i=>{t(i),r&&r.close()};return e("nav",{className:`menu ${n?"vertical":""}`,children:e("ul",{className:"menu__list",children:Wt.map(i=>e("li",{className:"menu__list__item",children:e(x,{className:"menu__list__item__button",fullWidth:n,color:"primary",onClick:()=>s(i.route),children:i.label})},i.route))})})};const zt=()=>{const[n,r]=g.exports.useState(!1),t=()=>{r(!0)},s=()=>{r(!1)};return d("div",{className:"drawer",children:[e(x,{onClick:t,children:e(Ve,{color:"primary"})}),e(Ge,{anchor:"right",open:n,onClose:s,onOpen:t,children:e("div",{className:"drawer__content",children:e(ze,{vertical:!0,drawer:{close:s}})})})]})};const Ht=()=>e("div",{className:"logo",children:"Clockify Teams"});const Jt=()=>{const[n,r]=g.exports.useState(!0);let t=0;const s=()=>{const i=window.pageYOffset||document.documentElement.scrollTop;i>t?r(!1):r(!0),t=i<=0?0:i};return g.exports.useEffect(()=>(window.addEventListener("scroll",s,!1),()=>{window.removeEventListener("scroll",s,!1)}),[]),e(Pe,{className:"header",position:"sticky",style:{transform:n?"none":"translate3d(0, calc(-100% - 2rem),0)",transition:"transform 0.25s cubic-bezier(0.645,0.045,0.355,1)"},children:e(A,{maxWidth:"lg",children:d("div",{className:"header__content",children:[e(Ht,{}),e("div",{className:"header__menu",children:e(ze,{})}),e("div",{className:"header__drawer",children:e(zt,{})})]})})})};var Xt=P(Jt);const Ne=n=>{var Q;const r=U(),{hours:t,warnings:s,error:i,success:a,user:c,pdf:o}=n,[l,f]=g.exports.useState(!1),[m,S]=g.exports.useState(!1),[L,u]=g.exports.useState(!1),[T,h]=g.exports.useState("idle"),k=async()=>{f(!0),await J(r.userStore.fetchUserSummaryReport(c)),f(!1)},$=()=>{if(a)return"#2ecc71";if(i)return"#f44336";switch(T){case"success":return"#2ecc71";case"error":return"#f44336";default:return"#fff"}},O=async()=>{try{if(u(!1),S(!0),(await J(r.userStore.sendReport({collaborator_id:c.id}))).error){h("error");return}h("success")}catch(R){console.log(R)}finally{S(!1)}};return d("div",{className:"user__meta",children:[d("div",{className:"user__meta__item",style:{color:t>=200?"#f44336":"#ffffff"},children:[Ft(t)," \u2022 ",t.toFixed(2),e(je,{color:t>=200?"error":""})]}),e("div",{className:"user__meta__item",style:{color:$()},children:o?e(me,{onClick:k,disabled:l,children:l?e(ue,{style:{width:20,height:20}}):e(et,{})}):null}),e("div",{className:"user__meta__item",style:{color:$()},children:e(me,{onClick:u,disabled:m,children:m?e(ue,{style:{width:20,height:20}}):e(Re,{})})}),((Q=Object.entries(s).filter(([,R])=>R>0))==null?void 0:Q.length)?e(Fe,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:Object.entries(s).filter(([,R])=>R>0).map(([R,G])=>e("li",{className:"warning-list__item",children:`${G}x ${se[R]}`},se[R]))}),children:e("div",{className:"user__meta__item warning",children:e(Ue,{color:s.NO_PROJECT>0||s.NO_DESCRIPTION>0?"error":"inherit"})})}):e("div",{className:"user__meta__item",children:e(tt,{color:"secondary"})}),d(fe,{open:L,onClose:()=>u(!1),children:[e(pe,{children:"Report"}),e(ge,{children:e(_e,{children:`Send report to "${c.email}"?`})}),d(Se,{children:[e(x,{autoFocus:!0,onClick:()=>u(!1),color:"primary",children:"Cancel"}),e(x,{onClick:O,color:"primary",children:"Confirm"})]})]})]})};Ne.propTypes={hours:_.number.isRequired,user:_.instanceOf(Object).isRequired,pdf:_.bool,warnings:_.instanceOf(Object).isRequired,error:_.bool,success:_.bool};Ne.defaultProps={pdf:!1,error:!1,success:!1};const be=n=>{const{id:r,name:t,lastName:s,profilePicture:i,email:a,showMeta:c,pdf:o,disabled:l,hours:f,warnings:m,error:S,success:L,hasCheckBox:u,checked:T,onCheck:h}=n,k=q();return d(Z,{className:"user",children:[u?e("div",{className:"user__checkbox",children:e(Ie,{checked:T,onChange:$=>h($.target.checked),color:"primary"})}):null,d("div",{className:"user__pressable",onClick:()=>l?null:k(`/users/${r}`),style:{pointerEvents:l?"none":"initial"},children:[e(V,{alt:t,src:i,className:"user__avatar"}),d("div",{className:"user__profile",children:[e("div",{className:"user__name",children:t}),e("div",{className:"user__email",children:a})]})]}),c?e(Ne,{pdf:o,hours:f,warnings:m,user:{id:r,name:t,lastName:s,email:a},error:S,success:L}):null]})};be.propTypes={id:_.oneOfType([_.number,_.string]),name:_.string,lastName:_.string,profilePicture:_.string,email:_.string,showMeta:_.bool,pdf:_.bool,disabled:_.bool,hours:_.number,warnings:_.instanceOf(Object),checked:_.bool,error:_.bool,hasCheckBox:_.bool,success:_.bool,onCheck:_.func};be.defaultProps={id:null,name:"",lastName:"",profilePicture:"",email:"",showMeta:!1,pdf:!1,disabled:!1,hours:0,warnings:null,checked:!1,success:!1,error:!1,hasCheckBox:!1,onCheck:()=>""};var X=P(be);const Yt=()=>{var f;const n=U(),r=ie(),t=q(),[s,i]=g.exports.useState(!1),a=n.teamStore.teamList.find(({id:m})=>m===Number(r.id)),c=()=>{i(!0)},o=()=>{i(!1)},l=()=>{n.teamStore.removeTeam(a),o(),t("/teams")};return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),a?d(re,{children:[d("div",{className:"screen team-detail",children:[d(A,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(V,{alt:a==null?void 0:a.name,src:a==null?void 0:a.image,className:"team-detail__avatar"}),e("h2",{children:a==null?void 0:a.name})]}),e("div",{className:"screen__header__right",children:e(x,{onClick:c,children:e(rt,{})})})]}),e("main",{children:d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Team collaborators"})}),((f=a==null?void 0:a.users)==null?void 0:f.length)?a.users.map(m=>e(X,{id:m.id,profilePicture:m==null?void 0:m.profilePicture,name:m==null?void 0:m.name,email:m==null?void 0:m.email,hours:m==null?void 0:m.hours,warnings:m==null?void 0:m.warnings,showMeta:!0},m.id)):null]})})]}),e(Oe,{className:"team-detail__edit-team",color:"primary","aria-label":"Edit team",onClick:()=>{t(`/teams/edit/${a.id}`)},children:e(at,{})})]}),d(fe,{open:s,onClose:o,children:[e(pe,{children:`Delete team ${a.name}`}),e(ge,{children:e(_e,{children:`Are you sure you want to delete "${a.name}" team?`})}),d(Se,{children:[e(x,{autoFocus:!0,onClick:o,color:"primary",children:"Cancel"}),e(x,{onClick:l,color:"primary",children:"Confirm"})]})]})]}):null};var Kt=P(Yt);const Le=n=>{const{id:r,name:t,image:s,avatarSize:i,fontSize:a,disabled:c,card:o}=n,l=q();return o?d(Z,{className:"team card",button:!c,onClick:()=>c?null:l(`/teams/${r}`),children:[s.length?e("img",{className:"team__image",src:s,alt:t}):null,e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:a},children:t})})]}):d(Z,{className:"team",button:!c,onClick:()=>c?null:l(`/teams/${r}`),children:[e(V,{alt:t,src:s,className:"team__avatar",style:{width:i,height:i}}),e("div",{className:"team__data",children:e("div",{className:"team__name",style:{fontSize:a},children:t})})]})};Le.propTypes={id:_.number.isRequired,name:_.string,image:_.string,avatarSize:_.number,fontSize:_.number,disabled:_.bool,card:_.bool};Le.defaultProps={name:"",image:"",avatarSize:50,fontSize:16,disabled:!1,card:!1};var oe=P(Le);const Qt=()=>{const n=U(),r=ie(),t=q(),s=n.teamStore.teamList.find(h=>h.id===Number(r.id)),[i,a]=g.exports.useState(""),[c,o]=g.exports.useState(""),[l,f]=g.exports.useState([]),[m,S]=g.exports.useState([]),L=(h,k,$)=>{f(j.sortBy(k.filter(O=>O.id!==h.id),"name")),S(j.sortBy([...$,h],"name"))},u=(h,k,$)=>{S(j.sortBy($.filter(O=>O.id!==h.id),"name")),f(j.sortBy([...k,h],"name"))},T=async()=>{const h=await n.teamStore.editTeam(s.id,{name:i,image:c,users:m});t(`/teams/${h}`),h&&alert("Suas altera\xE7\xF5es foram salvas.")};return g.exports.useEffect(()=>{a(s.name),o(s.image),S(s.users);const h=[...n.userStore.userList];s.users.forEach(k=>{h.forEach(($,O)=>{$.id===k.id&&h.splice(O,1)})}),f(h)},[s]),g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(A,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:`Edit team ${s.name}`})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(B,{id:"team-name",label:"Name",value:i,onChange:h=>{a(h.target.value)}}),e(B,{id:"team-image",label:"Image",value:c,onChange:h=>{o(h.target.value)}}),(i==null?void 0:i.length)||(c==null?void 0:c.length)?e("div",{className:"screen__header__preview",children:e(oe,{name:i,image:c,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(x,{variant:"outlined",onClick:T,children:"Salvar"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),l.map(h=>d("div",{className:"user-list__item",children:[e(X,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours},h.id),e(x,{className:"user-list__item__bt-add",onClick:()=>L(h,l,m),children:e(Be,{})})]},h.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),m.map(h=>d("div",{className:"user-list__item",children:[e(x,{className:"user-list__item__bt-add",onClick:()=>u(h,l,m),children:e(Ae,{})}),e(X,{id:h.id,profilePicture:h==null?void 0:h.profilePicture,name:h==null?void 0:h.name,email:h==null?void 0:h.email,hours:h==null?void 0:h.hours})]},h.id))]})]})]})]})})};var Zt=P(Qt);const Vt=()=>{const n=U(),r=q(),[t,s]=g.exports.useState(""),[i,a]=g.exports.useState(""),[c,o]=g.exports.useState([]),[l,f]=g.exports.useState([]),m=u=>{o(j.sortBy(c.filter(T=>T.id!==u.id),"name")),f(j.sortBy([...l,u],"name"))},S=u=>{f(j.sortBy(l.filter(T=>T.id!==u.id),"name")),o(j.sortBy([...c,u],"name"))},L=async()=>{const u=n.teamStore.createTeam({name:t,image:i,users:l});n.teamStore.fetchTeamList(),r(`/teams/${u}`),u&&alert(`Team ${t} created.`)};return g.exports.useEffect(()=>{o(n.userStore.userList),window.scrollTo(0,0)},[]),e("div",{className:"screen create-team",children:d(A,{maxWidth:"lg",children:[e("header",{className:"screen__header",children:e("h2",{children:"Create team"})}),d("main",{children:[d("div",{className:"create-team__form",children:[d("div",{className:"create-team__form__content",children:[e(B,{id:"team-name",label:"Name",value:t,onChange:u=>{s(u.target.value)}}),e(B,{id:"team-image",label:"Image",value:i,onChange:u=>{a(u.target.value)}}),(t==null?void 0:t.length)||(i==null?void 0:i.length)?e("div",{className:"screen__header__preview",children:e(oe,{name:t,image:i,avatarSize:80,fontSize:22,disabled:!0})}):null]}),e(x,{variant:"outlined",onClick:L,children:"Create"})]}),d("div",{className:"create-team__user-lists",children:[d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"All collaborators"})}),c.map(u=>d("div",{className:"user-list__item",children:[e(X,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours},u.id),e(x,{className:"user-list__item__bt-add",onClick:()=>m(u),children:e(Be,{})})]},u.id))]}),d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Selected collaborators"})}),l.map(u=>d("div",{className:"user-list__item",children:[e(x,{className:"user-list__item__bt-add",onClick:()=>S(u),children:e(Ae,{})}),e(X,{id:u.id,profilePicture:u==null?void 0:u.profilePicture,name:u==null?void 0:u.name,email:u==null?void 0:u.email,hours:u==null?void 0:u.hours})]},u.id))]})]})]})]})})};var Gt=P(Vt);const er=()=>{var c,o;const n=U(),r=q(),[t,s]=g.exports.useState(""),[i,a]=g.exports.useState([]);return g.exports.useEffect(()=>{if(t.length){a(n.teamStore.teamList.filter(l=>l.name.toLowerCase().includes(t.toLowerCase())));return}a(n.teamStore.teamList)},[t]),g.exports.useEffect(()=>{a(n.teamStore.teamList),window.scrollTo(0,0)},[]),d("div",{className:"screen teams",children:[d(A,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Teams"}),e("div",{className:"screen__header__right",children:((o=(c=n==null?void 0:n.teamStore)==null?void 0:c.teamList)==null?void 0:o.length)?e(B,{id:"filter-term",label:"Filter",size:"small",value:t,onChange:l=>{s(l.target.value)}}):null})]}),e("main",{children:(i==null?void 0:i.length)?i.map(l=>e(oe,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id)):e("div",{children:"No teams found."})})]}),e(Oe,{className:"teams__create-team",color:"primary","aria-label":"Create team",onClick:()=>{r("/teams/create")},children:e(st,{})})]})};var tr=P(er);const we=n=>{const{project:r,time:t,description:s,disabled:i,showMeta:a,warnings:c}=n,o=q();return d(Z,{button:!i,className:"time-entry",style:{borderColor:r.color},children:[d("div",{className:"time-entry__pressable",onClick:()=>r.id?o(`/projects/${r.id}`):null,children:[e("div",{className:"time-entry__top",children:e("div",{className:"time-entry__project-name",children:r.name})}),d("div",{className:"time-entry__bottom",children:[e("div",{className:"time-entry__time",style:{borderColor:r.color},children:t.replace("PT","").replace("H","hr ").replace("M","min")}),"-",e("div",{className:"time-entry__description",children:s})]})]}),a&&(c==null?void 0:c.length)?e("div",{className:"time-entry__meta",children:e(Fe,{arrow:!0,placement:"left",title:e("ul",{className:"warning-list",children:c.map(l=>e("li",{className:"warning-list__item",children:l}))}),children:e("div",{className:"time-entry__meta__item warning",children:e(Ue,{color:c.length===1&&c[0]==="Entrada maior que 6 horas"?"inherit":"error"})})})}):null]})};we.propTypes={project:_.instanceOf(Object),time:_.string,description:_.string,disabled:_.bool,showMeta:_.bool,warnings:_.arrayOf(_.instanceOf(Object))};we.defaultProps={project:{},time:"",description:"",disabled:!1,showMeta:!1,warnings:[]};var rr=P(we);const ar=()=>{var o;const n=U(),r=ie(),t=n.userStore.userList.find(({id:l})=>l===r.id),[s,i]=g.exports.useState([]),[a,c]=g.exports.useState(!1);return g.exports.useEffect(()=>{if(a){i(t.timeEntriesByDay.filter(l=>l.timeEntries.find(f=>{var m;return(m=f==null?void 0:f.warnings)==null?void 0:m.length})).map(l=>w(b({},l),{timeEntries:l.timeEntries.filter(f=>{var m;return(m=f==null?void 0:f.warnings)==null?void 0:m.length})})));return}i(t.timeEntriesByDay)},[a]),g.exports.useEffect(()=>{i(t.timeEntriesByDay),window.scrollTo(0,0)},[]),t?e("div",{className:"screen user-detail",children:d(A,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[d("div",{className:"screen__header__left",children:[e(V,{alt:t==null?void 0:t.name,src:t==null?void 0:t.profilePicture,className:"user-detail__avatar"}),e("h2",{children:t==null?void 0:t.name})]}),d("div",{className:"screen__header__right",style:{color:t.hours>=200?"#f44336":"#ffffff"},children:[t.hours.toFixed(2),e(je,{color:t.hours>=200?"error":""})]})]}),d("main",{children:[(t==null?void 0:t.teams.length)?d("div",{className:"user-detail__teams",children:[e("header",{className:"section-header",children:e("h3",{children:"Collaborator teams"})}),t.teams.map(l=>e(oe,{id:l.id,name:l==null?void 0:l.name,image:l==null?void 0:l.image},l.id))]}):null,((o=t==null?void 0:t.timeEntries)==null?void 0:o.length)?d("div",{className:"time-entries",children:[d("header",{className:"section-header",children:[e("h3",{children:"Time entries"}),e("div",{className:"time-entries__filter",children:e(it,{control:e(nt,{checked:a,onChange:()=>c(!a),name:"filterWarnings",color:"primary"}),label:"Filter warnings"})})]}),(s==null?void 0:s.length)?s.map(l=>d("div",{className:"time-entries__day",children:[e("header",{className:"section-header",children:e("h3",{children:l.date})}),e("div",{className:"description",children:l.timeEntries.map(f=>{var m;return e(rr,{disabled:!((m=f==null?void 0:f.project)==null?void 0:m.id),project:f.project,time:f.timeInterval.duration,description:f.description,warnings:f.warnings,showMeta:!0},f.id)})})]},l.date)):"Nenhuma entrada de tempo."]}):null,(t==null?void 0:t.timeEntries.length)?null:e("div",{children:"Nenhuma entrada encontrada para este usu\xE1rio no per\xEDodo selecionado."})]})]})}):null};var sr=P(ar);const ir=()=>{var O,Q,R,G;const n=U(),[r,t]=g.exports.useState(""),[s,i]=g.exports.useState([]),[a,c]=g.exports.useState("name"),[o,l]=g.exports.useState([]),[f,m]=g.exports.useState(!1),[S,L]=g.exports.useState(!1),u=async p=>{try{if(m(!0),l(E=>E.map(I=>p.map(({id:ee})=>ee).includes(I.id)?w(b({},I),{requesting:!0}):I)),(await J(n.userStore.sendReports({collaborator_ids:p.map(({id:E})=>E)}))).error)return}catch(C){console.log(C)}finally{m(!1),l(C=>C.map(E=>p.map(({id:I})=>I).includes(E.id)?w(b({},E),{requesting:!1}):E))}},T=async()=>{try{m(!0),L(!1);const p=s.filter((C,E)=>o[E].checked&&!o[E].requesting);await u(p)}catch(p){console.log(p)}finally{m(!1)}},h=async()=>{try{De({data:s.map(({name:p,email:C,hours:E,warnings:I})=>({name:p,email:C,hours:E.toFixed(2),warnings:JSON.stringify(I).replace('"',"").replace('"',"").replace('"'," ").replace('"',"").replace("_"," ").replace("_"," ").replace("{","").replace("}","")})),fileName:`Clockify_Teams_REPORT___from_${ae(n.userStore.queryStartDate)}_to_${ae(n.userStore.queryEndDate)}`,exportType:De.types.xls})}catch(p){console.log(p)}},k=(p,C)=>{l(E=>E.map(I=>I.id===p?w(b({},I),{checked:C}):I))},$=p=>{l(C=>C.map(E=>w(b({},E),{checked:p})))};return g.exports.useEffect(()=>{const p=a==="hours"?"desc":"asc";if(r.length){i(j.orderBy(n.userStore.userList.filter(C=>C.name.toLowerCase().includes(r.toLowerCase())),a,p));return}i(j.orderBy(n.userStore.userList,a,p))},[r]),g.exports.useEffect(()=>{const p=a==="hours"?"desc":"asc";i(C=>j.orderBy(C,a,p))},[a]),g.exports.useEffect(()=>{i(j.orderBy(n.userStore.userList,a)),l(j.orderBy(n.userStore.userList,a).map(({id:p})=>({id:p,checked:!1,requesting:!1,error:!1,sent:!1}))),window.scrollTo(0,0)},[]),e("div",{className:"screen users",children:d(A,{maxWidth:"lg",children:[d(F,{component:"header",className:"screen__header",sx:{flexDirection:{sm:"column"},alignItems:{sm:"flex-start"}},children:[d(F,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2,children:[e("h2",{children:"Collaborators"}),e(x,{onClick:h,variant:"outlined",startIcon:e(ot,{}),size:"large",children:"XLS"})]}),d(F,{className:"screen__header__content",sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"100%",gap:2},children:[d(F,{sx:{display:"flex",alignItems:"center",gap:2,marginLeft:1},children:[e(Ie,{checked:!o.find(p=>p.checked===!1),onChange:p=>$(p.target.checked),color:"primary",disabled:f}),o.filter(p=>p.checked).length?e("div",{className:"screen__header__content__item",children:e(x,{onClick:()=>L(!0),disabled:f,variant:"outlined",size:"large",sx:{paddingLeft:0,paddingRight:0,minWidth:40},children:f?e(ue,{style:{width:20,height:20}}):e(Re,{})})}):null]}),d(F,{display:"flex",gap:2,width:{xs:"100%",sm:"initial"},children:[((Q=(O=n==null?void 0:n.userStore)==null?void 0:O.userList)==null?void 0:Q.length)?e(F,{flex:{xs:2},children:d(lt,{fullWidth:!0,sx:{minWidth:{sm:150}},children:[e(ct,{id:"order-by-label",children:"Order by"}),d(dt,{labelId:"order-by-label",id:"order-by",value:a,label:"Order by",onChange:p=>c(p.target.value),size:"small",children:[e(de,{value:"name",children:"Name"}),e(de,{value:"email",children:"E-mail"}),e(de,{value:"hours",children:"Workload"})]})]})}):null,((G=(R=n==null?void 0:n.userStore)==null?void 0:R.userList)==null?void 0:G.length)?e(F,{flex:"3",children:e(B,{fullWidth:!0,id:"filter-term",label:"Filter",size:"small",value:r,onChange:p=>{t(p.target.value)}})}):null]})]})]}),e("main",{children:(s==null?void 0:s.length)?s.map((p,C)=>{var E,I,ee,Ee;return e(X,{id:p.id,profilePicture:p==null?void 0:p.profilePicture,name:p==null?void 0:p.name,lastName:p==null?void 0:p.lastName,email:p==null?void 0:p.email,hours:p==null?void 0:p.hours,payment:p==null?void 0:p.payment,warnings:p==null?void 0:p.warnings,checked:(E=o[C])==null?void 0:E.checked,requesting:(I=o[C])==null?void 0:I.requesting,error:(ee=o[C])==null?void 0:ee.error,success:(Ee=o[C])==null?void 0:Ee.success,onCheck:Je=>k(p.id,Je),showMeta:!0,pdf:!0,hasCheckBox:!0},p.id)}):e("div",{children:"No collaborators found."})}),d(fe,{open:S,onClose:()=>L(!1),children:[e(pe,{children:"Report"}),e(ge,{children:e(_e,{children:` Send report to ${o.filter(p=>p.checked).length} collaborators?`})}),d(Se,{children:[e(x,{autoFocus:!0,onClick:()=>L(!1),color:"primary",children:"Cancel"}),e(x,{onClick:T,color:"primary",children:"Confirm"})]})]})]})})};var nr=P(ir);const Te=n=>{const{id:r,index:t,name:s,color:i,disabled:a=!1}=n,[c,o]=g.exports.useState(!1),l=q();return g.exports.useEffect(()=>{const f=setTimeout(()=>{o(!0)},t*50+100);return()=>{clearTimeout(f)}},[]),e(Z,{button:!a,onClick:()=>a?null:l(`/projects/${r}`),className:"project",style:{borderColor:c?i:"transparent"},children:e("div",{className:"project__name",children:s})})};Te.propTypes={id:_.string.isRequired,index:_.number.isRequired,name:_.string,color:_.string,disabled:_.bool};Te.defaultProps={name:"",color:"",disabled:!1};var or=P(Te);const lr=()=>{var a,c;const n=U(),[r,t]=g.exports.useState(""),[s,i]=g.exports.useState([]);return g.exports.useEffect(()=>{if(r.length){i(n.projectStore.projectList.filter(o=>o.name.toLowerCase().includes(r.toLowerCase())));return}i(n.projectStore.projectList)},[r]),g.exports.useEffect(()=>{i(n.projectStore.projectList),window.scrollTo(0,0)},[]),e("div",{className:"screen projects",children:d(A,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("h2",{children:"Projects"}),((c=(a=n==null?void 0:n.projectStore)==null?void 0:a.projectList)==null?void 0:c.length)?e(B,{id:"filter-term",label:"Filter",size:"small",value:r,onChange:o=>{t(o.target.value)}}):null]}),e("main",{children:(s==null?void 0:s.length)?s.map((o,l)=>e(or,{id:o.id,color:o==null?void 0:o.color,name:o==null?void 0:o.name,index:l},o.id)):e("div",{children:"No projects found."})})]})})};var cr=P(lr);const dr=()=>{var s,i;const n=U(),r=ie(),t=n.projectStore.projectList.find(({id:a})=>a===r.id);return g.exports.useEffect(()=>{window.scrollTo(0,0)},[]),t?e("div",{className:"screen project-detail",children:d(A,{maxWidth:"lg",children:[d("header",{className:"screen__header",children:[e("div",{className:"screen__header__left",children:e("h2",{children:t==null?void 0:t.name})}),e("div",{className:"screen__header__right",children:e("div",{className:"project-detail__estimate",children:e("div",{children:`Total: ${K(t==null?void 0:t.duration).toFixed(2)} hours`})})})]}),d("main",{children:[((s=t==null?void 0:t.timeEntriesByUser)==null?void 0:s.length)?d("div",{className:"user-list",children:[e("header",{className:"section-header",children:e("h3",{children:"Project collaborators"})}),t.timeEntriesByUser.map(a=>e(X,{id:a.id,profilePicture:a==null?void 0:a.profilePicture,name:a==null?void 0:a.name,email:a==null?void 0:a.email,hours:a==null?void 0:a.hours},a.id))]}):null,((i=t==null?void 0:t.timeEntriesByUser)==null?void 0:i.length)?null:e("div",{children:"No time entries found."})]})]})}):null};var hr=P(dr);const mr=()=>{var o,l,f,m,S,L,u,T;const n=U(),[r,t]=g.exports.useState(""),[s,i]=g.exports.useState(!1),[a]=H("clockify-api-key"),c=async()=>{i(!0),await J(n.authStore.authenticate(r)),i(!1)};return g.exports.useEffect(()=>{const h=document.querySelector(".login .fetch-data-log");h&&(h.scrollTop=h.scrollHeight)},[n.authStore.fetchDataLog.length]),g.exports.useEffect(()=>{(a==null?void 0:a.length)&&t(a)},[]),e("div",{className:"screen login",children:e(A,{maxWidth:"lg",className:"login__container",children:d(F,{position:"relative",children:[e("h1",{children:"Clockify Teams"}),e("div",{className:"login__box",children:n.authStore.isConfirmingIdentity?d(re,{children:[d("div",{className:"login__user",children:[e(V,{alt:(l=(o=n==null?void 0:n.authStore)==null?void 0:o.user)==null?void 0:l.name,src:(m=(f=n==null?void 0:n.authStore)==null?void 0:f.user)==null?void 0:m.profilePicture,className:"login__user__avatar"}),d("div",{className:"login__user__profile",children:[e("div",{className:"login__user__name",children:(L=(S=n==null?void 0:n.authStore)==null?void 0:S.user)==null?void 0:L.name}),e("div",{className:"login__user__email",children:(T=(u=n==null?void 0:n.authStore)==null?void 0:u.user)==null?void 0:T.email})]}),e("div",{className:"login__user__logout",children:e(me,{onClick:n.authStore.unauthenticate,children:e(ht,{})})})]}),e("div",{className:"fetch-data-log",children:n.authStore.fetchDataLog.map(({text:h,color:k})=>e("div",{style:{color:k},children:h},h))})]}):d(re,{children:[n.authStore.autoLogin?null:e(B,{id:"api-key",label:"Clockify API Key",value:r,onChange:h=>{t(h.target.value)}}),s||n.authStore.autoLogin?e(Me,{}):e(x,{variant:"outlined",onClick:c,children:"Entrar"})]})})]})})})};var ur=P(mr);const fr=()=>{var r;const n=U();return e(mt,{children:((r=n==null?void 0:n.authStore)==null?void 0:r.isAuthenticated)?d(re,{children:[e(Xt,{}),d(ke,{children:[e(M,{path:"/users/:id",element:e(sr,{})}),e(M,{path:"/projects/:id",element:e(hr,{})}),e(M,{path:"/projects",element:e(cr,{})}),e(M,{path:"/teams/edit/:id",element:e(Zt,{})}),e(M,{path:"/teams/create",element:e(Gt,{})}),e(M,{path:"/teams/:id",element:e(Kt,{})}),e(M,{path:"/teams",element:e(tr,{})}),e(M,{path:"/",element:e(nr,{})})]})]}):e(ke,{children:e(M,{path:"/",element:e(ur,{})})})})};var pr=P(fr);const gr=ut({palette:{mode:"dark",primary:{main:"#ecf0f1"},secondary:{main:"#2ecc71"},background:{default:"#222"}}}),He=({children:n})=>d(ft,{theme:gr,children:[e(pt,{}),n]});He.propTypes={children:_.node.isRequired};const Ce=n=>{const{active:r}=n;return r?e("div",{className:"loader",children:e(Me,{style:{height:1}})}):null};Ce.propTypes={active:_.bool};Ce.defaultProps={active:!1};const te=new Date,_r=()=>{const n=U(),[r,t]=g.exports.useState(!1),[s,i]=g.exports.useState(new Date(te.getFullYear(),te.getMonth(),1)),[a,c]=g.exports.useState(new Date(te.getFullYear(),te.getMonth()+1,0)),o=async()=>{n.authStore.clearDataLog(),n.authStore.setStatusConfirmingIdentity(),n.userStore.setQueryDate(s,a),t(!0),await J(n.projectStore.fetchProjectList()),await J(n.userStore.fetchUserList()),n.projectStore.formatProjectList(),n.teamStore.fetchTeamList(),n.userStore.getUsersTeams(),t(!1),n.authStore.confirmIdentity()};return n.authStore.isUnauthenticated?null:d(Pe,{className:"query-date-selector",component:"footer",children:[e("div",{className:"query-date-selector__loader",children:e(Ce,{active:r})}),d(F,{className:"query-date-selector__content",gap:2,children:[e(F,{display:"flex",gap:2,width:{xs:"100%",md:"initial"},flex:1,className:"query-date-selector__date-picker",children:e(gt,{startText:"Start date",endText:"End date",value:[s,a],disabled:r,onChange:([l,f])=>{i(l),c(f)},renderInput:(l,f)=>d(F,{display:"flex",gap:2,style:{width:"100%"},children:[e(B,w(b({},l),{helperText:null,size:"small",fullWidth:!0})),e(B,w(b({},f),{helperText:null,size:"small",fullWidth:!0}))]})})}),e(F,{width:{xs:"100%",sm:"initial"},children:e(x,{fullWidth:!0,variant:"outlined",disabled:r,onClick:o,className:"query-date-selector__bt-search",children:e(_t,{})})})]})]})};var Sr=P(_r);window.cptable={};const vr=()=>{const[n,r]=g.exports.useState(null),[t]=H("clockify-api-key"),s=async()=>{const i=Nt({RootStore:Mt,env:jt});r(i),(t==null?void 0:t.length)&&(i.authStore.setAutoLogin(!0),await J(i.authStore.authenticate(t)),i.authStore.setAutoLogin(!1))};return g.exports.useEffect(()=>{s()},[]),n?e("div",{className:"app",children:e(qt,{value:n,children:e(St,{dateAdapter:vt,locale:yt,children:d(He,{children:[e(pr,{}),e(Sr,{})]})})})}):null};bt.register(Lt,wt,Tt,Ct,Et,xt);Dt.render(e(kt.StrictMode,{children:e(vr,{})}),document.getElementById("root"));
